!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"!==n&&!Z.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function i(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(oe.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return V.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t=fe[e]={};return Z.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){J.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),Z.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(xe,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:be.test(n)?Z.parseJSON(n):n)}catch(r){}ye.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function h(){try{return J.activeElement}catch(e){}}function d(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,i=e.length;i>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,i,r,s,a,o,l,u;if(1===t.nodeType){if(ve.hasData(e)&&(s=ve.access(e),a=ve.set(t,s),u=s.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)Z.event.add(t,r,u[r][n])}ye.hasData(e)&&(o=ye.access(e),l=Z.extend({},o),ye.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Se.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=Z(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),s}function x(e){var t=J,n=Fe[e];return n||(n=b(e,t),"none"!==n&&n||(ze=(ze||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=ze[0].contentDocument,t.write(),t.close(),n=b(e,t),ze.detach()),Fe[e]=n),n}function w(e,t,n){var i,r,s,a,o=e.style;return n=n||qe(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||Z.contains(e.ownerDocument,e)||(a=Z.style(e,t)),Be.test(a)&&He.test(t)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function E(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Ge.length;r--;)if(t=Ge[r]+n,t in e)return t;return i}function S(e,t,n){var i=Ue.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function T(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===n&&(a+=Z.css(e,n+Ee[s],!0,r)),i?("content"===n&&(a-=Z.css(e,"padding"+Ee[s],!0,r)),"margin"!==n&&(a-=Z.css(e,"border"+Ee[s]+"Width",!0,r))):(a+=Z.css(e,"padding"+Ee[s],!0,r),"padding"!==n&&(a+=Z.css(e,"border"+Ee[s]+"Width",!0,r)));return a}function C(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=qe(e),a="border-box"===Z.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=w(e,t,s),(0>r||null==r)&&(r=e.style[t]),Be.test(r))return r;i=a&&(K.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+T(e,t,n||(a?"border":"content"),i,s)+"px"}function A(e,t){for(var n,i,r,s=[],a=0,o=e.length;o>a;a++)i=e[a],i.style&&(s[a]=ve.get(i,"olddisplay"),n=i.style.display,t?(s[a]||"none"!==n||(i.style.display=""),""===i.style.display&&ke(i)&&(s[a]=ve.access(i,"olddisplay",x(i.nodeName)))):(r=ke(i),"none"===n&&r||ve.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(a=0;o>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[a]||"":"none"));return e}function N(e,t,n,i,r){return new N.prototype.init(e,t,n,i,r)}function _(){return setTimeout(function(){Ke=void 0}),Ke=Z.now()}function P(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Ee[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function M(e,t,n){for(var i,r=(nt[t]||[]).concat(nt["*"]),s=0,a=r.length;a>s;s++)if(i=r[s].call(n,t,e))return i}function L(e,t,n){var i,r,s,a,o,l,u,c,h=this,d={},p=e.style,f=e.nodeType&&ke(e),g=ve.get(e,"fxshow");n.queue||(o=Z._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,Z.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=Z.css(e,"display"),c="none"===u?ve.get(e,"olddisplay")||x(e.nodeName):u,"inline"===c&&"none"===Z.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Qe.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;f=!0}d[i]=g&&g[i]||Z.style(e,i)}else u=void 0;if(Z.isEmptyObject(d))"inline"===("none"===u?x(e.nodeName):u)&&(p.display=u);else{g?"hidden"in g&&(f=g.hidden):g=ve.access(e,"fxshow",{}),s&&(g.hidden=!f),f?Z(e).show():h.done(function(){Z(e).hide()}),h.done(function(){var t;ve.remove(e,"fxshow");for(t in d)Z.style(e,t,d[t])});for(i in d)a=M(f?g[i]:0,i,h),i in g||(g[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,r,s,a;for(n in e)if(i=Z.camelCase(n),r=t[i],s=e[n],Z.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),a=Z.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function j(e,t,n){var i,r,s=0,a=tt.length,o=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ke||_(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,s=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(s);return o.notifyWith(e,[u,s,n]),1>s&&l?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ke||_(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>s;s++)if(i=tt[s].call(u,e,c,u.opts))return i;return Z.map(c,M,u),Z.isFunction(u.opts.start)&&u.opts.start.call(e,u),Z.fx.timer(Z.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(pe)||[];if(Z.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function R(e,t,n,i){function r(o){var l;return s[o]=!0,Z.each(e[o]||[],function(e,o){var u=o(t,n,i);return"string"!=typeof u||a||s[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var s={},a=e===wt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function $(e,t){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Z.extend(!0,e,i),e}function I(e,t,n){for(var i,r,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function z(e,t,n,i){var r,s,a,o,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(a=u[l+" "+s]||u["* "+s],!a)for(r in u)if(o=r.split(" "),o[1]===s&&(a=u[l+" "+o[0]]||u["* "+o[0]])){a===!0?a=u[r]:u[r]!==!0&&(s=o[0],c.unshift(o[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function F(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||Tt.test(e)?i(e,r):F(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)F(e+"["+r+"]",t[r],n,i)}function H(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var B=[],q=B.slice,W=B.concat,U=B.push,V=B.indexOf,X={},Y=X.toString,G=X.hasOwnProperty,K={},J=e.document,Q="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:q.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:B.sort,splice:B.splice},Z.extend=Z.fn.extend=function(){var e,t,n,i,r,s,a=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[o]||{},o++),"object"==typeof a||Z.isFunction(a)||(a={}),o===l&&(a=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,s=n&&Z.isArray(n)?n:[]):s=n&&Z.isPlainObject(n)?n:{},a[t]=Z.extend(u,s,i)):void 0!==i&&(a[t]=i));return a},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===Z.type(e)&&!e.nodeType&&!Z.isWindow(e)&&!(e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,s=0,a=e.length,o=n(e);if(i){if(o)for(;a>s&&(r=t.apply(e[s],i),r!==!1);s++);else for(s in e)if(r=t.apply(e[s],i),r===!1)break}else if(o)for(;a>s&&(r=t.call(e[s],s,e[s]),r!==!1);s++);else for(s in e)if(r=t.call(e[s],s,e[s]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):U.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:V.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],s=0,a=e.length,o=!n;a>s;s++)i=!t(e[s],s),i!==o&&r.push(e[s]);return r},map:function(e,t,i){var r,s=0,a=e.length,o=n(e),l=[];if(o)for(;a>s;s++)r=t(e[s],s,i),null!=r&&l.push(r);else for(s in e)r=t(e[s],s,i),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(i=q.call(arguments,2),r=function(){return e.apply(t||this,i.concat(q.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:K}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,n,i){var r,s,a,o,l,u,h,p,f,g;if((t?t.ownerDocument||t:F)!==L&&M(t),t=t||L,n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(j&&!i){if(r=ye.exec(e))if(a=r[1]){if(9===o){if(s=t.getElementById(a),!s||!s.parentNode)return n;if(s.id===a)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&I(t,s)&&s.id===a)return n.push(s),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!D||!D.test(e))){if(p=h=z,f=t,g=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(u=T(e),(h=t.getAttribute("id"))?p=h.replace(xe,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=be.test(e)&&c(t.parentNode)||t,g=u.join(",")}if(g)try{return Z.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{h||t.removeAttribute("id")}}}return A(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>E.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[z]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)E.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&typeof e.getElementsByTagName!==X&&e}function h(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=B++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,a){var o,l,u=[H,s];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[z]||(t[z]={}),(o=l[i])&&o[0]===H&&o[1]===s)return u[2]=o[2];if(l[i]=u,u[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,s=n.length;s>r;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var s,a=[],o=0,l=e.length,u=null!=t;l>o;o++)(s=e[o])&&(!n||n(s,i,r))&&(a.push(s),u&&t.push(o));return a}function v(e,t,n,r,s,a){return r&&!r[z]&&(r=v(r)),s&&!s[z]&&(s=v(s,a)),i(function(i,a,o,l){var u,c,h,d=[],p=[],f=a.length,v=i||g(t||"*",o.nodeType?[o]:o,[]),y=!e||!i&&t?v:m(v,d,e,o,l),b=n?s||(i?e:f||r)?[]:a:y;if(n&&n(y,b,o,l),r)for(u=m(b,p),r(u,[],o,l),c=u.length;c--;)(h=u[c])&&(b[p[c]]=!(y[p[c]]=h));if(i){if(s||e){if(s){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);s(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=s?te.call(i,h):d[c])>-1&&(i[u]=!(a[u]=h))}}else b=m(b===a?b.splice(f,b.length):b),s?s(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,s=E.relative[e[0].type],a=s||E.relative[" "],o=s?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return te.call(t,e)>-1},a,!0),c=[function(e,n,i){return!s&&(i||n!==N)||((t=n).nodeType?l(e,n,i):u(e,n,i))}];r>o;o++)if(n=E.relative[e[o].type])c=[p(f(c),n)];else{if(n=E.filter[e[o].type].apply(null,e[o].matches),n[z]){for(i=++o;r>i&&!E.relative[e[i].type];i++);return v(o>1&&f(c),o>1&&d(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(le,"$1"),n,i>o&&y(e.slice(o,i)),r>i&&y(e=e.slice(i)),r>i&&d(e))}c.push(n)}return f(c)}function b(e,n){var r=n.length>0,s=e.length>0,a=function(i,a,o,l,u){var c,h,d,p=0,f="0",g=i&&[],v=[],y=N,b=i||s&&E.find.TAG("*",u),x=H+=null==y?1:Math.random()||.1,w=b.length;for(u&&(N=a!==L&&a);f!==w&&null!=(c=b[f]);f++){if(s&&c){for(h=0;d=e[h++];)if(d(c,a,o)){l.push(c);break}u&&(H=x)}r&&((c=!d&&c)&&p--,i&&g.push(c))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(g,v,a,o);if(i){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=J.call(l));v=m(v)}Z.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(H=x,N=y),g};return r?i(a):a}var x,w,E,k,S,T,C,A,N,_,P,M,L,O,j,D,R,$,I,z="sizzle"+-new Date,F=e.document,H=0,B=0,q=n(),W=n(),U=n(),V=function(e,t){return e===t&&(P=!0),0},X="undefined",Y=1<<31,G={}.hasOwnProperty,K=[],J=K.pop,Q=K.push,Z=K.push,ee=K.slice,te=K.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=re.replace("w","w#"),ae="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+se+"))|)"+ie+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),he=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(oe),pe=new RegExp("^"+se+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),Ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(K=ee.call(F.childNodes),F.childNodes),K[F.childNodes.length].nodeType}catch(ke){Z={apply:K.length?function(e,t){Q.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:F,i=n.defaultView;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,O=n.documentElement,j=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){M()},!1):i.attachEvent&&i.attachEvent("onunload",function(){M()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return O.appendChild(e).id=z,!n.getElementsByName||!n.getElementsByName(z).length}),w.getById?(E.find.ID=function(e,t){if(typeof t.getElementById!==X&&j){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),E.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},E.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&j?t.getElementsByClassName(e):void 0},R=[],D=[],(w.qsa=ve.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&D.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||D.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(w.matchesSelector=ve.test($=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){w.disconnectedMatch=$.call(e,"div"),$.call(e,"[s!='']:x"),R.push("!=",oe)}),D=D.length&&new RegExp(D.join("|")),R=R.length&&new RegExp(R.join("|")),t=ve.test(O.compareDocumentPosition),I=t||ve.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===F&&I(F,e)?-1:t===n||t.ownerDocument===F&&I(F,t)?1:_?te.call(_,e)-te.call(_,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,r=0,s=e.parentNode,o=t.parentNode,l=[e],u=[t];if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:_?te.call(_,e)-te.call(_,t):0;if(s===o)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===F?-1:u[r]===F?1:0},n):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&M(e),n=n.replace(he,"='$1']"),!(!w.matchesSelector||!j||R&&R.test(n)||D&&D.test(n)))try{var i=$.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&M(e),I(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&M(e);var n=E.attrHandle[t.toLowerCase()],i=n&&G.call(E.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:w.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(P=!w.detectDuplicates,_=!w.sortStable&&e.slice(0),e.sort(V),P){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return _=null,e},k=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},E=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,g=s!==a?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(m){if(s){for(;g;){for(h=t;h=h[g];)if(o?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?m.firstChild:m.lastChild],a&&y){for(c=m[z]||(m[z]={}),u=c[e]||[],p=u[0]===H&&u[1],d=u[0]===H&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[H,p,d];break}}else if(y&&(u=(t[z]||(t[z]={}))[e])&&u[0]===H)d=u[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((o?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[z]||(h[z]={}))[e]=[H,d]),h!==t)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,n){var r,s=E.pseudos[e]||E.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[z]?s(n):s.length>1?(r=[e,e,"",n],E.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=C(e.replace(le,"$1"));return r[z]?i(function(e,t,n,i){for(var s,a=r(e,null,i,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ee).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},E.pseudos.nth=E.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[x]=o(x);for(x in{submit:!0,reset:!0})E.pseudos[x]=l(x);return h.prototype=E.filters=E.pseudos,E.setFilters=new h,T=t.tokenize=function(e,n){var i,r,s,a,o,l,u,c=W[e+" "];if(c)return n?0:c.slice(0);for(o=e,l=[],u=E.preFilter;o;){(!i||(r=ue.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),i=!1,(r=ce.exec(o))&&(i=r.shift(),s.push({value:i,type:r[0].replace(le," ")}),o=o.slice(i.length));for(a in E.filter)!(r=fe[a].exec(o))||u[a]&&!(r=u[a](r))||(i=r.shift(),s.push({value:i,type:a,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?t.error(e):W(e,l).slice(0)},C=t.compile=function(e,t){var n,i=[],r=[],s=U[e+" "];if(!s){for(t||(t=T(e)),n=t.length;n--;)s=y(t[n]),s[z]?i.push(s):r.push(s);s=U(e,b(r,i)),s.selector=e}return s},A=t.select=function(e,t,n,i){var r,s,a,o,l,u="function"==typeof e&&e,h=!i&&T(e=u.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&w.getById&&9===t.nodeType&&j&&E.relative[s[1].type]){if(t=(E.find.ID(a.matches[0].replace(we,Ee),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=fe.needsContext.test(e)?0:s.length;r--&&(a=s[r],!E.relative[o=a.type]);)if((l=E.find[o])&&(i=l(a.matches[0].replace(we,Ee),be.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&d(s),!e)return Z.apply(n,i),n;break}}return(u||C(e,h))(i,t,!j,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=z.split("").sort(V).join("")===z,w.detectDuplicates=!!P,M(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(ne,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=re,Z.expr=re.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=re.uniqueSort,Z.text=re.getText,Z.isXMLDoc=re.isXML,Z.contains=re.contains;var se=Z.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){
for(t=0;n>t;t++)if(Z.contains(r[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,r[t],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&se.test(e)?Z(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ae.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=J.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ce.prototype=Z.fn,le=Z(J);var he=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,s=[],a=se.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?Z.unique(s):s)},index:function(e){return e?"string"==typeof e?V.call(Z(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(de[e]||Z.unique(r),he.test(e)&&r.reverse()),this.pushStack(r)}});var pe=/\S+/g,fe={};Z.Callbacks=function(e){e="string"==typeof e?fe[e]||s(e):Z.extend({},e);var t,n,i,r,a,o,l=[],u=!e.once&&[],c=function(s){for(t=e.memory&&s,n=!0,o=r||0,r=0,a=l.length,i=!0;l&&a>o;o++)if(l[o].apply(s[0],s[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function s(t){Z.each(t,function(t,n){var i=Z.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&s(n)})}(arguments),i?a=l.length:t&&(r=n,c(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,l,n))>-1;)l.splice(n,1),i&&(a>=n&&a--,o>=n&&o--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,s){var a=Z.isFunction(e[t])&&e[t];r[s[1]](function(){var e=a&&a.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,s){var a=s[2],o=s[3];i[s[1]]=a.add,o&&a.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,s=q.call(arguments),a=s.length,o=1!==a||e&&Z.isFunction(e.promise)?a:0,l=1===o?e:Z.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?q.call(arguments):r,i===t?l.notifyWith(n,i):--o||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)s[r]&&Z.isFunction(s[r].promise)?s[r].promise().done(u(r,i,s)).fail(l.reject).progress(u(r,n,t)):--o;return o||l.resolveWith(i,s),l.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,i,r,s,a){var o=0,l=e.length,u=null==n;if("object"===Z.type(n)){r=!0;for(o in n)Z.access(e,t,o,n[o],!0,s,a)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(Z(e),n)})),t))for(;l>o;o++)t(e[o],n,a?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):s};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},o.uid=1,o.accepts=Z.acceptData,o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=o.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=n;else if(Z.isEmptyObject(s))Z.extend(this.cache[r],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,s=this.key(e),a=this.cache[s];if(void 0===t)this.cache[s]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in a?i=[t,r]:(i=r,i=i in a?[i]:i.match(pe)||[])),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new o,ye=new o,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xe=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(r=ye.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(s,i,r[i])));ve.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,i=Z.camelCase(e);if(s&&void 0===t){if(n=ye.get(s,e),void 0!==n)return n;if(n=ye.get(s,i),void 0!==n)return n;if(n=l(s,i,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,i);ye.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),n&&(!i||Z.isArray(n)?i=ve.access(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),s=Z._queueHooks(e,t),a=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Z.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ve.get(s[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Se=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),K.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";K.focusinBubbles="onfocusin"in e;var Ce=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,_e=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,i,r){var s,a,o,l,u,c,h,d,p,f,g,m=ve.get(e);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=Z.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return typeof Z!==Te&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],u=t.length;u--;)o=_e.exec(t[u])||[],p=g=o[1],f=(o[2]||"").split(".").sort(),p&&(h=Z.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=Z.event.special[p]||{},c=Z.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,i,f,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),Z.event.global[p]=!0)},remove:function(e,t,n,i,r){var s,a,o,l,u,c,h,d,p,f,g,m=ve.hasData(e)&&ve.get(e);if(m&&(l=m.events)){for(t=(t||"").match(pe)||[""],u=t.length;u--;)if(o=_e.exec(t[u])||[],p=g=o[1],f=(o[2]||"").split(".").sort(),p){for(h=Z.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=l[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)c=d[s],!r&&g!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));a&&!d.length&&(h.teardown&&h.teardown.call(e,f,m.handle)!==!1||Z.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)Z.event.remove(e,p+t[u],n,i,!0);Z.isEmptyObject(l)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,i,r){var s,a,o,l,u,c,h,d=[i||J],p=G.call(t,"type")?t.type:t,f=G.call(t,"namespace")?t.namespace.split("."):[];if(a=o=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Ne.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[Z.expando]?t:new Z.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Z.makeArray(n,[t]),h=Z.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Z.isWindow(i)){for(l=h.delegateType||p,Ne.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),o=a;o===(i.ownerDocument||J)&&d.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=d[s++])&&!t.isPropagationStopped();)t.type=s>1?l:h.bindType||p,c=(ve.get(a,"events")||{})[t.type]&&ve.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&Z.acceptData(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Z.acceptData(i)||u&&Z.isFunction(i[p])&&!Z.isWindow(i)&&(o=i[u],o&&(i[u]=null),Z.event.triggered=p,i[p](),Z.event.triggered=void 0,o&&(i[u]=o)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,i,r,s,a=[],o=q.call(arguments),l=(ve.get(this,"events")||{})[e.type]||[],u=Z.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=Z.event.handlers.call(this,e,l),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((Z.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,s,a=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;o>n;n++)s=t[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),i[r]&&i.push(s);i.length&&a.push({elem:l,handlers:i})}return o<t.length&&a.push({elem:this,handlers:t.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,i,r=e.type,s=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ae.test(r)?this.mouseHooks:Ce.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new Z.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),K.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ve.access(i,t);r||i.addEventListener(e,n,!0),ve.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ve.access(i,t)-1;r?ve.access(i,t,r):(i.removeEventListener(e,n,!0),ve.remove(i,t))}}}),Z.fn.extend({on:function(e,t,n,i,r){var s,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=c;else if(!i)return this;return 1===r&&(s=i,i=function(e){return Z().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Me=/<([\w:]+)/,Le=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^$|\/(?:java|ecma)script/i,Re=/^true\/(.*)/,$e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,Z.extend({clone:function(e,t,n){var i,r,s,a,o=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(K.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(a=v(o),s=v(e),i=0,r=s.length;r>i;i++)y(s[i],a[i]);if(t)if(n)for(s=s||v(e),a=a||v(o),i=0,r=s.length;r>i;i++)m(s[i],a[i]);else m(e,o);return a=v(o,"script"),a.length>0&&g(a,!l&&v(e,"script")),o},buildFragment:function(e,t,n,i){for(var r,s,a,o,l,u,c=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if(r=e[d],r||0===r)if("object"===Z.type(r))Z.merge(h,r.nodeType?[r]:r);else if(Le.test(r)){for(s=s||c.appendChild(t.createElement("div")),a=(Me.exec(r)||["",""])[1].toLowerCase(),o=Ie[a]||Ie._default,s.innerHTML=o[1]+r.replace(Pe,"<$1></$2>")+o[2],u=o[0];u--;)s=s.lastChild;Z.merge(h,s.childNodes),s=c.firstChild,s.textContent=""}else h.push(t.createTextNode(r));for(c.textContent="",d=0;r=h[d++];)if((!i||-1===Z.inArray(r,i))&&(l=Z.contains(r.ownerDocument,r),s=v(c.appendChild(r),"script"),l&&g(s),n))for(u=0;r=s[u++];)De.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,s=Z.event.special,a=0;void 0!==(n=e[a]);a++){if(Z.acceptData(n)&&(r=n[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(i in t.events)s[i]?Z.event.remove(n,i):Z.removeEvent(n,i,t.handle);ve.cache[r]&&delete ve.cache[r]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Z.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Ie[(Me.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var n,i,r,s,a,o,l=0,u=this.length,c=this,h=u-1,d=e[0],g=Z.isFunction(d);if(g||u>1&&"string"==typeof d&&!K.checkClone&&je.test(d))return this.each(function(n){var i=c.eq(n);g&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(u&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(v(n,"script"),p),s=r.length;u>l;l++)a=n,l!==h&&(a=Z.clone(a,!0,!0),s&&Z.merge(r,v(a,"script"))),t.call(this[l],a,l);if(s)for(o=r[r.length-1].ownerDocument,Z.map(r,f),l=0;s>l;l++)a=r[l],De.test(a.type||"")&&!ve.access(a,"globalEval")&&Z.contains(o,a)&&(a.src?Z._evalUrl&&Z._evalUrl(a.src):Z.globalEval(a.textContent.replace($e,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,i=[],r=Z(e),s=r.length-1,a=0;s>=a;a++)n=a===s?this:this.clone(!0),Z(r[a])[t](n),U.apply(i,n.get());return this.pushStack(i)}});var ze,Fe={},He=/^margin/,Be=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),qe=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",r.appendChild(s);var t=e.getComputedStyle(a,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(s)}var n,i,r=J.documentElement,s=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(a),e.getComputedStyle&&Z.extend(K,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",r.appendChild(s),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(s),t}}))}(),Z.swap=function(e,t,n,i){var r,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=a[s];return r};var We=/^(none|table(?!-c[ea]).+)/,Ue=new RegExp("^("+we+")(.*)$","i"),Ve=new RegExp("^([+-])=("+we+")","i"),Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=Z.camelCase(t),l=e.style;return t=Z.cssProps[o]||(Z.cssProps[o]=k(l,o)),a=Z.cssHooks[t]||Z.cssHooks[o],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:l[t]:(s=typeof n,"string"===s&&(r=Ve.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),s="number"),void(null!=n&&n===n&&("number"!==s||Z.cssNumber[o]||(n+="px"),K.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,s,a,o=Z.camelCase(t);return t=Z.cssProps[o]||(Z.cssProps[o]=k(e.style,o)),a=Z.cssHooks[t]||Z.cssHooks[o],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=w(e,t,i)),"normal"===r&&t in Ye&&(r=Ye[t]),""===n||n?(s=parseFloat(r),n===!0||Z.isNumeric(s)?s||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?We.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Xe,function(){return C(e,t,i)}):C(e,t,i):void 0},set:function(e,n,i){var r=i&&qe(e);return S(e,n,i?T(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=E(K.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ee[i]+t]=s[i]||s[i-2]||s[0];return r}},He.test(e)||(Z.cssHooks[e+t].set=S)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var i,r,s={},a=0;if(Z.isArray(t)){for(i=qe(e),r=t.length;r>a;a++)s[t[a]]=Z.css(e,t[a],!1,i);return s}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(Z.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=N.prototype.init,Z.fx.step={};var Ke,Je,Qe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[L],nt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Ze.exec(t),s=r&&r[3]||(Z.cssNumber[e]?"":"px"),a=(Z.cssNumber[e]||"px"!==s&&+i)&&Ze.exec(Z.css(n.elem,e)),o=1,l=20;if(a&&a[3]!==s){s=s||a[3],r=r||[],a=+i||1;do o=o||".5",a/=o,Z.style(n.elem,e,a+s);while(o!==(o=n.cur()/i)&&1!==o&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=s,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(j,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),s=Z.speed(t,n,i),a=function(){var t=j(this,Z.extend({},e),s);(r||ve.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=Z.timers,a=ve.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&et.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=Z.timers,a=i?i.length:0;for(n.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);
delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,i,r)}}),Z.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Ke=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Ke=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",K.checkOn=""!==e.value,K.optSelected=n.selected,t.disabled=!0,K.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",K.radioValue="t"===e.value}();var it,rt,st=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Te?Z.prop(e,t,n):(1===s&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?rt:it)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,s=t&&t.match(pe);if(s&&1===e.nodeType)for(;n=s[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!K.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),rt={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=st[t]||Z.find.attr;st[t]=function(e,t,i){var r,s;return i||(s=st[t],st[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,st[t]=s),r}});var at=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!Z.isXMLDoc(e),s&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),K.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ot=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,i,r,s,a,o="string"==typeof e&&e,l=0,u=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(pe)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=Z.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,s,a,o=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(o)for(t=(e||"").match(pe)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?Z.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Z(this),s=e.match(pe)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Te||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ot," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;Z.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=Z.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,a=s?null:[],o=s?r+1:i.length,l=0>r?o:s?r:0;o>l;l++)if(n=i[l],!(!n.selected&&l!==r||(K.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=Z.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=Z.inArray(i.value,s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},K.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ut=Z.now(),ct=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var ht,dt,pt=/#.*$/,ft=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vt=/^(?:GET|HEAD)$/,yt=/^\/\//,bt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xt={},wt={},Et="*/".concat("*");try{dt=location.href}catch(kt){dt=J.createElement("a"),dt.href="",dt=dt.href}ht=bt.exec(dt.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt,type:"GET",isLocal:mt.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$($(e,Z.ajaxSettings),t):$(Z.ajaxSettings,e)},ajaxPrefilter:D(xt),ajaxTransport:D(wt),ajax:function(e,t){function n(e,t,n,a){var l,c,v,y,x,E=t;2!==b&&(b=2,o&&clearTimeout(o),i=void 0,s=a||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=I(h,w,n)),y=z(h,y,w,l),l?(h.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(Z.lastModified[r]=x),x=w.getResponseHeader("etag"),x&&(Z.etag[r]=x)),204===e||"HEAD"===h.type?E="nocontent":304===e?E="notmodified":(E=y.state,c=y.data,v=y.error,l=!v)):(v=E,(e||!E)&&(E="error",0>e&&(e=0))),w.status=e,w.statusText=(t||E)+"",l?f.resolveWith(d,[c,E,w]):f.rejectWith(d,[w,E,v]),w.statusCode(m),m=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,h,l?c:v]),g.fireWith(d,[w,E]),u&&(p.trigger("ajaxComplete",[w,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,s,a,o,l,u,c,h=Z.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),g=Z.Callbacks("once memory"),m=h.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=gt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return i&&i.abort(t),n(0,t),this}};if(f.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||dt)+"").replace(pt,"").replace(yt,ht[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(pe)||[""],null==h.crossDomain&&(l=bt.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===ht[1]&&l[2]===ht[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),R(xt,h,t,w),2===b)return w;u=h.global,u&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!vt.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ct.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=ft.test(r)?r.replace(ft,"$1_="+ut++):r+(ct.test(r)?"&":"?")+"_="+ut++)),h.ifModified&&(Z.lastModified[r]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&w.setRequestHeader("If-None-Match",Z.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Et+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)w.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===b))return w.abort();x="abort";for(c in{success:1,error:1,complete:1})w[c](h[c]);if(i=R(wt,h,t,w)){w.readyState=1,u&&p.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,i.send(v,n)}catch(E){if(!(2>b))throw E;n(-1,E)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var St=/%20/g,Tt=/\[\]$/,Ct=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,i=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(n in e)F(n,e[n],t,r);return i.join("&").replace(St,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var _t=0,Pt={},Mt={0:200,1223:204},Lt=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in Pt)Pt[e]()}),K.cors=!!Lt&&"withCredentials"in Lt,K.ajax=Lt=!!Lt,Z.ajaxTransport(function(e){var t;return K.cors||Lt&&!e.crossDomain?{send:function(n,i){var r,s=e.xhr(),a=++_t;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)s.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Pt[a],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(Mt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Pt[a]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ot=[],jt=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||Z.expando+"_"+ut++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,i){var r,s,a,o=t.jsonp!==!1&&(jt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&jt.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(jt,"$1"+r):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||Z.error(r+" was not called"),a[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=s,t[r]&&(t.jsonpCallback=n.jsonpCallback,Ot.push(r)),a&&Z.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var i=ae.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var Dt=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Dt)return Dt.apply(this,arguments);var i,r,s,a=this,o=e.indexOf(" ");return o>=0&&(i=Z.trim(e.slice(o)),e=e.slice(0,o)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,s||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Rt=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var i,r,s,a,o,l,u,c=Z.css(e,"position"),h=Z(e),d={};"static"===c&&(e.style.position="relative"),o=h.offset(),s=Z.css(e,"top"),l=Z.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(d.top=t.top-o.top+a),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):h.css(d)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==Te&&(r=i.getBoundingClientRect()),n=H(s),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(n,"marginTop",!0),left:t.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Rt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Rt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Z.fn[t]=function(r){return me(this,function(t,r,s){var a=H(t);return void 0===s?a?a[n]:t[r]:void(a?a.scrollTo(i?e.pageXOffset:s,i?s:e.pageYOffset):t[r]=s)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=E(K.pixelPosition,function(e,n){return n?(n=w(e,t),Be.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Z.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return me(this,function(t,n,i){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Z.css(t,n,a):Z.style(t,n,i,a)},t,s?i:void 0,s,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var $t=e.jQuery,It=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=It),t&&e.jQuery===Z&&(e.jQuery=$t),Z},typeof t===Te&&(e.jQuery=e.$=Z),Z});var Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return o[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof a?e.toString():e||0===e?(e=""+e,u.test(e)?e.replace(l,t):e):""}function r(e){return!e&&0!==e||!(!d(e)||0!==e.length)}var s={},a=e,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;s.extend=n;var c=Object.prototype.toString;s.toString=c;var h=function(e){return"function"==typeof e};h(/x/)&&(h=function(e){return"function"==typeof e&&"[object Function]"===c.call(e)});var h;s.isFunction=h;var d=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===c.call(e)};return s.isArray=d,s.escapeExpression=i,s.isEmpty=r,s}(e),n=function(){"use strict";function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2!==arguments.length)throw new o("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},r=n.fn;return d(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?i(this):h(t)?t.length>0?e.helpers.each(t,n):i(this):r(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,r=t.inverse,s=0,a="";if(d(e)&&(e=e.call(this)),t.data&&(n=m(t.data)),e&&"object"==typeof e)if(h(e))for(var o=e.length;o>s;s++)n&&(n.index=s,n.first=0===s,n.last=s===e.length-1),a+=i(e[s],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=s,n.first=0===s),a+=i(e[l],{data:n}),s++);return 0===s&&(a=r(this)),a}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return d(e)&&(e=e.call(this)),a.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function r(e,t){g.log(e,t)}var s={},a=e,o=t,l="1.3.0";s.VERSION=l;var u=4;s.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var h=a.isArray,d=a.isFunction,p=a.toString,f="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:r,registerHelper:function(e,t,n){if(p.call(e)===f){if(n||t)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){p.call(e)===f?a.extend(this.partials,e):this.partials[e]=t}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(g.level<=e){var n=g.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};s.logger=g,s.log=r;var m=function(e){var t={};return a.extend(t,e),t};return s.createFrame=m,s}(t,n),r=function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var i=p[n],r=p[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new h("No environment passed to template");var n=function(e,n,i,r,s,a){var o=t.VM.invokePartial.apply(this,arguments);if(null!=o)return o;if(t.compile){var l={helpers:r,partials:s,data:a};return s[n]=t.compile(e,{data:void 0!==a},t),s[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=a(e,t,n):i||(i=this.programs[e]=a(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var s,a,o=r.partial?r:t;r.partial||(s=r.helpers,a=r.partials);var l=e.call(i,o,n,s,a,r.data);return r.partial||t.VM.checkRevision(i.compilerInfo),l}}function s(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r}function a(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function o(e,t,n,i,r,s){var a={partial:!0,helpers:i,partials:r,data:s};if(void 0===e)throw new h("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function l(){return""}var u={},c=e,h=t,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.checkRevision=i,u.template=r,u.programWithDepth=s,u.program=a,u.invokePartial=o,u.noop=l,u}(t,n,i),s=function(e,t,n,i,r){"use strict";var s,a=e,o=t,l=n,u=i,c=r,h=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=o,e.Exception=l,e.Utils=u,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=h();return d.create=h,s=d}(i,e,n,t,r),a=function(e){"use strict";function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,r={ProgramNode:function(e,n,i,s){var a,o;3===arguments.length?(s=i,i=null):2===arguments.length&&(s=n,n=null),t.call(this,s),this.type="program",this.statements=e,this.strip={},i?(o=i[0],o?(a={first_line:o.firstLine,last_line:o.lastLine,last_column:o.lastColumn,first_column:o.firstColumn},this.inverse=new r.ProgramNode(i,n,a)):this.inverse=new r.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(e,n,i,s,a){if(t.call(this,a),this.type="mustache",this.strip=s,null!=i&&i.charAt){var o=i.charAt(3)||i.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!i;this.sexpr=e instanceof r.SexprNode?e:new r.SexprNode(e,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=e[0],s=this.params=e.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(s.length||n)},PartialNode:function(e,n,i,r){t.call(this,r),this.type="partial",this.partialName=e,this.context=n,this.strip=i},BlockNode:function(e,n,r,s,a){if(t.call(this,a),e.sexpr.id.original!==s.path.original)throw new i(e.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=e,this.program=n,this.inverse=r,this.strip={left:e.strip.left,right:s.strip.right},(n||r).strip.left=e.strip.right,(r||n).strip.right=s.strip.left,r&&!n&&(this.isInverse=!0)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var r="",s=[],a=0,o=0,l=e.length;l>o;o++){var u=e[o].part;if(r+=(e[o].separator||"")+u,".."===u||"."===u||"this"===u){if(s.length>0)throw new i("Invalid path: "+r,this);".."===u?a++:this.isScoped=!0}else s.push(u)}this.original=r,this.parts=s,this.string=s.join("."),this.depth=a,this.isSimple=1===e.length&&!this.isScoped&&0===a,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,n){t.call(this,n),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e}};return n=r}(n),o=function(){"use strict";var e,t=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,i,r,s,a){var o=a.length-1;switch(s){case 1:return new r.ProgramNode(a[o-1],this._$);case 2:return new r.ProgramNode([],this._$);case 3:this.$=new r.ProgramNode([],a[o-1],a[o],this._$);break;case 4:this.$=new r.ProgramNode(a[o-2],a[o-1],a[o],this._$);break;case 5:this.$=new r.ProgramNode(a[o-1],a[o],[],this._$);break;case 6:this.$=new r.ProgramNode(a[o],this._$);break;case 7:this.$=new r.ProgramNode([],this._$);break;case 8:this.$=new r.ProgramNode([],this._$);break;case 9:this.$=[a[o]];break;case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 11:this.$=new r.BlockNode(a[o-2],a[o-1].inverse,a[o-1],a[o],this._$);break;case 12:this.$=new r.BlockNode(a[o-2],a[o-1],a[o-1].inverse,a[o],this._$);break;case 13:this.$=a[o];break;case 14:this.$=a[o];break;case 15:this.$=new r.ContentNode(a[o],this._$);break;case 16:this.$=new r.CommentNode(a[o],this._$);break;case 17:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 18:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 19:this.$={path:a[o-1],strip:e(a[o-2],a[o])};break;case 20:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 21:this.$=new r.MustacheNode(a[o-1],null,a[o-2],e(a[o-2],a[o]),this._$);break;case 22:this.$=new r.PartialNode(a[o-2],a[o-1],e(a[o-3],a[o]),this._$);break;case 23:this.$=e(a[o-1],a[o]);break;case 24:this.$=new r.SexprNode([a[o-2]].concat(a[o-1]),a[o],this._$);break;case 25:this.$=new r.SexprNode([a[o]],null,this._$);break;case 26:this.$=a[o];break;case 27:this.$=new r.StringNode(a[o],this._$);break;case 28:this.$=new r.IntegerNode(a[o],this._$);break;case 29:this.$=new r.BooleanNode(a[o],this._$);break;case 30:this.$=a[o];break;case 31:a[o-1].isHelper=!0,this.$=a[o-1];break;case 32:this.$=new r.HashNode(a[o],this._$);break;case 33:this.$=[a[o-2],a[o]];break;case 34:this.$=new r.PartialNameNode(a[o],this._$);break;case 35:this.$=new r.PartialNameNode(new r.StringNode(a[o],this._$),this._$);
break;case 36:this.$=new r.PartialNameNode(new r.IntegerNode(a[o],this._$));break;case 37:this.$=new r.DataNode(a[o],this._$);break;case 38:this.$=new r.IdNode(a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 47:this.$=[a[o]];break;case 48:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],a=this.table,o="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,x,w,E={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=t()),m=a[g]&&a[g][p]),"undefined"==typeof m||!m.length||!m[0]){var k="";if(!c){w=[];for(y in a[g])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[m[1]][1],E.$=r[r.length-b],E._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},d&&(E._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(E,o,u,l,this.yy,m[1],r,s),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),s=s.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),r.push(E.$),s.push(E._$),x=a[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),a=0;a<s.length&&(n=this._input.match(this.rules[s[a]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=a,this.options.flex));a++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return r(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return r(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=r(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=r(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=r(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();return e=t}(),l=function(e,t){"use strict";function n(e){return e.constructor===s.ProgramNode?e:(r.yy=s,r.parse(e))}var i={},r=e,s=t;return i.parser=r,i.parse=n,i}(o,a),u=function(e){"use strict";function t(){}function n(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=n.parse(e),r=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(r,t)}function i(e,t,n){function i(){var i=n.parse(e),r=(new n.Compiler).compile(i,t),s=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(s)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new s("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r;return function(e,t){return r||(r=i()),r.call(this,e,t)}}var r={},s=e;return r.Compiler=t,t.prototype={compiler:t,disassemble:function(){for(var e,t,n,i=this.opcodes,r=[],s=0,a=i.length;a>s;s++)if(e=i[s],"DECLARE"===e.opcode)r.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;o<e.args.length;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);r.push(e.opcode+" "+t.join(" "))}return r.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var s=0;s<i.args.length;s++)if(i.args[s]!==r.args[s])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,s=n.depths.list.length;s>r;r++)t=n.depths.list[r],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=t.sexpr,s=this.classifySexpr(r);"helper"===s?this.helperSexpr(r,n,i):"simple"===s?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var r=0,s=i.length;s>r;r++)t=i[r],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var i=e.id,r=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),r=e.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new s("You specified knownHelpersOnly, but used the unknown helper "+r,e);this.opcode("invokeHelper",i.length,r,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new s("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var r=e.id.parts[0];i.knownHelpers[r]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},r.precompile=n,r.compile=i,r}(n),c=function(e,t){"use strict";function n(e){this.value=e}function i(){}var r,s=e.COMPILER_REVISION,a=e.REVISION_CHANGES,o=e.log,l=t;i.prototype={nameLookup:function(e,t){var n,r;return 0===e.indexOf("depth")&&(n=!0),r=/^[0-9]+$/.test(t)?e+"["+t+"]":i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+r+")":r},compilerInfo:function(){var e=s,t=a[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},o("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var r,s=e.opcodes;this.i=0;for(var a=s.length;this.i<a;this.i++)r=s[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,s=this.environment.depths.list.length;s>r;r++)i.push("depth"+this.environment.depths.list[r]);var a=this.mergeSource();if(this.isChild||(a=this.compilerInfo()+a),e)return i.push(a),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+a+"}";return o("debug",l+"\n\n"),l},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?e=e?e+"\n    + "+r.content:r.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=r+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),r=this.nameLookup("depth"+this.lastContext,t,"context"),s="helper = "+i.name+" || "+r;i.paramsInit&&(s+=","+i.paramsInit),this.push("("+s+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),r=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+s+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+r+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var r=this.hash;t&&r.contexts.push("'"+e+"': "+t),n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+i+")")},compiler:i,compileChildren:function(e,t){for(var n,i,r=e.children,s=0,a=r.length;a>s;s++){n=r[s],i=new this.compiler;var o=this.matchExistingProgram(n);null==o?(this.context.programs.push(""),o=this.context.programs.length,n.index=o,n.name="program"+o,this.context.programs[o]=i.compile(n,t,this.context),this.context.environments[o]=n):(n.index=o,n.name="program"+o)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,r=[n.index,n.name,"data"],s=0,a=i.length;a>s;s++)t=i[s],1===t?r.push("depth0"):r.push("depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,r,s="",a=this.isInline();if(a){var o=this.popStack(!0);if(o instanceof n)t=o.value,r=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();s="("+this.push(l)+" = "+o+"),",t=this.topStack()}}else t=this.topStack();var u=e.call(this,t);return a?(r||this.popStack(),i&&this.stackSlot--,this.push("("+s+u+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+s+u+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var r=e[t];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,i=t[t.length-1];return!e&&i instanceof n?i.value:i},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],r=this.setupParams(e,i,n),s=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:r,name:s,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n,i,r,s=[],a=[],o=[];s.push("hash:"+this.popStack()),this.options.stringParams&&(s.push("hashTypes:"+this.popStack()),s.push("hashContexts:"+this.popStack())),i=this.popStack(),r=this.popStack(),(r||i)&&(r||(this.context.aliases.self="this",r="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),s.push("inverse:"+i),s.push("fn:"+r));for(var l=0;e>l;l++)n=this.popStack(),t.push(n),this.options.stringParams&&(o.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+o.join(",")+"]")),this.options.data&&s.push("data:data"),s},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},h=0,d=u.length;d>h;h++)c[u[h]]=!0;return i.isValidJavaScriptVariableName=function(e){return!(i.RESERVED_WORDS[e]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))},r=i}(i,n),h=function(e,t,n,i,r){"use strict";var s,a=e,o=t,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=r,f=a.create,g=function(){var e=f();return e.compile=function(t,n){return h(t,n,e)},e.precompile=function(t,n){return d(t,n,e)},e.AST=o,e.Compiler=c,e.JavaScriptCompiler=p,e.Parser=l,e.parse=u,e};return a=g(),a.create=g,s=a}(s,a,l,u,c);return h}();if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed.bs.alert").remove()}var i=e(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=e(r);t&&t.preventDefault(),s.length||(s=i.hasClass("alert")?i:i.parent()),s.trigger(t=e.Event("close.bs.alert")),
t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one(e.support.transition.end,n).emulateTransitionEnd(150):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",s=i.data();t+="Text",s.resetText||i.data("resetText",i[r]()),i[r](s[t]||this.options[t]),setTimeout(e.proxy(function(){"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),r=i.data("bs.button"),s="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)})},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),t.preventDefault()})}(jQuery),+function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},t.prototype.to=function(t){var n=this,i=this.getActiveIndex();return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){return this.sliding?void 0:this.slide("next")},t.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},t.prototype.slide=function(t,n){var i=this.$element.find(".item.active"),r=n||i[t](),s=this.interval,a="next"==t?"left":"right",o="next"==t?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[o]()}if(r.hasClass("active"))return this.sliding=!1;var u=e.Event("slide.bs.carousel",{relatedTarget:r[0],direction:a});return this.$element.trigger(u),u.isDefaultPrevented()?void 0:(this.sliding=!0,s&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var t=e(l.$indicators.children()[l.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,i.addClass(a),r.addClass(a),i.one(e.support.transition.end,function(){r.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),s&&this.cycle(),this)};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),a="string"==typeof n?n:s.slide;r||i.data("bs.carousel",r=new t(this,s)),"number"==typeof n?r.to(n):a?r[a]():s.interval&&r.pause().cycle()})},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i=e(this),r=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},r.data(),i.data()),a=i.attr("data-slide-to");a&&(s.interval=!1),r.carousel(s),(a=i.attr("data-slide-to"))&&r.data("bs.carousel").to(a),t.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);t.carousel(t.data())})})}(jQuery),+function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var a=e.camelCase(["scroll",r].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[r](this.$element[0][a])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),s=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&s.toggle&&"show"==n&&(n=!n),r||i.data("bs.collapse",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(r),a=s.data("bs.collapse"),o=a?"toggle":i.data(),l=i.attr("data-parent"),u=l&&e(l);a&&a.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),s.collapse(o)})}(jQuery),+function(e){"use strict";function t(t){e(i).remove(),e(r).each(function(){var i=n(e(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",r)),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))})}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var s=n(r),a=s.hasClass("open");if(t(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var o={relatedTarget:this};if(s.trigger(i=e.Event("show.bs.dropdown",o)),i.isDefaultPrevented())return;s.toggleClass("open").trigger("shown.bs.dropdown",o),r.focus()}return!1}},s.prototype.keydown=function(t){if(/(38|40|27)/.test(t.keyCode)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var s=n(i),a=s.hasClass("open");if(!a||a&&27==t.keyCode)return 27==t.which&&s.find(r).focus(),i.click();var o=" li:not(.divider):visible a",l=s.find("[role=menu]"+o+", [role=listbox]"+o);if(l.length){var u=l.index(l.filter(":focus"));38==t.keyCode&&u>0&&u--,40==t.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).focus()}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",s.prototype.keydown)}(jQuery),+function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},t.prototype.show=function(t){var n=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var i=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});i?n.$element.find(".modal-dialog").one(e.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},t.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};var n=e.fn.modal;e.fn.modal=function(n,i){return this.each(function(){var r=e(this),s=r.data("bs.modal"),a=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);s||r.data("bs.modal",s=new t(this,a)),"string"==typeof n?s[n](i):a.show&&s.show(i)})},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());n.is("a")&&t.preventDefault(),r.modal(s,this).one("hide",function(){n.is(":visible")&&n.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),s=r.length;s--;){var a=r[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var o="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(t),t.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,a=s.test(r);a&&(r=r.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var o=this.getPosition(),l=i[0].offsetWidth,u=i[0].offsetHeight;if(a){var c=this.$element.parent(),h=r,d=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),g="body"==this.options.container?0:c.offset().left;r="bottom"==r&&o.top+o.height+u-d>f?"top":"top"==r&&o.top-d-u<0?"bottom":"right"==r&&o.right+l>p?"left":"left"==r&&o.left-l<g?"right":r,i.removeClass(h).addClass(r)}var m=this.getCalculatedOffset(r,o,l,u);this.applyPlacement(m,r),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,v).emulateTransitionEnd(150):v()}},t.prototype.applyPlacement=function(t,n){var i,r=this.tip(),s=r[0].offsetWidth,a=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(l)&&(l=0),t.top=t.top+o,t.left=t.left+l,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,c=r[0].offsetHeight;if("top"==n&&c!=a&&(i=!0,t.top=t.top+a-c),/bottom|top/.test(n)){var h=0;t.left<0&&(h=-2*t.left,t.left=0,r.offset(t),u=r[0].offsetWidth,c=r[0].offsetHeight),this.replaceArrow(h-s+u,u,"left")}else this.replaceArrow(c-a,c,"top");i&&r.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),r=e.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.hoverState=null,this)},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),s="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.tooltip",r=new t(this,s)),"string"==typeof n&&r[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),r=i.data("bs.popover"),s="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.popover",r=new t(this,s)),"string"==typeof n&&r[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(n,i){var r,s=e.proxy(this.process,this);this.$element=e(e(n).is("body")?window:n),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",s),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||(r=e(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}t.DEFAULTS={offset:10},t.prototype.refresh=function(){var t=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var n=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),s=/^#./.test(r)&&e(r);return s&&s.length&&s.is(":visible")&&[[s[t]().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,s=this.targets,a=this.activeTarget;if(t>=i)return a!=(e=s.last()[0])&&this.activate(e);if(a&&t<=r[0])return a!=(e=s[0])&&this.activate(e);for(e=r.length;e--;)a!=s[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),s="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(jQuery),+function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],s=e.Event("show.bs.tab",{relatedTarget:r});if(t.trigger(s),!s.isDefaultPrevented()){var a=e(i);this.activate(t.parent("li"),n),this.activate(a,a.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},t.prototype.activate=function(t,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),a=i&&e.support.transition&&s.hasClass("fade");a?s.one(e.support.transition.end,r).emulateTransitionEnd(150):r(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=e(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,a=s.top,o=s.bottom;"top"==this.affixed&&(r.top+=i),"object"!=typeof s&&(o=a=s),"function"==typeof a&&(a=s.top(this.$element)),"function"==typeof o&&(o=s.bottom(this.$element));var l=!(null!=this.unpin&&i+this.unpin<=r.top)&&(null!=o&&r.top+this.$element.height()>=n-o?"bottom":null!=a&&a>=i&&"top");if(this.affixed!==l){this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),c=e.Event(u+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(u).trigger(e.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-o-this.$element.height()}))}}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),r=i.data("bs.affix"),s="object"==typeof n&&n;r||i.data("bs.affix",r=new t(this,s)),"string"==typeof n&&r[n]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(jQuery),!function(){function e(e,t){if(!t||"function"==typeof t)return e;for(var n in t)e[n]=t[n];return e}function t(e,t,n){var i,r=0,s=e.length,a=void 0===s||"function"==typeof e;if(n)if(a){for(i in e)if(t.apply(e[i],n)===!1)break}else for(;s>r&&t.apply(e[r++],n)!==!1;);else if(a){for(i in e)if(t.call(e[i],i,e[i])===!1)break}else for(;s>r&&t.call(e[r],r,e[r++])!==!1;);return e}function n(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return j[e]}):e}function i(e){var t=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},n=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},i=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(192|i>>6),t+=String.fromCharCode(128|63&i)):(t+=String.fromCharCode(224|i>>12),t+=String.fromCharCode(128|63&i>>6),t+=String.fromCharCode(128|63&i))}return t},r=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=i(e);var n,r,s,a,o,l,u,c="",h=0;do n=e.charCodeAt(h++),r=e.charCodeAt(h++),s=e.charCodeAt(h++),a=n>>2,o=(3&n)<<4|r>>4,l=(15&r)<<2|s>>6,u=63&s,isNaN(r)?l=u=64:isNaN(s)&&(u=64),c+=t.charAt(a)+t.charAt(o)+t.charAt(l)+t.charAt(u),n=r=s="",a=o=l=u="";while(h<e.length);return c},s=function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},a=function(e,i,r,o){"function"==typeof r&&(o=r,r={}),r.cache=r.cache||!1,r.data=r.data||{},r.headers=r.headers||{},r.jsonp=r.jsonp||!1,r.async=void 0===r.async||r.async;var l,u=s({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},a.headers,r.headers);if(l="application/json"===u["content-type"]?JSON.stringify(r.data):n(r.data),"GET"===e){var c=[];if(l&&(c.push(l),l=null),r.cache||c.push("_="+(new Date).getTime()),r.jsonp&&(c.push("callback="+r.jsonp),c.push("jsonp="+r.jsonp)),c=c.join("&"),c.length>1&&(i+=i.indexOf("?")>-1?"&"+c:"?"+c),r.jsonp){var h=document.getElementsByTagName("head")[0],d=document.createElement("script");return d.type="text/javascript",d.src=i,void h.appendChild(d)}}t(function(t,n){if(t)return o(t);n.open(e,i,r.async);for(var s in u)u.hasOwnProperty(s)&&n.setRequestHeader(s,u[s]);n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText||"";if(!o)return;o(n.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},n.send(l)})},o={authBasic:function(e,t){a.headers.Authorization="Basic "+r(e+":"+t)},connect:function(e,t,n){return a("CONNECT",e,t,n)},del:function(e,t,n){return a("DELETE",e,t,n)},get:function(e,t,n){return a("GET",e,t,n)},head:function(e,t,n){return a("HEAD",e,t,n)},headers:function(e){a.headers=e||{}},isAllowed:function(e,t,n){this.options(e,function(e,i){n(-1!==i.text().indexOf(t))})},options:function(e,t,n){return a("OPTIONS",e,t,n)},patch:function(e,t,n){return a("PATCH",e,t,n)},post:function(e,t,n){return a("POST",e,t,n)},put:function(e,t,n){return a("PUT",e,t,n)},trace:function(e,t,n){return a("TRACE",e,t,n)}},l=e.type?e.type.toLowerCase():"get";o[l](e.url,e,function(t,n){200===t?e.success(n.json(),t,null):e.error(n.text(),t,null)})}function r(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},$.extend(O,e),delete O.fixLng,"string"==typeof O.ns&&(O.ns={namespaces:[O.ns],defaultNs:O.ns}),"string"==typeof O.fallbackNS&&(O.fallbackNS=[O.fallbackNS]),O.interpolationPrefixEscaped=$.regexEscape(O.interpolationPrefix),O.interpolationSuffixEscaped=$.regexEscape(O.interpolationSuffix),O.lng||(O.lng=$.detectLanguage()),O.lng?O.useCookie&&$.cookie.create(O.cookieName,O.lng,O.cookieExpirationTime,O.cookieDomain):(O.lng=O.fallbackLng,O.useCookie&&$.cookie.remove(O.cookieName)),M=$.toLanguages(O.lng),T=M[0],$.log("currentLng set to: "+T);var n=b;
e.fixLng&&(n=function(e,t){return t=t||{},t.lng=t.lng||n.lng,b(e,t)},n.lng=T),z.setCurrentLng(T),A&&O.setJqueryExt&&p();var i;if(A&&A.Deferred&&(i=A.Deferred()),!O.resStore){var r=$.toLanguages(O.lng);"string"==typeof O.preload&&(O.preload=[O.preload]);for(var s=0,a=O.preload.length;a>s;s++)for(var o=$.toLanguages(O.preload[s]),l=0,u=o.length;u>l;l++)r.indexOf(o[l])<0&&r.push(o[l]);return N.sync.load(r,O,function(e,r){_=r,L=!0,t&&t(n),i&&i.resolve(n)}),i?i.promise():void 0}return _=O.resStore,L=!0,t&&t(n),i&&i.resolve(n),i?i.promise():void 0}function s(e,t){"string"==typeof e&&(e=[e]);for(var n=0,i=e.length;i>n;n++)O.preload.indexOf(e[n])<0&&O.preload.push(e[n]);return r(t)}function a(e,t,n){"string"!=typeof t?(n=t,t=O.ns.defaultNs):O.ns.namespaces.indexOf(t)<0&&O.ns.namespaces.push(t),_[e]=_[e]||{},_[e][t]=_[e][t]||{},$.extend(_[e][t],n)}function o(e,t){"string"!=typeof t&&(t=O.ns.defaultNs),_[e]=_[e]||{},_[e][t]={}}function l(e){O.ns.defaultNs=e}function u(e,t){c([e],t)}function c(e,t){var n={dynamicLoad:O.dynamicLoad,resGetPath:O.resGetPath,getAsync:O.getAsync,customLoad:O.customLoad,ns:{namespaces:e,defaultNs:""}},i=$.toLanguages(O.lng);"string"==typeof O.preload&&(O.preload=[O.preload]);for(var r=0,s=O.preload.length;s>r;r++)for(var a=$.toLanguages(O.preload[r]),o=0,l=a.length;l>o;o++)i.indexOf(a[o])<0&&i.push(a[o]);for(var u=[],c=0,h=i.length;h>c;c++){var d=!1,p=_[i[c]];if(p)for(var f=0,g=e.length;g>f;f++)p[e[f]]||(d=!0);else d=!0;d&&u.push(i[c])}u.length?N.sync._fetch(u,n,function(n,i){var r=e.length*u.length;$.each(e,function(e,n){O.ns.namespaces.indexOf(n)<0&&O.ns.namespaces.push(n),$.each(u,function(e,s){_[s]=_[s]||{},_[s][n]=i[s][n],r--,0===r&&t&&(O.useLocalStorage&&N.sync._storeLocal(_),t())})})}):t&&t()}function h(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),t.lng=e,r(t,n)}function d(){return T}function p(){function e(e,t,n){if(0!==t.length){var i="text";if(0===t.indexOf("[")){var r=t.split("]");t=r[1],i=r[0].substr(1,r[0].length-1)}t.indexOf(";")===t.length-1&&(t=t.substr(0,t.length-2));var s;"html"===i?(s=O.defaultValueFromContent?A.extend({defaultValue:e.html()},n):n,e.html(A.t(t,s))):"text"===i?(s=O.defaultValueFromContent?A.extend({defaultValue:e.text()},n):n,e.text(A.t(t,s))):"prepend"===i?(s=O.defaultValueFromContent?A.extend({defaultValue:e.html()},n):n,e.prepend(A.t(t,s))):"append"===i?(s=O.defaultValueFromContent?A.extend({defaultValue:e.html()},n):n,e.append(A.t(t,s))):(s=O.defaultValueFromContent?A.extend({defaultValue:e.attr(i)},n):n,e.attr(i,A.t(t,s)))}}function t(t,n){var i=t.attr(O.selectorAttr);if(i||"undefined"==typeof i||i===!1||(i=t.text()||t.val()),i){var r=t,s=t.data("i18n-target");if(s&&(r=t.find(s)||t),n||O.useDataAttrOptions!==!0||(n=t.data("i18n-options")),n=n||{},i.indexOf(";")>=0){var a=i.split(";");A.each(a,function(t,i){""!==i&&e(r,i,n)})}else e(r,i,n);O.useDataAttrOptions===!0&&t.data("i18n-options",n)}}A.t=A.t||b,A.fn.i18n=function(e){return this.each(function(){t(A(this),e);var n=A(this).find("["+O.selectorAttr+"]");n.each(function(){t(A(this),e)})})}}function f(e,t,n,i){if(!e)return e;if(i=i||t,e.indexOf(i.interpolationPrefix||O.interpolationPrefix)<0)return e;var r=i.interpolationPrefix?$.regexEscape(i.interpolationPrefix):O.interpolationPrefixEscaped,s=i.interpolationSuffix?$.regexEscape(i.interpolationSuffix):O.interpolationSuffixEscaped,a="HTML"+s;return $.each(t,function(t,o){var l=n?n+O.keyseparator+t:t;"object"==typeof o&&null!==o?e=f(e,o,l,i):i.escapeInterpolation||O.escapeInterpolation?(e=e.replace(new RegExp([r,l,a].join(""),"g"),o),e=e.replace(new RegExp([r,l,s].join(""),"g"),$.escape(o))):e=e.replace(new RegExp([r,l,s].join(""),"g"),o)}),e}function g(e,t){var n=",",i="{",r="}",s=$.extend({},t);for(delete s.postProcess;-1!=e.indexOf(O.reusePrefix)&&(P++,!(P>O.maxRecursion));){var a=e.lastIndexOf(O.reusePrefix),o=e.indexOf(O.reuseSuffix,a)+O.reuseSuffix.length,l=e.substring(a,o),u=l.replace(O.reusePrefix,"").replace(O.reuseSuffix,"");if(-1!=u.indexOf(n)){var c=u.indexOf(n);if(-1!=u.indexOf(i,c)&&-1!=u.indexOf(r,c)){var h=u.indexOf(i,c),d=u.indexOf(r,h)+r.length;try{s=$.extend(s,JSON.parse(u.substring(h,d))),u=u.substring(0,c)}catch(p){}}}var f=E(u,s);e=e.replace(l,f)}return e}function m(e){return e.context&&("string"==typeof e.context||"number"==typeof e.context)}function v(e){return void 0!==e.count&&"string"!=typeof e.count&&1!==e.count}function y(e,t){t=t||{};var n=x(e,t),i=k(e,t);return void 0!==i||i===n}function b(e,t){return t=t||{},L?(P=0,E.apply(null,arguments)):($.log("i18next not finished initialization. you might have called t function before loading resources finished."),t.defaultValue||"")}function x(e,t){return void 0!==t.defaultValue?t.defaultValue:e}function w(){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);return{postProcess:"sprintf",sprintf:e}}function E(e,t){if("string"==typeof t?"sprintf"===O.shortcutFunction?t=w.apply(null,arguments):"defaultValue"===O.shortcutFunction&&(t={defaultValue:t}):t=t||{},void 0===e||null===e)return"";"string"==typeof e&&(e=[e]);var n=e[0];if(e.length>1)for(var i=0;i<e.length&&(n=e[i],!y(n));i++);var r,s=x(n,t),a=k(n,t),o=t.lng?$.toLanguages(t.lng):M,l=t.ns||O.ns.defaultNs;n.indexOf(O.nsseparator)>-1&&(r=n.split(O.nsseparator),l=r[0],n=r[1]),void 0===a&&O.sendMissing&&(t.lng?I.postMissing(o[0],l,n,s,o):I.postMissing(O.lng,l,n,s,o));var u=t.postProcess||O.postProcess;void 0!==a&&u&&F[u]&&(a=F[u](a,n,t));var c=s;if(s.indexOf(O.nsseparator)>-1&&(r=s.split(O.nsseparator),c=r[1]),c===n&&O.parseMissingKey&&(s=O.parseMissingKey(s)),void 0===a&&(s=f(s,t),s=g(s,t),u&&F[u])){var h=x(n,t);a=F[u](h,n,t)}return void 0!==a?a:s}function k(e,t){t=t||{};var n,i,r=x(e,t),s=M;if(!_)return r;if(t.lng&&(s=$.toLanguages(t.lng),!_[s[0]])){var a=O.getAsync;O.getAsync=!1,N.sync.load(s,O,function(e,t){$.extend(_,t),O.getAsync=a})}var o=t.ns||O.ns.defaultNs;if(e.indexOf(O.nsseparator)>-1){var l=e.split(O.nsseparator);o=l[0],e=l[1]}if(m(t)){n=$.extend({},t),delete n.context,n.defaultValue=O.contextNotFound;var u=o+O.nsseparator+e+"_"+t.context;if(i=b(u,n),i!=O.contextNotFound)return f(i,{context:t.context})}if(v(t)){n=$.extend({},t),delete n.count,n.defaultValue=O.pluralNotFound;var c=o+O.nsseparator+e+O.pluralSuffix,h=z.get(s[0],t.count);if(h>=0?c=c+"_"+h:1===h&&(c=o+O.nsseparator+e),i=b(c,n),i!=O.pluralNotFound)return f(i,{count:t.count,interpolationPrefix:t.interpolationPrefix,interpolationSuffix:t.interpolationSuffix})}for(var d,p=e.split(O.keyseparator),y=0,w=s.length;w>y&&void 0===d;y++){for(var S=s[y],T=0,C=_[S]&&_[S][o];p[T];)C=C&&C[p[T]],T++;if(void 0!==C){var A=Object.prototype.toString.apply(C);if("string"==typeof C)C=f(C,t),C=g(C,t);else if("[object Array]"!==A||O.returnObjectTrees||t.returnObjectTrees){if(null===C&&O.fallbackOnNull===!0)C=void 0;else if(null!==C)if(O.returnObjectTrees||t.returnObjectTrees){if("[object Number]"!==A&&"[object Function]"!==A&&"[object RegExp]"!==A){var P="[object Array]"===A?[]:{};$.each(C,function(n){P[n]=E(o+O.nsseparator+e+O.keyseparator+n,t)}),C=P}}else O.objectTreeKeyHandler&&"function"==typeof O.objectTreeKeyHandler?C=O.objectTreeKeyHandler(e,C,S,o,t):(C="key '"+o+":"+e+" ("+S+")' returned an object instead of string.",$.log(C))}else C=C.join("\n"),C=f(C,t),C=g(C,t);"string"==typeof C&&""===C.trim()&&O.fallbackOnEmpty===!0&&(C=void 0),d=C}}if(void 0===d&&!t.isFallbackLookup&&(O.fallbackToDefaultNS===!0||O.fallbackNS&&O.fallbackNS.length>0))if(t.isFallbackLookup=!0,O.fallbackNS.length){for(var L=0,j=O.fallbackNS.length;j>L;L++)if(d=k(O.fallbackNS[L]+O.nsseparator+e,t)){var D=d.indexOf(O.nsseparator)>-1?d.split(O.nsseparator)[1]:d,R=r.indexOf(O.nsseparator)>-1?r.split(O.nsseparator)[1]:r;if(D!==R)break}}else d=k(e,t);return d}function S(){var e,t=[];if("undefined"!=typeof window&&(!function(){for(var e=window.location.search.substring(1),n=e.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("=");if(r>0){var s=n[i].substring(0,r),a=n[i].substring(r+1);t[s]=a}}}(),t[O.detectLngQS]&&(e=t[O.detectLngQS])),!e&&"undefined"!=typeof document&&O.useCookie){var n=$.cookie.read(O.cookieName);n&&(e=n)}return e||"undefined"==typeof navigator||(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=n;arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&i!=1/0&&i!=-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i))));for(var r=i>=0?Math.min(i,n-1):n-Math.abs(i);r>=0;r--)if(r in t&&t[r]===e)return r;return-1});var T,C=this,A=C.jQuery||C.Zepto,N={},_={},P=0,M=[],L=!1;"undefined"!=typeof module&&module.exports?module.exports=N:(A&&(A.i18n=A.i18n||N),C.i18n=C.i18n||N);var O={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,shortcutFunction:"sprintf"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},D={create:function(e,t,n,i){var r;if(n){var s=new Date;s.setTime(s.getTime()+6e4*n),r="; expires="+s.toGMTString()}else r="";i=i?"domain="+i+";":"",document.cookie=e+"="+t+r+";"+i+"path=/"},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},remove:function(e){this.create(e,"",-1)}},R={create:function(){},read:function(){return null},remove:function(){}},$={extend:A?A.extend:e,each:A?A.each:t,ajax:A?A.ajax:"undefined"!=typeof document?i:function(){},cookie:"undefined"!=typeof document?D:R,detectLanguage:S,escape:n,log:function(e){O.debug&&"undefined"!=typeof console&&console.log(e)},toLanguages:function(e){var t=[];if("string"==typeof e&&e.indexOf("-")>-1){var n=e.split("-");e=O.lowerCaseLng?n[0].toLowerCase()+"-"+n[1].toLowerCase():n[0].toLowerCase()+"-"+n[1].toUpperCase(),"unspecific"!==O.load&&t.push(e),"current"!==O.load&&t.push(n[0])}else t.push(e);return-1===t.indexOf(O.fallbackLng)&&O.fallbackLng&&t.push(O.fallbackLng),t},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};$.applyReplacement=f;var I={load:function(e,t,n){t.useLocalStorage?I._loadLocal(e,t,function(i,r){for(var s=[],a=0,o=e.length;o>a;a++)r[e[a]]||s.push(e[a]);s.length>0?I._fetch(s,t,function(e,t){$.extend(r,t),I._storeLocal(t),n(null,r)}):n(null,r)}):I._fetch(e,t,function(e,t){n(null,t)})},_loadLocal:function(e,t,n){var i={},r=(new Date).getTime();if(window.localStorage){var s=e.length;$.each(e,function(e,a){var o=window.localStorage.getItem("res_"+a);o&&(o=JSON.parse(o),o.i18nStamp&&o.i18nStamp+t.localStorageExpirationTime>r&&(i[a]=o)),s--,0===s&&n(null,i)})}},_storeLocal:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+t,JSON.stringify(e[t]))},_fetch:function(e,t,n){var i=t.ns,r={};if(t.dynamicLoad){var s=function(e,t){n(null,t)};if("function"==typeof t.customLoad)t.customLoad(e,i.namespaces,t,s);else{var a=f(t.resGetPath,{lng:e.join("+"),ns:i.namespaces.join("+")});$.ajax({url:a,success:function(e){$.log("loaded: "+a),s(null,e)},error:function(e,t,n){$.log("failed loading: "+a),s("failed loading resource.json error: "+n)},dataType:"json",async:t.getAsync})}}else{var o,l=i.namespaces.length*e.length;$.each(i.namespaces,function(i,s){$.each(e,function(e,i){var a=function(e,t){e&&(o=o||[],o.push(e)),r[i]=r[i]||{},r[i][s]=t,l--,0===l&&n(o,r)};"function"==typeof t.customLoad?t.customLoad(i,s,t,a):I._fetchOne(i,s,t,a)})})}},_fetchOne:function(e,t,n,i){var r=f(n.resGetPath,{lng:e,ns:t});$.ajax({url:r,success:function(e){$.log("loaded: "+r),i(null,e)},error:function(e,t,n){200==n.status?$.log("There is a typo in: "+r):404==n.status?$.log("Does not exist: "+r):$.log(n.status+" when loading "+r),i(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(e,t,n,i,r){var s={};s[n]=i;var a=[];if("fallback"===O.sendMissingTo&&O.fallbackLng!==!1)a.push({lng:O.fallbackLng,url:f(O.resPostPath,{lng:O.fallbackLng,ns:t})});else if("current"===O.sendMissingTo||"fallback"===O.sendMissingTo&&O.fallbackLng===!1)a.push({lng:e,url:f(O.resPostPath,{lng:e,ns:t})});else if("all"===O.sendMissingTo)for(var o=0,l=r.length;l>o;o++)a.push({lng:r[o],url:f(O.resPostPath,{lng:r[o],ns:t})});for(var u=0,c=a.length;c>u;u++){var h=a[u];$.ajax({url:h.url,type:O.sendType,data:s,success:function(){$.log("posted missing key '"+n+"' to: "+h.url);for(var e=n.split("."),r=0,s=_[h.lng][t];e[r];)s=s[e[r]]=r===e.length-1?i:s[e[r]]||{},r++},error:function(){$.log("failed posting missing key '"+n+"' to: "+h.url)},dataType:"json",async:O.postAsync})}}},z={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"Aymar",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(1!=e%10||11==e%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(e){return Number(1==e%10&&11!=e%100?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||1==e%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(1==e%100?1:2==e%100?2:3==e%100||4==e%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(e,t){z.rules[e]=t},setCurrentLng:function(e){if(!z.currentRule||z.currentRule.lng!==e){var t=e.split("-");z.currentRule={lng:e,rule:z.rules[t[0]]}}},get:function(e,t){function n(t,n){var i;if(i=z.currentRule&&z.currentRule.lng===e?z.currentRule.rule:z.rules[t]){var r=i.plurals(n),s=i.numbers[r];return 2===i.numbers.length&&1===i.numbers[0]&&(2===s?s=-1:1===s&&(s=1)),s}return 1===n?"1":"-1"}var i=e.split("-");return n(i[0],t)}},F={},H=function(e,t){F[e]=t},B=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var r,s,a,o,l,u,c,h=1,d=n.length,p="",f=[];for(s=0;d>s;s++)if(p=e(n[s]),"string"===p)f.push(n[s]);else if("array"===p){if(o=n[s],o[2])for(r=i[h],a=0;a<o[2].length;a++){if(!r.hasOwnProperty(o[2][a]))throw B('[sprintf] property "%s" does not exist',o[2][a]);r=r[o[2][a]]}else r=o[1]?i[o[1]]:i[h++];if(/[^s]/.test(o[8])&&"number"!=e(r))throw B("[sprintf] expecting number but found %s",e(r));switch(o[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=o[7]?r.toExponential(o[7]):r.toExponential();break;case"f":r=o[7]?parseFloat(r).toFixed(o[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=String(r))&&o[7]?r.substring(0,o[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(o[8])&&o[3]&&r>=0?"+"+r:r,u=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",c=o[6]-String(r).length,l=o[6]?t(u,c):"",f.push(o[5]?r+l:l+r)}return f.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){r|=1;var s=[],a=n[2],o=[];if(null===(o=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(s.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=/^\.([a-z_][a-z_\d]*)/i.exec(a)))s.push(o[1]);else{if(null===(o=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";s.push(o[1])}n[2]=s}else r|=2;if(3===r)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i},n}(),q=function(e,t){return t.unshift(e),B.apply(null,t)};H("sprintf",function(e,t,n){return n.sprintf?"[object Array]"===Object.prototype.toString.apply(n.sprintf)?q(e,n.sprintf):"object"==typeof n.sprintf?B(e,n.sprintf):e:e}),N.init=r,N.setLng=h,N.preload=s,N.addResourceBundle=a,N.removeResourceBundle=o,N.loadNamespace=u,N.loadNamespaces=c,N.setDefaultNamespace=l,N.t=b,N.translate=b,N.exists=y,N.detectLanguage=$.detectLanguage,N.pluralExtensions=z,N.sync=I,N.functions=$,N.lng=d,N.addPostProcessor=H,N.options=O}(),function(e){"use strict";function t(){return!!d.xhr}function n(){d.strict?i.apply(this,arguments):r.apply(this,arguments)}function i(){throw new Error(Array.prototype.join.call(arguments," "))}function r(){d.verbose&&s.apply(this,arguments)}function s(){for(var e=[],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);d.displayTime&&e.unshift(("00000000"+((new Date).getTime()-o)).substr(-8)),console&&console.log instanceof Function&&console.log.apply(console,e)}var a=/^[a-zA-Z_$-][a-zA-Z_$0-9-]*$/,o=new Date,l={},u=this;if(u.domino)throw new Error("domino already exists");var c=function(){function t(e){var t=e||{},n={getEvents:C,getLabel:T,expand:A,warn:O,log:D,die:j,get:w,abortCall:h};return t.full?(n.help=P,n.kill=M,n.update=y,n.request=k,n.settings=L,n.modules=m,n.addModule=g,n.killModule=v,n.getEvent=function(){I.getEvent.apply(I,arguments)},n.addEventListener=function(){I.addEventListener.apply(I,arguments)},n.removeEventListener=function(){I.removeEventListener.apply(I,arguments)},n.configuration=_,n.dispatchEvent=function(e,t){var n,i,r=z.array(e),s=[];for(n=0,i=r.length;i>n;n++)s.push(I.getEvent(r[n],t));return x({events:s}),this}):(t.request&&(Object.defineProperty(n,"_services",{value:[]}),n.request=function(e,t){var n,i;if(F.check("string",e)){i={service:e};for(n in t||{})i[n]=t[n];this._services.push(i)}else if(F.check("object",e))this._services.push(e);else if(F.check("array",e)){if(i={services:e},F.check("object",t))for(n in t)i[n]=t[n];this._services.push(i)}return this}),t.dispatchEvent&&(Object.defineProperty(n,"_events",{value:[]}),n.dispatchEvent=function(e,t){var n,i,r=z.array(e);for(n=0,i=r.length;i>n;n++)this._events.push(I.getEvent(r[n],t));return this}),t.update&&(Object.defineProperty(n,"_properties",{value:[]}),n.update=function(e,t){if("object"==typeof e)for(var n in e)this._properties.push({property:n,value:e[n]});else"string"==typeof e&&arguments.length>1&&this._properties.push({property:e,value:t});return this})),n}function n(t){t.request!==e&&(t.request=function(){return j("This method is no longer available."),this}),t.dispatchEvent!==e&&(t.dispatchEvent=function(){return j("This method is no longer available."),this}),t.update!==e&&(t.update=function(){return j("This method is no longer available."),this})}function r(t,n){var i,r,s=n||{};t===e&&j("Property name not specified"),"string"!==F.get(t)&&j("The property name must be a string"),Y[t]!==e&&j('Property "'+t+'" already exists'),fe[t]!==e&&j('"'+t+'" can not be used to name a property'),t.match(a)||j("Property name not valid ("+a+")"),G[t]={};for(r in s)G[t][r]=s[r];if(q[t]=s.label||t,s.description&&(ee.properties[t]=s.description),s.type!==e&&(F.isValid(s.type)?B[t]=s.type:O('Property "'+t+'": Type not valid')),s.setter!==e&&("function"!==F.get(s.setter)?O('Property "'+t+'": Setter is not a function'):(V[t]=s.setter,J[t]=!0)),V[t]=V[t]||function(e){return(!F.deepScalar(B[t])||!F.compare(e,Y[t],B[t]))&&(B[t]&&!F.check(B[t],e)?O('Property "'+t+'": Wrong type error'):Y[t]=e,!0)},s.getter!==e&&("function"!==F.get(s.getter)?O('Property "'+t+'": Getter is not a function'):(U[t]=s.getter,K[t]=!0)),U[t]=U[t]||function(){return Y[t]},(s.value!==e||B[t])&&(s.value!==e?E(t,s.value):D('Property "'+t+'": Initial value is missing')),s.triggers!==e){!F.check("array|string",s.triggers)&&O('Property "'+t+'": Events ("triggers") must be specified in an array or separated by spaces in a string'),W[t]=z.array(s.triggers);for(i in W[t]||[])ne[W[t][i]]=ne[W[t][i]]||[],ne[W[t][i]].push(t)}return s.dispatch!==e&&(F.check("array|string",s.dispatch)?ie[t]=z.array(s.dispatch):O('Property "'+t+'": Events ("dispatch") must be specified in an array or separated by spaces in a string')),I}function o(t){var n,i,r=t||{};r.triggers===e&&j("A hack requires at least one trigger to be bound"),r.description&&le.push(r.description),n=z.array(r.triggers);for(i in n)ue[n[i]]=ue[n[i]]||[],oe[n[i]]=oe[n[i]]||[],ae[n[i]]=ae[n[i]]||[],r.description&&(ue[n[i]]=ue[n[i]].concat(r.description)),r.method&&ae[n[i]].push(r.method),r.dispatch&&(oe[n[i]]=oe[n[i]].concat(z.array(r.dispatch)));n=z.array(r.dispatch);for(i in n)ce[n[i]]=ce[n[i]]||[],r.description&&(ce[n[i]]=ce[n[i]].concat(r.description));return I}function u(i,r){var s=r||{};return"string"!==F.get(i)&&j("The service id is not specified."),F.check("function|string",s.url)||j("The service URL is not valid."),he[i]!==e&&j('The service "'+i+'" already exists.'),s.description&&(ee.services[i]=s.description),he[i]=function(r){D('Calling service "'+i+'".');
var a,o,l,u,c,h=r||{},d=h.shortcuts||{},p={contentType:h.contentType||s.contentType,dataType:h.dataType||s.dataType,type:(h.type||s.type||"GET").toString().toUpperCase(),data:h.data!==e?h.data:"function"===F.get(s.data)?s.data.call(t(),h):s.data,url:"function"===F.get(s.url)?s.url.call(t(),h):s.url,error:function(e,t){I.dispatchEvent("domino.ajaxFailed");var n=h.error||s.error;D('Loading service "'+i+'" failed with message "'+e+'" and status '+t.status+"."),"function"===F.get(n)&&S(n,{parameters:[e,t,h],loop:h.loop||x,scope:{request:!0,dispatchEvent:!0,update:!0}})}},f=L("shortcutPrefix"),g=new RegExp(f+"(\\w+)","g"),m=new RegExp("^"+f+"(\\w+)$"),v=null;for("string"!==F.get(p.url)&&j('The URL is no more a string (typed "'+F.get(p.url)+'")');(c=p.url.match(g))&&p.url!==v;){v=p.url;for(a in c)o=A(c[a].match(m)[1],d),p.url=p.url.replace(new RegExp(c[a],"g"),o)}if(u=!0,"string"===F.get(p.data)&&p.data.match(m)&&(p.data=A(p.data.match(m)[1],d)),"object"===F.get(p.data))for(;u;){u=!1;for(l in p.data)"string"===F.get(p.data[l])&&p.data[l].match(m)&&(p.data[l]=A(p.data[l].match(m)[1],d),u=!0)}p.success=function(r,a){var o,u,c,f,g,v={},y=[],b=[],w={},E=!1,k=h.path||s.path,T=h.setter||s.setter,C=h.success||s.success,N=h.expect||s.expect||L("expect");if("function"===F.get(N)&&!N.call(t(),r,h,s))return D('"expect" test failed for service "'+i+'".'),void p.error.call(this,"Unexpected data received.",a);if(D('Service "'+i+'" successfull.'),"string"===F.get(T)&&T.match(m)&&(T=A(T.match(m)[1],d)),"string"===F.get(k)&&k.match(m)&&(k=A(k.match(m)[1],d)),g=r,(k||"").match(/^(?:\w+\.)*\w+$/)?f=F.get(k,"string")?k.split("."):e:"string"===F.get(k)&&O('Path "'+k+'" does not match RegExp /^(?:\\w+\\.)*\\w+$/'),f)for(o in f)g=g[f[o]],g!==e||O('Wrong path "'+k+'" for service "'+i+'".');u=z.array(s.events);for(o in u)v[u[o]]=1,E=!0;u=z.array(h.events);for(o in u)v[u[o]]=1,E=!0;if(T&&V[T]&&g!==e&&(w[T]=g,E=!0),"function"===F.get(C)){var _=S(C,{parameters:[r,h],scope:{request:!0,dispatchEvent:!0,update:!0}});u=z.array(_.events);for(l in u)E=!0,v[u[l].type]=u[l];for(l in _.update)w[l]===e?(w[l]=_.update[l],E=!0):O('The key "'+l+'" is nor a method neither a property.');(_.services||[]).length&&(E=!0,y=y.concat(_.services)),n(_)}b=[];for(c in v)b.push(1===v[c]?I.getEvent(c):v[c]);(E||h.loop)&&(h.loop||x)({events:b,update:w,services:y})};var y=h.before||s.before;"function"==typeof y&&"function"===F.get(y)&&(p.beforeSend=function(e){return S(y,{parameters:[h,e],loop:!0,scope:{dispatchEvent:!0,update:!0}}).returned}),("abort"in h?h.abort:s.abort)&&de[i]&&de[i].abort(),de[i]=z.ajax(p)},I}function h(e){de[e]&&de[e].abort()}function f(t,n){var i=n||{},r="function"==typeof i?i:i.method,s="object"==typeof i&&"description"in i?i.description:null;return t===e&&j("Shortcut ID not specified."),pe[t]&&j('Shortcut "'+t+'" already exists.'),r===e&&j("Shortcut method not specified."),s&&(ee.shortcuts[t]=s),pe[t]=r,I}function g(n,i,r){var s,a,o,l,u=new c.module,h=r||{},d={};n===e&&j("Module class not specified."),"function"!==F.get(n)&&j("First parameter must be a function."),"id"in h&&h.id in Z&&j('The module with id "'+h.id+'" already exists.'),n.apply(u,(i||[]).concat(t())),a=u.triggers||{};for(l in a.events||{})re[l]=re[l]||[],re[l].push(a.events[l]);for(o in a.properties||{}){for(s in ie[o]||[])se[o]=se[o]||[],se[o].push(a.properties[o]);if(U[o]!==e){var p={};p[o]=w(o),S(a.properties[o],{parameters:[t()]})}}for(l in ne||{})d[l]=1;for(l in ae||{})d[l]=1;for(l in oe||{})d[l]=1;for(l in ue||{})d[l]=1;for(l in d)u.addEventListener(l,b);return u.log="id"in h?z.partial(D,'[module "'+h.id+'"]'):z.partial(D,"[module]"),u.warn="id"in h?z.partial(O,'[module "'+h.id+'"]'):z.partial(O,"[module]"),u.die="id"in h?z.partial(j,'[module "'+h.id+'"]'):z.partial(j,"[module]"),"id"in h&&(Z[h.id]=u),Q.push(u),u}function m(e){return Z[e]}function v(e){var t,n,i,r,s,a,o,l,u={};if(F.check("string",e)&&(e=Z[e]),Q.indexOf(e)<0)return I.warn("The module you try to kill is actually not referenced."),e;"function"==typeof e.kill&&e.kill(),l=e.triggers||{};for(a in l.events){if(r=re[a],s=l.events[a],r&&r.length)for(t=0,n=r.length;n>t;t++)r[t]===s&&r.splice(t,1);r&&!r.length&&delete re[a]}for(o in l.properties){if(r=se[o],s=l.properties[o],r&&r.length)for(t=0,n=r.length;n>t;t++)r[t]===s&&r.splice(t,1);r&&!r.length&&delete se[o]}for(a in ne||{})u[a]=1;for(a in ae||{})u[a]=1;for(a in oe||{})u[a]=1;for(a in ue||{})u[a]=1;for(a in u)e.removeEventListener(a,b);Q.splice(Q.indexOf(e),1);for(i in Z)if(Z[i]===e){delete Z[i];break}return e}function y(e,t){var n="object"==typeof e&&1===arguments.length?e||{}:{};return"string"==typeof e&&(n[e]=t),x({update:n}),this}function b(e){x({events:[e],emitter:e.target})}function x(i){var r,s,a,o,l,u,c,h,d,p,f=!1,g=[],m=[],v=[],y=i||{},b={},w={};y.loop=(+y.loop||0)+1,y.loopId=y.loopId||++te,L("maxDepth")&&y.loop>L("maxDepth")&&j("Loop "+y.loopId+" exceeds maximum depth ("+L("maxDepth")+")");var T=z.array(y.events),C=z.array(y.services),A=y.update||{};if(L("verbose")){if(D("Iteration "+y.loop+" (loop "+y.loopId+")"),T.length){p=[];for(s in T)p.push(T[s].type);D(" -> Events: ",p)}if(C.length){p=[];for(s in C)p.push("string"==typeof C[s]?C[s]:C[s].service);D(" -> Services: ",p)}p=[];for(s in A)p.push(s);p.length&&D(" -> Update: ",p)}for(d in A)if(V[d]===e)O('The property "'+d+'" is not referenced.');else if(h=E(d,A[d])||y.force||N(d,"force")){for(s in se[d])S(se[d][s],{parameters:[t(),{property:d,emitter:y.emitter}]});for(s in ie[d]||[])l=ie[d][s],b[l]=I.getEvent(l)}if(C.length)if(L("mergeRequests")){r=[];for(a in C)C[a].services?k(C[a].services,C[a]):r.push(C[a]),r.length&&k(r)}else for(a in C)C[a].services?k(C[a].services,C[a]):k(C[a]);for(s in T){if(u=T[s],c=u.data||{}){r=ne[u.type]||[];for(a in r)c[r[a]]!==e&&(f=!0,w[r[a]]=c[r[a]])}for(o in re[u.type])S(re[u.type][o],{parameters:[t(),u,y.emitter]});for(a in ae[u.type]||[])if(g.indexOf(ae[u.type][a])<0){g.push(ae[u.type][a]);var _=S(ae[u.type][a],{parameters:[u],scope:{request:!0,dispatchEvent:!0,update:!0}});r=z.array(_.events);for(o in r)b[r[o].type]=r[o];for(o in _.update)w[o]===e?(f=!0,w[o]=_.update[o]):O('The property "'+o+'" has already been updated in the current loop.');(_.services||[]).length&&(f=!0,v=v.concat(_.services)),n(_)}for(a in oe[u.type]||[])l=oe[u.type][a],b[l]=I.getEvent(l);if(L("logDescriptions"))for(a in ue[u.type]||[])D("[HACK]",ue[u.type][a])}for(u in b)I.dispatchEvent(u,b[u].data),m.push(b[u]),f=!0;f&&x({events:m,update:w,services:v,emitter:y.emitter,loopId:y.loopId,loop:y.loop})}function w(e){if(U[e]){if(K[e]){for(var t,n=[],i={},r=1,s=arguments.length;s>r;r++)n.push(arguments[r]);return i[e]=Y[e],t=S(U[e],{parameters:n,inputValues:i}),N(e,"clone")?z.clone(t.returned):t.returned}return N(e,"clone")?z.clone(U[e]()):U[e]()}O('Property "'+e+'" not referenced.')}function E(e,n){if(V[e]){if(J[e]){var i,r,s=[],a={};N(e,"clone")&&(n=z.clone(n)),a[e]=w(e);for(var o=1,l=arguments.length;l>o;o++)s.push(arguments[o]);return r=S(V[e],{parameters:s,inputValues:a}),i="boolean"!==F.get(r.returned)||r.returned,i&&(Y[e]=r.update[e]),i}return V[e].call(t(),N(e,"clone")?z.clone(n):n)}return O('Property "'+e+'" not referenced.'),!1}function k(t,n){if(F.check("string",t))he[t]?he[t](n):O('Service "'+t+'" not referenced.');else if(F.check("object",t))k(t.service,t);else if(F.check("array",t)){n=n||{};var i,r=t.length,s=n.merge!==e?!!n.merge:L("mergeRequests");if(s){var a,o,l=r,u=[],c=function(){var e,t,i,s={update:{},events:[],services:[]};for(t=0;r>t;t++){e=u[t]||{};for(i in e.update||{})s.update[i]=e.update[i];s.events=s.events.concat(e.events||[]),s.services=s.services.concat(e.services||[])}n.success&&S(n.success,{parameters:[u],loop:x,scope:{request:!0,dispatchEvent:!0,update:!0}})};for(i=0;r>i;i++){if("string"==typeof t[i])a={service:t[i]};else{a={};for(o in t[i])a[o]=t[i][o]}!function(e){a.loop=function(t){u[e]=t,x(t),--l||c()}}(i),k(a)}}else for(i=0,r=t.length;r>i;i++)k(t[i])}return this}function S(n,i){var r,s,a,o={},l=i||{},u=t(l.scope);"function"!==F.get(n)&&j("The first parameter must be a function");for(r in l.inputValues||{})u[r]=l.inputValues[r];a=n.apply(u,l.parameters||[]),s={returned:a,update:{},events:[],services:[]},null==u._events||F.check("array",u._events)?s.events=u._events:O("Events must be stored in an array.");for(r in u)o[r]=u[r];for(r in u._properties)o[u._properties[r].property]=u._properties[r].value;for(r in o)V[r]!==e?s.update[r]=o[r]:fe[r]===e&&O('The key "'+r+'" is not a method nor a property.');for(r in l.inputValues)s.update[r]=u[r];for(r in u._services)s.services[r]=u._services[r];if(l.loop){var c=(s.services||[]).length||(s.events||[]).length;if(!c)for(r in s.update)c=!0;c&&(F.check("function",l.loop)?l.loop:x)(s)}return s}function T(e){return q[e]}function C(e){return W[e]}function A(n){var i=n,r=L("shortcutPrefix"),s=(n||"").toString().match(new RegExp("^"+r+"(\\w+)$"));s&&s.length&&(O("Prefix in expand() calls is deprecated."),i=s[1]);for(var a=1,o=arguments.length;o>a;a++)if((arguments[a]||{})[i]!==e)return arguments[a][i];return"function"===F.get(U[i])?w(i):"function"===F.get(pe[i])?pe[i].call(t()):(O('The shortcut "',i,'" has not been recognized.'),r+i)}function N(t,n){var i=(G[t]||{})[n];return i!==e?!!i:L(n)}function _(e){return arguments.length?z.clone($[e]):z.clone($)}function P(e,t,n){var i,r={},s="[no description is specified]";switch(e){case"properties":if(1===arguments.length){for(i in Y)r[i]=ee.properties[i]||s;return r}return ee.properties[t]||s;case"services":if(1===arguments.length){for(i in he)r[i]=ee.services[i]||s;return r}return ee.services[t]||s;case"shortcuts":if(1===arguments.length){for(i in pe)r[i]=ee.shortcuts[i]||s;return r}return ee.shortcuts[t]||s;case"hacks":if(1===arguments.length)return le;if(3===arguments.length)return r=[],"trigger"===t?r=ue[n]:"dispatch"===t&&(r=ce[n]),1===r.length?r[0]:r;case"full":return{properties:P("properties"),shortcuts:P("shortcuts"),services:P("services"),hacks:P("hacks")}}}function M(){var e;D('Killing instance "'+ge+'"');for(e in Q)Q[e].removeEventListener();Q=null,B=null,q=null,W=null,U=null,V=null,X=null,Y=null,K=null,J=null,Q=null,ne=null,ie=null,re=null,se=null,ae=null,oe=null,he=null,de=null,pe=null;for(e in R)delete R[e];l[ge]&&delete l[ge]}function L(t,n){if("string"==typeof t&&1===arguments.length)return H[t]!==e?H[t]:d[t];var i="object"==typeof t&&1===arguments.length?t||{}:{};"string"==typeof t&&(i[t]=n);for(var r in i)i[r]!==e?H[r]=i[r]:delete H[r];return this}function O(){var e=["["+(ge||"domino")+"]"];L("strict")||e.push("WARNING");for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);L("strict")?i.apply(this,e):L("verbose")&&s.apply(this,e)}function j(){for(var e=["["+(ge||"domino")+"]"],t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);i.apply(this,e)}function D(){var e=["["+(ge||"domino")+"]"];if(L("verbose")){for(var t=0,n=arguments.length;n>t;t++)e.push(arguments[t]);s.apply(this,e)}}(function(){p.call(this);for(var e in p.prototype)this[e]=p.prototype[e]}).call(this);var R,$,I=this,z=c.utils,F=c.struct,H={},B={},q={},W={},U={},V={},X={},Y={},G={},K={},J={},Q=[],Z={},ee={properties:{},shortcuts:{},services:{}},te=0,ne={},ie={},re={},se={},ae={},oe={},le=[],ue={},ce={},he={},de={},pe={},fe={events:1,services:1,hacks:1};!function(){var e;for(e in Object.prototype)fe[e]=1;for(e in t({full:!0}))fe[e]=1}(),R=t({full:!0});var ge,me={};return"string"===F.get(arguments[0])?(me=arguments[1],me.name=arguments[0]):arguments[0]!==e&&"object"===F.get(arguments[0])?me=arguments[0]:arguments[1]!==e&&"object"===F.get(arguments[1])&&(me=arguments[1]),me.name=ge||me.name,ge=me.name,ge&&(l[ge]?j('An instance named "'+ge+'" is already running.'):l[ge]=R),function(){var e;if("array"===F.get(me.properties))for(e in me.properties)r(me.properties[e].id,me.properties[e]);else if("object"===F.get(me.properties))for(e in me.properties)r(e,me.properties[e]);for(e in me.hacks||[])o(me.hacks[e]);if("array"===F.get(me.services))for(e in me.services)u(me.services[e].id,me.services[e]);else if("object"===F.get(me.services))for(e in me.services)u(e,me.services[e]);if("array"===F.get(me.shortcuts))for(e in me.shortcuts)f(me.shortcuts[e].id,me.shortcuts[e]);else if("object"===F.get(me.shortcuts))for(e in me.shortcuts)f(e,me.shortcuts[e])}(),$=z.clone(me),R};c.version="1.3.7","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.domino=c):u.domino=c,c.utils={array:function(e,t){var n="string"===c.struct.get(e)?e.split(t||" "):"array"===c.struct.get(e)?e:[e],i=[];for(var r in n)n[r]&&i.push(n[r]);return i},clone:function(e){if(!e)return e;var t,n,i;if("array"===h.get(e))for(t=[],n=0,i=e.length;i>n;n++)t.push(this.clone(e[n]));else if("date"===h.get(e))t=new Date(e.getTime());else if("object"===h.get(e))if(e.nodeType&&"function"==typeof e.cloneNode)t=e;else if(e.prototype)t=e;else{t={};for(n in e)t[n]=this.clone(e[n])}else t=e;return t},partial:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(this,t.concat(Array.prototype.slice.call(arguments)))}},ajax:function(e,n){t()||i('[domino.global] XMLHttpRequest not found. You can specify which XMLHttpRequest you want to use by using domino.settings("xhr", myXhr).'),"string"==typeof e?e={url:e,ok:n}:"object"!==h.get(e)&&i("[domino.global] Invalid parameter given to AJAX");var r,s,a,o=e.type||"GET",l=e.url||"",u=e.contentType||"application/x-www-form-urlencoded",c=e.dataType||"json",p=new d.xhr;if(e.data){if("string"==typeof e.data)s=e.data;else if(/json/.test(u))s=JSON.stringify(e.data);else{s=[];for(a in e.data)s.push(encodeURIComponent(a)+"="+encodeURIComponent(e.data[a]));s=s.join("&")}/GET|DEL/i.test(o)&&(l+=/\?/.test(l)?"&"+s:"?"+s,s="")}if(p.onreadystatechange=function(){if(4==p.readyState)if(r&&clearTimeout(r),/^2/.test(p.status)){if(s=p.responseText,/json/.test(c))try{s=JSON.parse(p.responseText)}catch(t){return e.error&&e.error("JSON parse error: "+t.message,p)}e.success&&e.success(s,p)}else{var n=+p.status?p.responseText:p.responseText.length?"Aborted: "+p.responseText:"Aborted";e.error&&e.error(n,p)}},p.open(o,l,!0),p.setRequestHeader("Content-Type",u),e.headers)for(a in e.headers)p.setRequestHeader(a,e.headers[a]);return"function"==typeof e.beforeSend&&e.beforeSend(p,e)===!1?p.abort():(e.timeout&&(r=setTimeout(function(){p.onreadystatechange=function(){},p.abort(),e.error&&e.error&&e.error("timeout",p)},1e3*e.timeout)),p.send(s),p)}},c.struct=function(){var t=["number","string","boolean","null","undefined"],r="Boolean Number String Function Array Date RegExp Object".split(" "),s={},a=["*"],o={};for(var l in r){var u=r[l];a.push(u.toLowerCase()),s["[object "+u+"]"]=u.toLowerCase()}return{add:function(t,n){var r,s,l,u,h,d;1===arguments.length?"object"===this.get(t)?(d=t,l=d.id,h=d.struct):i("[domino.global] If struct.add is called with one arguments, it has to be an object"):2===arguments.length?("string"===this.get(t)&&t?l=t:i("[domino.global] If struct.add is called with more than one arguments, the first one must be the string id"),h=n):i("[domino.global] struct.add has to be called with one or three arguments"),("string"!==this.get(l)||0===l.length)&&i("[domino.global] A structure requires an string id"),o[l]!==e&&"proto"!==o[l]&&i('[domino.global] The structure "'+l+'" already exists'),o[l]=1,s=c.utils.array((d||{}).proto),u={};for(r in s)o[s[r]]===e&&(o[s[r]]=1,u[s[r]]=1);if("function"===this.get(h)||this.isValid(h)||i('[domino.global] A structure requires a valid "structure" property describing the structure. It can be a valid structure or a function that test if an object matches the structure.'),~a.indexOf(l)&&(delete o[l],i('[domino.global] "'+l+'" is a reserved structure name')),o[l]=d===e?{id:l,struct:h}:{},d!==e)for(r in d)o[l][r]=d[r];for(r in u)r!==l&&delete o[r]},get:function(e){return null==e?String(e):s[Object.prototype.toString.call(e)]||"object"},existing:function(e){return"string"==typeof e?(o[e]||{}).struct:c.utils.clone(o)},check:function(t,i,r){var s,l,u=this.get(i),c=r||{};if("string"===this.get(t)){s=t.replace(/^\?/,"").split(/\|/);for(l in s)if(a.indexOf(s[l])<0&&o[s[l]]===e)return n("[domino.global] Invalid type"),!1;if(null==i)return!!t.match(/^\?/,"");t=t.replace(/^\?/,"");for(l in s)if(o[s[l]]&&("function"===this.get(o[s[l]].struct)?o[s[l]].struct(i)===!0:this.check(o[s[l]].struct,i,o[s[l]])))return!0;return!(!~s.indexOf("*")&&!~s.indexOf(u))}if("object"===this.get(t)){if("object"!==u)return!1;var h;for(h in t)if(!this.check(t[h],i[h]))return!1;if(!c.includes)for(h in i)if(t[h]===e)return!1;return!0}if("array"===this.get(t)){if("array"!==u)return!1;if(1!==t.length)return n("[domino.global] Invalid type"),!1;for(h in i)if(!this.check(t[0],i[h]))return!1;return!0}return!1},deepScalar:function(e){var n,i;if("string"===this.get(e)){n=e.replace(/^\?/,"").split(/\|/);for(i in n)if(t.indexOf(n[i])<0)return!1;return!0}if(this.check("object|array",e)){for(i in e)if(!this.deepScalar(e[i]))return!1;return!0}return!1},compare:function(e,t,n){var i;if(this.get(e),this.get(t),!this.deepScalar(n)||!this.check(n,e)||!this.check(n,t))return!1;if("string"===this.get(n))return e===t;if("object"===this.get(n)){for(i in n)if(!this.compare(e[i],t[i],n[i]))return!1;return!0}if("array"===this.get(n)){if(e.length!==t.length)return!1;var r=e.length;for(i=0;r>i;i++)if(!this.compare(e[i],t[i],n[0]))return!1;return!0}return!1},isValid:function(t){var n,i,r;if("string"===this.get(t)){n=t.replace(/^\?/,"").split(/\|/);for(r in n)if(a.indexOf(n[r])<0&&o[n[r]]===e)return!1;return!0}if("object"===this.get(t)){for(i in t)if(!this.isValid(t[i]))return!1;return!0}return"array"===this.get(t)&&(1===t.length&&this.isValid(t[0]))}}}();var h=(c.utils,c.struct),d={maxDepth:0,strict:!1,verbose:!1,displayTime:!1,shortcutPrefix:":",mergeRequests:!0,logDescriptions:!0,xhr:u.XMLHttpRequest,clone:!1};c.settings=function(t,n){if("string"==typeof t&&1===arguments.length)return d[t];var i="object"==typeof t&&1===arguments.length?t||{}:{};"string"==typeof t&&(i[t]=n);for(var r in i)i[r]!==e?d[r]=i[r]:delete d[r];return this},c.instances=function(e){return arguments.length?l[e]:void i("[domino.global] You need to indicate a name to get the instance.")},c.EventDispatcher=function(){Object.defineProperty(this,"_handlers",{value:{}})};var p=c.EventDispatcher;p.prototype.addEventListener=function(e,t){var n,i,r,s;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.addEventListener(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"domino.EventDispatcher.addEventListener: Wrong arguments.";for(s="string"==typeof e?e.split(" "):e,n=0,i=s.length;n!==i;n+=1)r=s[n],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},p.prototype.removeEventListener=function(e,t){var n,i,r,s,a,o,l,u="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(n=0,i=u.length;n!==i;n+=1){if(l=u[n],this._handlers[l]){for(o=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler!==t&&o.push(this._handlers[l][r]);this._handlers[l]=o}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(n=0,i=u.length;n!==i;n+=1)delete this._handlers[u[n]];return this},p.prototype.dispatchEvent=function(t,n){var i,r,s,a,o,l,u,c,h=this,d="string"==typeof t?t.split(" "):t;for(n=n===e?{}:n,i=0,r=d.length;i!==r;i+=1)if(c=d[i],u=this._handlers[c],u&&u.length){for(l=h.getEvent(c,n),o=[],s=0,a=u.length;s!==a;s+=1)u[s].handler(l),u[s].one||o.push(u[s]);this._handlers[c]=o}return this},p.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},c.module=function(){if(!this._handlers){p.call(this);for(var e in p.prototype)this[e]=p.prototype[e];this.triggers={properties:{},events:{}},this.log=this.warn=this.die=function(){}}}}.call(this),!function(){var e,t,n,i,r,s,a,o,l,u,c,h,d,p,f,g,m,v,y,b,x,w,E,k,S,T,C,A,N,_,P,M,L,O,j,D,R,$,I;u=function(t,n,i,r){return new e(t,n,i,r)},"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=u),"function"==typeof define&&define.amd?define([],function(){return u}):(O="undefined"!=typeof exports&&null!==exports?exports:this,O.chroma=u),u.color=function(t,n,i,r){return new e(t,n,i,r)},u.hsl=function(t,n,i,r){return new e(t,n,i,r,"hsl")},u.hsv=function(t,n,i,r){return new e(t,n,i,r,"hsv")},u.rgb=function(t,n,i,r){return new e(t,n,i,r,"rgb")},u.hex=function(t){return new e(t)},u.css=function(t){return new e(t)},u.lab=function(t,n,i){return new e(t,n,i,"lab")},u.lch=function(t,n,i){return new e(t,n,i,"lch")},u.hsi=function(t,n,i){return new e(t,n,i,"hsi")},u.gl=function(t,n,i,r){return new e(255*t,255*n,255*i,r,"gl")},u.interpolate=function(t,n,i,r){return null==t||null==n?"#000":("string"===j(t)&&(t=new e(t)),"string"===j(n)&&(n=new e(n)),t.interpolate(i,n,r))},u.mix=u.interpolate,u.contrast=function(t,n){var i,r;return"string"===j(t)&&(t=new e(t)),"string"===j(n)&&(n=new e(n)),i=t.luminance(),r=n.luminance(),i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)},u.luminance=function(e){return u(e).luminance()},u._Color=e,e=function(){function e(){var e,t,n,i,r,s,a,o,l,u,h,d,p,y,x;for(r=this,n=[],u=0,h=arguments.length;u<h;u++)t=arguments[u],null!=t&&n.push(t);if(0===n.length)d=[255,0,255,1,"rgb"],a=d[0],o=d[1],l=d[2],e=d[3],i=d[4];else if("array"===j(n[0])){if(3===n[0].length)p=n[0],a=p[0],o=p[1],l=p[2],e=1;else{if(4!==n[0].length)throw"unknown input argument";y=n[0],a=y[0],o=y[1],l=y[2],e=y[3]}i=n[1]}else"string"===j(n[0])?(a=n[0],i="hex"):"object"===j(n[0])?(x=n[0]._rgb,a=x[0],o=x[1],l=x[2],e=x[3],i="rgb"):n.length>=3&&(a=n[0],o=n[1],l=n[2]);3===n.length?(i="rgb",e=1):4===n.length?"string"===j(n[3])?(i=n[3],e=1):"number"===j(n[3])&&(i="rgb",e=n[3]):5===n.length&&(e=n[3],i=n[4]),null==e&&(e=1),"rgb"===i?r._rgb=[a,o,l,e]:"gl"===i?r._rgb=[255*a,255*o,255*l,e]:"hsl"===i?(r._rgb=m(a,o,l),r._rgb[3]=e):"hsv"===i?(r._rgb=v(a,o,l),r._rgb[3]=e):"hex"===i?r._rgb=f(a):"lab"===i?(r._rgb=b(a,o,l),r._rgb[3]=e):"lch"===i?(r._rgb=E(a,o,l),r._rgb[3]=e):"hsi"===i&&(r._rgb=g(a,o,l),r._rgb[3]=e),s=c(r._rgb)}return e.prototype.rgb=function(){return this._rgb.slice(0,3)},e.prototype.rgba=function(){return this._rgb},e.prototype.hex=function(){return C(this._rgb)},e.prototype.toString=function(){return this.name()},e.prototype.hsl=function(){return N(this._rgb)},e.prototype.hsv=function(){return _(this._rgb)},e.prototype.lab=function(){return P(this._rgb)},e.prototype.lch=function(){return M(this._rgb)},e.prototype.hsi=function(){return A(this._rgb)},e.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},e.prototype.luminance=function(){return S(this._rgb)},e.prototype.name=function(){var e,t;e=this.hex();for(t in u.colors)if(e===u.colors[t])return t;return e},e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.css=function(e){var t,n,i,r;return null==e&&(e="rgb"),n=this,i=n._rgb,3===e.length&&i[3]<1&&(e+="a"),"rgb"===e?e+"("+i.slice(0,3).join(",")+")":"rgba"===e?e+"("+i.join(",")+")":"hsl"===e||"hsla"===e?(t=n.hsl(),r=function(e){return Math.round(100*e)/100},t[0]=r(t[0]),t[1]=r(100*t[1])+"%",t[2]=r(100*t[2])+"%",4===e.length&&(t[3]=i[3]),e+"("+t.join(",")+")"):void 0},e.prototype.interpolate=function(t,n,i){var r,s,a,o,l,u,c,h,d,p,f,g,m,v;if(h=this,null==i&&(i="rgb"),"string"===j(n)&&(n=new e(n)),"hsl"===i||"hsv"===i||"lch"===i||"hsi"===i)"hsl"===i?(m=h.hsl(),v=n.hsl()):"hsv"===i?(m=h.hsv(),v=n.hsv()):"hsi"===i?(m=h.hsi(),v=n.hsi()):"lch"===i&&(m=h.lch(),v=n.lch()),"h"===i.substr(0,1)?(a=m[0],f=m[1],u=m[2],o=v[0],g=v[1],c=v[2]):(u=m[0],f=m[1],a=m[2],c=v[0],g=v[1],o=v[2]),isNaN(a)||isNaN(o)?isNaN(a)?isNaN(o)?s=Number.NaN:(s=o,1!==u&&0!==u||(p=g)):(s=a,1!==c&&0!==c||(p=f)):(r=o>a&&o-a>180?o-(a+360):o<a&&a-o>180?o+360-a:o-a,s=a+t*r),null==p&&(p=f+t*(g-f)),l=u+t*(c-u),d="h"===i.substr(0,1)?new e(s,p,l,i):new e(l,p,s,i);else if("rgb"===i)m=h._rgb,v=n._rgb,d=new e(m[0]+t*(v[0]-m[0]),m[1]+t*(v[1]-m[1]),m[2]+t*(v[2]-m[2]),i);else{if("lab"!==i)throw"color mode "+i+" is not supported";m=h.lab(),v=n.lab(),d=new e(m[0]+t*(v[0]-m[0]),m[1]+t*(v[1]-m[1]),m[2]+t*(v[2]-m[2]),i)}return d.alpha(h.alpha()+t*(n.alpha()-h.alpha())),d},e.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),u(t[0]*e,t[1]*e,t[2]*e,e)},e.prototype.darken=function(e){var t,n;return null==e&&(e=20),n=this,t=n.lch(),t[0]-=e,u.lch(t).alpha(n.alpha())},e.prototype.darker=function(e){return this.darken(e)},e.prototype.brighten=function(e){return null==e&&(e=20),this.darken(-e)},e.prototype.brighter=function(e){return this.brighten(e)},e.prototype.saturate=function(e){var t,n;return null==e&&(e=20),n=this,t=n.lch(),t[1]+=e,u.lch(t).alpha(n.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=20),this.saturate(-e)},e}(),c=function(e){var t;for(t in e)t<3?(e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e},p=function(e){var t,n,i,r,s,a,o,l;if(e=e.toLowerCase(),null!=u.colors&&u.colors[e])return f(u.colors[e]);if(i=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(r=i.slice(1,4),n=s=0;s<=2;n=++s)r[n]=+r[n];r[3]=1}else if(i=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(r=i.slice(1,5),n=a=0;a<=3;n=++a)r[n]=+r[n];else if(i=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(r=i.slice(1,4),n=o=0;o<=2;n=++o)r[n]=Math.round(2.55*r[n]);r[3]=1}else if(i=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(r=i.slice(1,5),n=l=0;l<=2;n=++l)r[n]=Math.round(2.55*r[n]);r[3]=+r[3]}else(i=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(t=i.slice(1,4),t[1]*=.01,t[2]*=.01,r=m(t),r[3]=1):(i=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(t=i.slice(1,4),t[1]*=.01,t[2]*=.01,r=m(t),r[3]=+i[4]);return r},f=function(e){var t,n,i,r,s,a;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),a=parseInt(e,16),r=a>>16,i=a>>8&255,n=255&a,[r,i,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),a=parseInt(e,16),r=a>>24&255,i=a>>16&255,n=a>>8&255,t=255&a,[r,i,n,t];if(s=p(e))return s;throw"unknown color: "+e},g=function(e,t,r){var s,a,o,l;return l=D(arguments),e=l[0],t=l[1],r=l[2],e/=360,e<1/3?(s=(1-t)/3,o=(1+t*d(i*e)/d(n-i*e))/3,a=1-(s+o)):e<2/3?(e-=1/3,o=(1-t)/3,a=(1+t*d(i*e)/d(n-i*e))/3,s=1-(o+a)):(e-=2/3,a=(1-t)/3,s=(1+t*d(i*e)/d(n-i*e))/3,o=1-(a+s)),o=k(r*o*3),a=k(r*a*3),s=k(r*s*3),[255*o,255*a,255*s]},m=function(){var e,t,n,i,r,s,a,o,l,u,c,h,d,p;if(d=D(arguments),i=d[0],o=d[1],s=d[2],0===o)a=n=e=255*s;else{for(c=[0,0,0],t=[0,0,0],u=s<.5?s*(1+o):s+o-s*o,l=2*s-u,i/=360,c[0]=i+1/3,c[1]=i,c[2]=i-1/3,r=h=0;h<=2;r=++h)c[r]<0&&(c[r]+=1),c[r]>1&&(c[r]-=1),6*c[r]<1?t[r]=l+6*(u-l)*c[r]:2*c[r]<1?t[r]=u:3*c[r]<2?t[r]=l+(u-l)*(2/3-c[r])*6:t[r]=l;p=[Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])],a=p[0],n=p[1],e=p[2]}return[a,n,e]},v=function(){var e,t,n,i,r,s,a,o,l,u,c,h,d,p,f,g,m,v;if(h=D(arguments),i=h[0],l=h[1],c=h[2],c*=255,0===l)o=n=e=c;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),i/=60,r=Math.floor(i),t=i-r,s=c*(1-l),a=c*(1-l*t),u=c*(1-l*(1-t)),r){case 0:d=[c,u,s],o=d[0],n=d[1],e=d[2];break;case 1:p=[a,c,s],o=p[0],n=p[1],e=p[2];break;case 2:f=[s,c,u],o=f[0],n=f[1],e=f[2];break;case 3:g=[s,a,c],o=g[0],n=g[1],e=g[2];break;case 4:m=[u,s,c],o=m[0],n=m[1],e=m[2];break;case 5:v=[c,s,a],o=v[0],n=v[1],e=v[2]}return o=Math.round(o),n=Math.round(n),e=Math.round(e),[o,n,e]},t=18,r=.95047,s=1,a=1.08883,y=function(){var e,t,n,i,r,s;return s=D(arguments),r=s[0],e=s[1],t=s[2],n=Math.sqrt(e*e+t*t),i=Math.atan2(t,e)/Math.PI*180,[r,n,i]},b=function(e,t,n){var i,o,l,u,c,h,d;return void 0!==e&&3===e.length&&(h=e,e=h[0],t=h[1],n=h[2]),void 0!==e&&3===e.length&&(d=e,e=d[0],t=d[1],n=d[2]),u=(e+16)/116,l=u+t/500,c=u-n/200,l=x(l)*r,u=x(u)*s,c=x(c)*a,o=$(3.2404542*l-1.5371385*u-.4985314*c),i=$(-.969266*l+1.8760108*u+.041556*c),n=$(.0556434*l-.2040259*u+1.0572252*c),[k(o,0,255),k(i,0,255),k(n,0,255),1]},x=function(e){return e>.206893034?e*e*e:(e-4/29)/7.787037},$=function(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))},w=function(){var e,t,n,i;return i=D(arguments),n=i[0],e=i[1],t=i[2],t=t*Math.PI/180,[n,Math.cos(t)*e,Math.sin(t)*e]},E=function(e,t,n){var i,r,s,a,o,l,u;return l=w(e,t,n),i=l[0],r=l[1],s=l[2],u=b(i,r,s),o=u[0],a=u[1],s=u[2],[k(o,0,255),k(a,0,255),k(s,0,255)]},S=function(e,t,n){var i;return i=D(arguments),e=i[0],t=i[1],n=i[2],e=T(e),t=T(t),n=T(n),.2126*e+.7152*t+.0722*n},T=function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},C=function(){var e,t,n,i,r,s;return s=D(arguments),n=s[0],t=s[1],e=s[2],r=n<<16|t<<8|e,i="000000"+r.toString(16),"#"+i.substr(i.length-6)},A=function(){var e,t,n,i,r,s,a,o,l;return l=D(arguments),a=l[0],n=l[1],t=l[2],e=2*Math.PI,a/=255,n/=255,t/=255,s=Math.min(a,n,t),r=(a+n+t)/3,o=1-s/r,0===o?i=0:(i=(a-n+(a-t))/2,i/=Math.sqrt((a-n)*(a-n)+(a-t)*(n-t)),i=Math.acos(i),t>n&&(i=e-i),i/=e),[360*i,o,r]},N=function(e,t,n){var i,r,s,a,o,l;return void 0!==e&&e.length>=3&&(l=e,e=l[0],t=l[1],n=l[2]),e/=255,t/=255,n/=255,a=Math.min(e,t,n),s=Math.max(e,t,n),r=(s+a)/2,s===a?(o=0,i=Number.NaN):o=r<.5?(s-a)/(s+a):(s-a)/(2-s-a),e===s?i=(t-n)/(s-a):t===s?i=2+(n-e)/(s-a):n===s&&(i=4+(e-t)/(s-a)),i*=60,i<0&&(i+=360),[i,o,r]},_=function(){var e,t,n,i,r,s,a,o,l,u;return u=D(arguments),a=u[0],n=u[1],e=u[2],s=Math.min(a,n,e),r=Math.max(a,n,e),t=r-s,l=r/255,0===r?(i=Number.NaN,o=0):(o=t/r,a===r&&(i=(n-e)/t),n===r&&(i=2+(e-a)/t),e===r&&(i=4+(a-n)/t),i*=60,i<0&&(i+=360)),[i,o,l]},P=function(){var e,t,n,i,o,l,u;return u=D(arguments),n=u[0],t=u[1],e=u[2],n=L(n),t=L(t),e=L(e),i=R((.4124564*n+.3575761*t+.1804375*e)/r),o=R((.2126729*n+.7151522*t+.072175*e)/s),l=R((.0193339*n+.119192*t+.9503041*e)/a),[116*o-16,500*(i-o),200*(o-l)]},L=function(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},R=function(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29},M=function(){var e,t,n,i,r,s,a;return s=D(arguments),r=s[0],n=s[1],t=s[2],a=P(r,n,t),i=a[0],e=a[1],t=a[2],y(i,e,t)},u.scale=function(e,t){var n,i,r,s,a,o,l,c,h,d,p,f,g,m,v,y,b,x,w,E,k;return y="rgb",b=u("#ccc"),k=0,g=!1,f=[0,1],d=[],w=!1,E=[],v=0,m=1,p=!1,x=0,h={},o=function(e,t){var n,i,r,s,o,l,c;if(null==e&&(e=["#ddd","#222"]),null!=e&&"string"===j(e)&&null!=(null!=(o=u.brewer)?o[e]:void 0)&&(e=u.brewer[e]),"array"===j(e)){for(e=e.slice(0),n=r=0,l=e.length-1;0<=l?r<=l:r>=l;n=0<=l?++r:--r)i=e[n],"string"===j(i)&&(e[n]=u(i));if(null!=t)E=t;else for(E=[],n=s=0,c=e.length-1;0<=c?s<=c:s>=c;n=0<=c?++s:--s)E.push(n/(e.length-1))}return a(),d=e},l=function(e){return null==e&&(e=[]),f=e,v=e[0],m=e[e.length-1],a(),x=2===e.length?0:e.length-1},r=function(e){var t,n;if(null!=f){for(n=f.length-1,t=0;t<n&&e>=f[t];)t++;return t-1}return 0},c=function(e){return e},n=function(e){var t,n,i,s,a;return a=e,f.length>2&&(s=f.length-1,t=r(e),i=f[0]+(f[1]-f[0])*(0+.5*k),n=f[s-1]+(f[s]-f[s-1])*(1-.5*k),a=v+(f[t]+.5*(f[t+1]-f[t])-i)/(n-i)*(m-v)),a},s=function(e,t){var n,i,s,a,o,l,p,g,w;if(null==t&&(t=!1),isNaN(e))return b;if(t?p=e:f.length>2?(n=r(e),p=n/(x-1)):(p=s=(e-v)/(m-v),p=Math.min(1,Math.max(0,p))),t||(p=c(p)),o=Math.floor(1e4*p),h[o])i=h[o];else{if("array"===j(d))for(a=g=0,w=E.length-1;0<=w?g<=w:g>=w;a=0<=w?++g:--g){if(l=E[a],p<=l){i=d[a];break}if(p>=l&&a===E.length-1){i=d[a];break}if(p>l&&p<E[a+1]){p=(p-l)/(E[a+1]-l),i=u.interpolate(d[a],d[a+1],p,y);break}}else"function"===j(d)&&(i=d(p));h[o]=i}return i},a=function(){return h={}},o(e,t),i=function(e){var t;return t=s(e),w&&t[w]?t[w]():t},i.domain=function(e,t,n,r){var s;return null==n&&(n="e"),arguments.length?(null!=t&&(s=u.analyze(e,r),
e=0===t?[s.min,s.max]:u.limits(s,n,t)),l(e),i):f},i.mode=function(e){return arguments.length?(y=e,a(),i):y},i.range=function(e,t){return o(e,t),i},i.out=function(e){return w=e,i},i.spread=function(e){return arguments.length?(k=e,i):k},i.correctLightness=function(e){return arguments.length?(p=e,a(),c=p?function(e){var t,n,i,r,a,o,l,u,c;for(t=s(0,!0).lab()[0],n=s(1,!0).lab()[0],l=t>n,i=s(e,!0).lab()[0],a=t+(n-t)*e,r=i-a,u=0,c=1,o=20;Math.abs(r)>.01&&o-- >0;)!function(){return l&&(r*=-1),r<0?(u=e,e+=.5*(c-e)):(c=e,e+=.5*(u-e)),i=s(e,!0).lab()[0],r=i-a}();return e}:function(e){return e},i):p},i.colors=function(t){var n,r,s,a,o,l;if(null==t&&(t="hex"),e=[],r=[],f.length>2)for(n=s=1,l=f.length;1<=l?s<l:s>l;n=1<=l?++s:--s)r.push(.5*(f[n-1]+f[n]));else r=f;for(a=0,o=r.length;a<o;a++)n=r[a],e.push(i(n)[t]());return e},i},null==(I=u.scales)&&(u.scales={}),u.scales.cool=function(){return u.scale([u.hsl(180,1,.9),u.hsl(250,.7,.4)])},u.scales.hot=function(){return u.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},u.analyze=function(e,t,n){var i,r,s,a,o,l,c;if(s={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),i=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},o=function(e,r){if(n(e,r))return i(null!=t&&"function"===j(t)?t(e):null!=t&&"string"===j(t)||"number"===j(t)?e[t]:e)},"array"===j(e))for(l=0,c=e.length;l<c;l++)a=e[l],o(a);else for(r in e)a=e[r],o(a,r);return s.domain=[s.min,s.max],s.limits=function(e,t){return u.limits(s,e,t)},s},u.limits=function(e,t,n){var i,r,s,a,o,l,c,h,d,p,f,g,m,v,y,b,x,w,E,k,S,T,C,A,N,_,P,M,L,O,j,D,R,$,I,z,F,H,B,q,W,U,V,X,Y,G,K,J,Q,Z,ee,te,ne,ie,re,se;if(null==t&&(t="equal"),null==n&&(n=7),null==e.values&&(e=u.analyze(e)),m=e.min,f=e.max,C=e.sum,_=e.values.sort(function(e,t){return e-t}),p=[],"c"===t.substr(0,1)&&(p.push(m),p.push(f)),"e"===t.substr(0,1)){for(p.push(m),c=P=1,F=n-1;1<=F?P<=F:P>=F;c=1<=F?++P:--P)p.push(m+c/n*(f-m));p.push(f)}else if("l"===t.substr(0,1)){if(m<=0)throw"Logarithmic scales are only possible for values > 0";for(v=Math.LOG10E*Math.log(m),g=Math.LOG10E*Math.log(f),p.push(m),c=M=1,X=n-1;1<=X?M<=X:M>=X;c=1<=X?++M:--M)p.push(Math.pow(10,v+c/n*(g-v)));p.push(f)}else if("q"===t.substr(0,1)){for(p.push(m),c=L=1,Y=n-1;1<=Y?L<=Y:L>=Y;c=1<=Y?++L:--L)E=_.length*c/n,k=Math.floor(E),k===E?p.push(_[k]):(S=E-k,p.push(_[k]*S+_[k+1]*(1-S)));p.push(f)}else if("k"===t.substr(0,1)){for(b=_.length,i=new Array(b),o=new Array(n),T=!0,x=0,s=null,s=[],s.push(m),c=O=1,G=n-1;1<=G?O<=G:O>=G;c=1<=G?++O:--O)s.push(m+c/n*(f-m));for(s.push(f);T;){for(h=j=0,K=n-1;0<=K?j<=K:j>=K;h=0<=K?++j:--j)o[h]=0;for(c=D=0,J=b-1;0<=J?D<=J:D>=J;c=0<=J?++D:--D){for(N=_[c],y=Number.MAX_VALUE,h=R=0,Q=n-1;0<=Q?R<=Q:R>=Q;h=0<=Q?++R:--R)l=Math.abs(s[h]-N),l<y&&(y=l,r=h);o[r]++,i[c]=r}for(w=new Array(n),h=$=0,Z=n-1;0<=Z?$<=Z:$>=Z;h=0<=Z?++$:--$)w[h]=null;for(c=I=0,ee=b-1;0<=ee?I<=ee:I>=ee;c=0<=ee?++I:--I)a=i[c],null===w[a]?w[a]=_[c]:w[a]+=_[c];for(h=z=0,H=n-1;0<=H?z<=H:z>=H;h=0<=H?++z:--z)w[h]*=1/o[h];for(T=!1,h=te=0,B=n-1;0<=B?te<=B:te>=B;h=0<=B?++te:--te)if(w[h]!==s[c]){T=!0;break}s=w,x++,x>200&&(T=!1)}for(d={},h=ne=0,q=n-1;0<=q?ne<=q:ne>=q;h=0<=q?++ne:--ne)d[h]=[];for(c=ie=0,W=b-1;0<=W?ie<=W:ie>=W;c=0<=W?++ie:--ie)a=i[c],d[a].push(_[c]);for(A=[],h=re=0,U=n-1;0<=U?re<=U:re>=U;h=0<=U?++re:--re)A.push(d[h][0]),A.push(d[h][d[h].length-1]);for(A=A.sort(function(e,t){return e-t}),p.push(A[0]),c=se=1,V=A.length-1;se<=V;c=se+=2)isNaN(A[c])||p.push(A[c])}return p},u.brewer=l={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},u.colors=h={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},j=function(){var e,t,n,i,r;for(e={},r="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,i=r.length;n<i;n++)t=r[n],e["[object "+t+"]"]=t.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),k=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},D=function(e){return e.length>=3?e:e[0]},i=2*Math.PI,n=Math.PI/3,d=Math.cos,o=function(e){var t,n,i,r,s,a,l,c,h,d,p;return e=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)r=e[t],i.push(u(r));return i}(),2===e.length?(h=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)r=e[t],i.push(r.lab());return i}(),s=h[0],a=h[1],t=function(e){var t,n;return n=function(){var n,i;for(i=[],t=n=0;n<=2;t=++n)i.push(s[t]+e*(a[t]-s[t]));return i}(),u.lab.apply(u,n)}):3===e.length?(d=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)r=e[t],i.push(r.lab());return i}(),s=d[0],a=d[1],l=d[2],t=function(e){var t,n;return n=function(){var n,i;for(i=[],t=n=0;n<=2;t=++n)i.push((1-e)*(1-e)*s[t]+2*(1-e)*e*a[t]+e*e*l[t]);return i}(),u.lab.apply(u,n)}):4===e.length?(p=function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)r=e[t],i.push(r.lab());return i}(),s=p[0],a=p[1],l=p[2],c=p[3],t=function(e){var t,n;return n=function(){var n,i;for(i=[],t=n=0;n<=2;t=++n)i.push((1-e)*(1-e)*(1-e)*s[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*l[t]+e*e*e*c[t]);return i}(),u.lab.apply(u,n)}):5===e.length&&(n=o(e.slice(0,3)),i=o(e.slice(2,5)),t=function(e){return e<.5?n(2*e):i(2*(e-.5))}),t},u.interpolate.bezier=o}.call(this),!function(e,t,n){"use strict";function i(){}function r(t){return"[object Array]"===e.prototype.toString.call(t)}function s(e,t){return Array.prototype.slice.call(e,t)}function a(e,t,n){e&&y(function(){e.apply(n||null,t||[])})}function o(e){function t(){n||(n=!0,(e||i).apply(null,arguments))}var n;return t.discard=function(){n=!0},t}function l(e,t,n){var i=e.shift();return i?(n&&n.discard(),a(t,[i]),!0):void 0}function u(){var e=s(arguments),t=e.shift();return function(){var n=s(arguments);t.apply(t,e.concat(n))}}function c(e,t){function n(){var t=s(arguments),r=e.shift();if(r){if(l(t,i))return;t.push(o(n)),a(r,t)}else a(i,arguments)}var i=o(t);n()}function h(t,n,i){function u(e,n){function i(){var t=s(arguments);l(t,c)||(p[e]=t.shift(),n())}a(t[e],[i])}i||(i=n,n=w);var c=o(i),h=v(u,n),d=e.keys(t),p=r(t)?[]:{};h.unshift(d),h.on("drain",function(){c(null,p)})}function d(e,t){h(e,x,t)}function p(t,n,i){var s=function(i,s,a,o){var l=arguments;2===l.length&&(a=s,s=w),3===l.length&&"number"!=typeof s&&(o=a,a=s,s=w);var u=e.keys(i),c=r(i)?[]:{};u.forEach(function(e){c[e]=function(t){3===a.length?a(i[e],e,t):a(i[e],t)}}),h(c,t||s,n?n(i,o):o)};return i||(s.series=p(x,n,!0)),s}function f(e){function t(e,t){return function(e){t(e)}}return p(e,t)}function g(t){function n(t,n){return function(i,s){function a(e,t){return!!s[t]}function o(){var n={};return e.keys(t).forEach(function(e){a(null,e)&&(n[e]=t[e])}),n}return i?void n(i):void n(null,r(s)?t.filter(a):o())}}return p(t,n)}function m(e,t){var i=t||{},r={};return e===n&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete r[t];else if(0===i)r={};else{var s=r[t];if(!s)return e;s.splice(s.indexOf(n),1)}return e},e.emit=function(){var t=this,n=s(arguments),o=n.shift(),l=r[o];if("error"===o&&i["throws"]!==!1&&!l)throw 1===n.length?n[0]:n;return l?(r[o]=l.filter(function(e){return i.async?a(e,n,t):e.apply(t,n),!e._once}),e):e},e}function v(t,n){function i(e,t,n){var i=r(t)?t:[t];i.forEach(function(t){h[e]({t:t,done:n})}),a(l)}function l(){if(!(c||d>=p)){if(!h.length)return void(0===d&&f.emit("drain"));d++;var e=h.pop();t(e.t,o(u.bind(null,e))),a(l)}}function u(e){d--,a(e.done,s(arguments,1)),a(l)}var c,h=[],d=0,p=n||1,f=m({push:i.bind(null,"push"),unshift:i.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,a(l)},pending:h});return e.defineProperty&&!e.definePropertyPartial&&e.defineProperty(f,"length",{get:function(){return h.length}}),f}var y,b=""+n,x=1,w=1/0,E="function"==typeof setImmediate;y=E?function(e){setImmediate(e)}:typeof process!==b&&process.nextTick?process.nextTick:function(e){setTimeout(e,0)};var k={curry:u,concurrent:h,series:d,waterfall:c,each:f(),map:p(),filter:g(),queue:v,emitter:m};typeof module!==b&&module.exports?module.exports=k:t.contra=k}(Object,this),!function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():window.Sortable=e()}(function(){"use strict";function e(e,n){this.el=e,this.options=n=n||{};var i={group:Math.random(),store:null,handle:null,draggable:e.children[0]&&e.children[0].nodeName||(/[uo]l/i.test(e.nodeName)?"li":"*"),ghostClass:"sortable-ghost",ignore:"a, img",filter:null};for(var s in i)n[s]=n[s]||i[s];M.forEach(function(i){n[i]=t(this,n[i]||L),r(e,i.substr(2).toLowerCase(),n[i])},this),e[k]=n.group;for(var a in this)"_"===a.charAt(0)&&(this[a]=t(this,this[a]));r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),A&&r(e,"selectstart",this._onTapStart),r(e,"dragover",this._onDragOver),r(e,"dragenter",this._onDragOver),j.push(this._onDragOver),n.store&&this.sort(n.store.get(this))}function t(e,t){var n=O.call(arguments,2);return t.bind?t.bind.apply(t,[e].concat(n)):function(){return t.apply(e,n.concat(O.call(arguments)))}}function n(e,t,n){if("*"===t)return e;if(e){n=n||T,t=t.split(".");var i=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")\\s","g");do if(!(""!==i&&e.nodeName!=i||t.length&&((" "+e.className+" ").match(r)||[]).length!=t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer.dropEffect="move",e.preventDefault()}function r(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=i+(n?" "+t:"")}}function o(e,t,n){if(e&&e.style){if(void 0===n)return T.defaultView&&T.defaultView.getComputedStyle?n=T.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];e.style[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,s=i.length;if(n)for(;s>r;r++)n(i[r],r);return i}return[]}function u(e){return e.draggable=!1}function c(){N=!1}function h(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5}function d(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}var p,f,g,m,v,y,b,x,w,E,k="Sortable"+(new Date).getTime(),S=window,T=S.document,C=S.parseInt,A=!!T.createElement("div").dragDrop,N=!1,_=function(e,t){var n=T.createEvent("Event");return n.initEvent(e,!0,!0),n.item=t,n},P=function(e,t,n){e.dispatchEvent(_(t,n||e))},M="onAdd onUpdate onRemove onStart onEnd onFilter".split(" "),L=function(){},O=[].slice,j=[];return e.prototype={constructor:e,_applyEffects:function(){a(p,this.options.ghostClass,!0)},_onTapStart:function(e){var t=e.touches&&e.touches[0],s=(t||e).target,a=this.options,o=this.el,c=a.filter;if("mousedown"!==e.type||0===e.button){if("function"==typeof c){if(c.call(this,s,this))return void P(o,"filter",s)}else if(c&&(c=c.split(",").filter(function(e){return n(s,e.trim(),o)}),c.length))return void P(o,"filter",s);if(a.handle&&(s=n(s,a.handle,o)),s=n(s,a.draggable,o),s&&"selectstart"==e.type&&"A"!=s.tagName&&"IMG"!=s.tagName&&s.dragDrop(),s&&!p&&s.parentNode===o){w=e,g=this.el,p=s,m=p.nextSibling,x=this.options.group,p.draggable=!0,a.ignore.split(",").forEach(function(e){l(s,e.trim(),u)}),t&&(w={target:s,clientX:t.clientX,clientY:t.clientY},this._onDragStart(w,!0),e.preventDefault()),r(T,"mouseup",this._onDrop),r(T,"touchend",this._onDrop),r(T,"touchcancel",this._onDrop),r(this.el,"dragstart",this._onDragStart),r(this.el,"dragend",this._onDrop),r(T,"dragover",i);try{T.selection?T.selection.empty():window.getSelection().removeAllRanges()}catch(h){}P(p,"start")}}},_emulateDragOver:function(){if(E){o(f,"display","none");var e=T.elementFromPoint(E.clientX,E.clientY),t=e,n=this.options.group,i=j.length;if(t)do{if(t[k]===n){for(;i--;)j[i]({clientX:E.clientX,clientY:E.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);o(f,"display","")}},_onTouchMove:function(e){if(w){var t=e.touches[0],n=t.clientX-w.clientX,i=t.clientY-w.clientY,r="translate3d("+n+"px,"+i+"px,0)";E=t,o(f,"webkitTransform",r),o(f,"mozTransform",r),o(f,"msTransform",r),o(f,"transform",r),e.preventDefault()}},_onDragStart:function(e,t){var n=e.dataTransfer;if(this._offUpEvents(),t){var i,s=p.getBoundingClientRect(),a=o(p);f=p.cloneNode(!0),o(f,"top",s.top-C(a.marginTop,10)),o(f,"left",s.left-C(a.marginLeft,10)),o(f,"width",s.width),o(f,"height",s.height),o(f,"opacity","0.8"),o(f,"position","fixed"),o(f,"zIndex","100000"),g.appendChild(f),i=f.getBoundingClientRect(),o(f,"width",2*s.width-i.width),o(f,"height",2*s.height-i.height),r(T,"touchmove",this._onTouchMove),r(T,"touchend",this._onDrop),r(T,"touchcancel",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else n.effectAllowed="move",n.setData("Text",p.textContent),r(T,"drop",this._onDrop);setTimeout(this._applyEffects)},_onDragOver:function(e){if(!N&&x===this.options.group&&(void 0===e.rootEl||e.rootEl===this.el)){var t=this.el,i=n(e.target,this.options.draggable,t);if(0===t.children.length||t.children[0]===f||t===e.target&&h(t,e))t.appendChild(p);else if(i&&i!==p&&void 0!==i.parentNode[k]){v!==i&&(v=i,y=o(i),b=i.getBoundingClientRect());var r,s=b,a=s.right-s.left,l=s.bottom-s.top,u=/left|right|inline/.test(y.cssFloat+y.display),d=i.offsetWidth>p.offsetWidth,g=i.offsetHeight>p.offsetHeight,m=(u?(e.clientX-s.left)/a:(e.clientY-s.top)/l)>.5,w=i.nextElementSibling;N=!0,setTimeout(c,30),r=u?i.previousElementSibling===p&&!d||m&&d:w!==p&&!g||m&&g,r&&!w?t.appendChild(p):i.parentNode.insertBefore(p,r?w:i)}}},_offUpEvents:function(){s(T,"mouseup",this._onDrop),s(T,"touchmove",this._onTouchMove),s(T,"touchend",this._onDrop),s(T,"touchcancel",this._onDrop)},_onDrop:function(e){clearInterval(this._loopId),s(T,"drop",this._onDrop),s(T,"dragover",i),s(this.el,"dragend",this._onDrop),s(this.el,"dragstart",this._onDragStart),s(this.el,"selectstart",this._onTapStart),this._offUpEvents(),e&&(e.preventDefault(),e.stopPropagation(),f&&f.parentNode.removeChild(f),p&&(u(p),a(p,this.options.ghostClass,!1),g.contains(p)?p.nextSibling!==m&&P(p,"update"):(P(g,"remove",p),P(p,"add")),P(p,"end")),g=p=f=m=w=E=v=y=x=null,this.options.store&&this.options.store.set(this))},toArray:function(){for(var e,t=[],i=this.el.children,r=0,s=i.length;s>r;r++)e=i[r],n(e,this.options.draggable,this.el)&&t.push(e.getAttribute("data-id")||d(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,r){var s=i.children[r];n(s,this.options.draggable,i)&&(t[e]=s)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},destroy:function(){var e=this.el,t=this.options;M.forEach(function(n){s(e,n.substr(2).toLowerCase(),t[n])}),s(e,"mousedown",this._onTapStart),s(e,"touchstart",this._onTapStart),s(e,"selectstart",this._onTapStart),s(e,"dragover",this._onDragOver),s(e,"dragenter",this._onDragOver),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),j.splice(j.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},e.utils={on:r,off:s,css:o,find:l,bind:t,closest:n,toggleClass:a,createEvent:_,dispatchEvent:P},e.version="0.5.2",e}),function(e){"use strict";var t={},n=function(e){var i,r,s,a,o;n.classes.dispatcher.extend(this);var l=this,u=e||{};if("string"==typeof u||u instanceof HTMLElement?u={renderers:[u]}:"[object Array]"===Object.prototype.toString.call(u)&&(u={renderers:u}),a=u.renderers||u.renderer||u.container,u.renderers&&0!==u.renderers.length||("string"==typeof a||a instanceof HTMLElement||"object"==typeof a&&"container"in a)&&(u.renderers=[a]),u.id){if(t[u.id])throw'sigma: Instance "'+u.id+'" already exists.';Object.defineProperty(this,"id",{value:u.id})}else{for(o=0;t[o];)o++;Object.defineProperty(this,"id",{value:""+o})}for(t[this.id]=this,this.settings=new n.classes.configurable(n.settings,u.settings||{}),Object.defineProperty(this,"graph",{value:new n.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,n={};for(t in e.data)n[t]=e.data[t];n.renderer=e.target,this.dispatchEvent(e.type,n)}.bind(this),s=u.renderers||[],i=0,r=s.length;i<r;i++)this.addRenderer(s[i]);for(s=u.middlewares||[],i=0,r=s.length;i<r;i++)this.middlewares.push("string"==typeof s[i]?n.middlewares[s[i]]:s[i]);"object"==typeof u.graph&&u.graph&&(this.graph.read(u.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(n.prototype.addCamera=function(t){var i,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return i=new n.classes.camera(t,this.graph,this.settings),this.cameras[t]=i,i.quadtree=new n.classes.quad,n.classes.edgequad!==e&&(i.edgequadtree=new n.classes.edgequad),i.bind("coordinatesUpdated",function(e){r.renderCamera(i,i.isAnimated)}),this.renderersPerCamera[t]=[],i},n.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,n,i=this.renderersPerCamera[e.id];for(n=i.length,t=n-1;t>=0;t--)this.killRenderer(i[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},n.prototype.addRenderer=function(e){var t,i,r,s,a=e||{};if("string"==typeof a?a={container:document.getElementById(a)}:a instanceof HTMLElement&&(a={container:a}),"string"==typeof a.container&&(a.container=document.getElementById(a.container)),"id"in a)t=a.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(i="function"==typeof a.type?a.type:n.renderers[a.type],i=i||n.renderers.def,r="camera"in a?a.camera instanceof n.classes.camera?a.camera:this.cameras[a.camera]||this.addCamera(a.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return s=new i(this.graph,r,this.settings,a),this.renderers[t]=s,Object.defineProperty(s,"id",{value:t}),s.bind&&s.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(s),s},n.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],n=t.indexOf(e);return n>=0&&t.splice(n,1),e.kill&&e.kill(),delete this.renderers[e.id],this},n.prototype.refresh=function(t){var i,r,s,a,o,l,u=0;for(t=t||{},a=this.middlewares||[],i=0,r=a.length;i<r;i++)a[i].call(this,0===i?"":"tmp"+u+":",i===r-1?"ready:":"tmp"+ ++u+":");for(s in this.cameras)o=this.cameras[s],o.settings("autoRescale")&&this.renderersPerCamera[o.id]&&this.renderersPerCamera[o.id].length?n.middlewares.rescale.call(this,a.length?"ready:":"",o.readPrefix,{width:this.renderersPerCamera[o.id][0].width,height:this.renderersPerCamera[o.id][0].height}):n.middlewares.copy.call(this,a.length?"ready:":"",o.readPrefix),t.skipIndexation||(l=n.utils.getBoundaries(this.graph,o.readPrefix),o.quadtree.index(this.graph.nodes(),{prefix:o.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),o.edgequadtree!==e&&o.settings("drawEdges")&&o.settings("enableEdgeHovering")&&o.edgequadtree.index(this.graph,{prefix:o.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(a=Object.keys(this.renderers),i=0,r=a.length;i<r;i++)if(this.renderers[a[i]].process)if(this.settings("skipErrors"))try{this.renderers[a[i]].process()}catch(c){console.log('Warning: The renderer "'+a[i]+'" crashed on ".process()"')}else this.renderers[a[i]].process();return this.render(),this},n.prototype.render=function(){var e,t,n;for(n=Object.keys(this.renderers),e=0,t=n.length;e<t;e++)if(this.settings("skipErrors"))try{this.renderers[n[e]].render()}catch(i){this.settings("verbose")&&console.log('Warning: The renderer "'+n[e]+'" crashed on ".render()"')}else this.renderers[n[e]].render();return this},n.prototype.renderCamera=function(e,t){var n,i,r,s=this;if(t)for(r=this.renderersPerCamera[e.id],n=0,i=r.length;n<i;n++)if(this.settings("skipErrors"))try{r[n].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[n].id+'" crashed on ".render()"')}else r[n].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],n=0,i=r.length;n<i;n++)if(this.settings("skipErrors"))try{r[n].render()}catch(a){this.settings("verbose")&&console.log('Warning: The renderer "'+r[n].id+'" crashed on ".render()"')}else r[n].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete s.cameraFrames[e.id]})}return this},n.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},n.instances=function(e){return arguments.length?t[e]:n.utils.extend({},t)},n.version="1.0.3","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=n}.call(this),function(e){"use strict";function t(e,n){var i,r,s,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(a=Array.isArray(e)?e:e.split(/ /),i=0,r=a.length;i!==r;i+=1)s=a[i],N[s]||(N[s]=[]),N[s].push({handler:n})}function n(e,t){var n,i,r,s,a,o,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(n=0,i=l.length;n!==i;n+=1){if(o=l[n],N[o]){for(a=[],r=0,s=N[o].length;r!==s;r+=1)N[o][r].handler!==t&&a.push(N[o][r]);N[o]=a}N[o]&&0===N[o].length&&delete N[o]}else for(n=0,i=l.length;n!==i;n+=1)delete N[l[n]];else N=Object.create(null)}function i(e,t){var n,i,r,s,a,o,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,n=0,r=l.length;n!==r;n+=1)if(o=l[n],N[o])for(a={type:o,data:t||{}},i=0,s=N[o].length;i!==s;i+=1)try{N[o][i].handler(a)}catch(u){}}function r(){var e,t,n,i,r=!1,s=y(),a=k.shift();if(n=a.job(),s=y()-s,a.done++,a.time+=s,a.currentTime+=s,a.weightTime=a.currentTime/(a.weight||1),a.averageTime=a.time/a.done,i=a.count?a.count<=a.done:!n,!i){for(e=0,t=k.length;e<t;e++)if(k[e].weightTime>a.weightTime){k.splice(e,0,a),r=!0;break}r||k.push(a)}return i?a:null}function s(e){var t=k.length;E[e.id]=e,e.status="running",t&&(e.weightTime=k[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=y(),i("jobStarted",m(e)),k.push(e)}function a(){var e,t,n;for(e in w)t=w[e],t.after?S[e]=t:s(t),delete w[e];for(x=!!k.length;k.length&&y()-b<A.frameDuration;)if(n=r()){l(n.id);for(e in S)S[e].after===n.id&&(s(S[e]),delete S[e])}x?(b=y(),i("enterFrame"),setTimeout(a,0)):i("stop")}function o(e,t){var n,r,s;if(Array.isArray(e)){for(C=!0,n=0,r=e.length;n<r;n++)o(e[n].id,g(e[n],t));C=!1,x||(b=y(),i("start"),a())}else if("object"==typeof e)if("string"==typeof e.id)o(e.id,e);else{C=!0;for(n in e)"function"==typeof e[n]?o(n,g({job:e[n]},t)):o(n,g(e[n],t));C=!1,x||(b=y(),i("start"),a())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(c(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)s={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");s=g({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}w[e]=s,i("jobAdded",m(s)),x||C||(b=y(),i("start"),a())}return this}function l(e){var t,n,r,s,a=!1;if(Array.isArray(e))for(t=0,n=e.length;t<n;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[E,S,w],t=0,n=r.length;t<n;t++)e in r[t]&&(s=r[t][e],A.history&&(s.status="done",T.push(s)),i("jobEnded",m(s)),delete r[t][e],"function"==typeof s.end&&s.end(),a=!0);for(r=k,t=0,n=r.length;t<n;t++)if(r[t].id===e){r.splice(t,1);break}if(!a)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function u(){var e,t=g(w,E,S);if(A.history)for(e in t)t[e].status="done",
T.push(t[e]),"function"==typeof t[e].end&&t[e].end();return w={},S={},E={},k=[],x=!1,this}function c(e){var t=w[e]||E[e]||S[e];return t?g(t):null}function h(e,t){var n;if("string"==typeof a1&&1===arguments.length)return A[a1];n="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(n[a1]=a2);for(var i in n)void 0!==n[i]?A[i]=n[i]:delete A[i];return this}function d(){return x}function p(){return T=[],this}function f(e,t){var n,i,r,s,a,o,l;if(!arguments.length){a=[];for(i in w)a.push(w[i]);for(i in S)a.push(S[i]);for(i in E)a.push(E[i]);a=a.concat(T)}if("string"==typeof e)switch(e){case"waiting":a=v(S);break;case"running":a=v(E);break;case"done":a=T;break;default:o=e}if(e instanceof RegExp&&(o=e),!o&&("string"==typeof t||t instanceof RegExp)&&(o=t),o){if(l="string"==typeof o,a instanceof Array)n=a;else if("object"==typeof a){n=[];for(i in a)n=n.concat(a[i])}else{n=[];for(i in w)n.push(w[i]);for(i in S)n.push(S[i]);for(i in E)n.push(E[i]);n=n.concat(T)}for(a=[],r=0,s=n.length;r<s;r++)(l?n[r].id===o:n[r].id.match(o))&&a.push(n[r])}return m(a)}function g(){var e,t,n={},i=arguments.length;for(e=i-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function m(e){var t,n,i;if(!e)return e;if(Array.isArray(e))for(t=[],n=0,i=e.length;n<i;n++)t.push(m(e[n]));else if("object"==typeof e){t={};for(n in e)t[n]=m(e[n])}else t=e;return t}function v(e){var t,n=[];for(t in e)n.push(e[t]);return n}function y(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var b,x=!1,w={},E={},k=[],S={},T=[],C=!1,A={frameDuration:20,history:!0},N=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var _={hasJob:c,addJob:o,killJob:l,killAll:u,settings:h,getStats:f,isRunning:d,clearHistory:p,bind:t,unbind:n,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports.conrad=_),e.conrad=_}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,n={},i=arguments.length;for(e=i-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}(),sigma.utils.floatColor=function(e){var t=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),t=3===e.length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),t=[+e[1],+e[2],+e[3]]),256*t[0]*256+256*t[1]+t[2]},sigma.utils.zoomTo=function(e,t,n,i,r){var s,a,o,l=e.settings;a=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*i)),a!==e.ratio&&(i=a/e.ratio,o={x:t*(1-i)+e.x,y:n*(1-i)+e.y,ratio:a},r&&r.duration?(s=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:s?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,o,r)):(e.goTo(o),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,n,i){return{x:(e+n)/2+(i-t)/4,y:(t+i)/2+(e-n)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,n,i,r,s,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*s+Math.pow(e,2)*i,y:Math.pow(1-e,2)*n+2*(1-e)*e*a+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,n,i,r,s,a,o,l){var u=Math.pow(1-e,3),c=3*e*Math.pow(1-e,2),h=3*Math.pow(e,2)*(1-e),d=Math.pow(e,3);return{x:u*t+c*s+h*o+d*i,y:u*n+c*a+h*l+d*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,n){return{x1:e-7*n,y1:t,x2:e,y2:t+7*n}},sigma.utils.getDistance=function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},sigma.utils.getCircleIntersection=function(e,t,n,i,r,s){var a,o,l,u,c,h,d,p,f;if(o=i-e,l=r-t,u=Math.sqrt(l*l+o*o),u>n+s)return!1;if(u<Math.abs(n-s))return!1;a=(n*n-s*s+u*u)/(2*u),p=e+o*a/u,f=t+l*a/u,c=Math.sqrt(n*n-a*a),h=-l*(c/u),d=o*(c/u);var g=p+h,m=p-h,v=f+d,y=f-d;return{xi:g,xi_prime:m,yi:v,yi_prime:y}},sigma.utils.isPointOnSegment=function(e,t,n,i,r,s,a){var o=Math.abs((t-i)*(r-n)-(e-n)*(s-i)),l=sigma.utils.getDistance(n,i,r,s),u=o/l;return u<a&&Math.min(n,r)<=e&&e<=Math.max(n,r)&&Math.min(i,s)<=t&&t<=Math.max(i,s)},sigma.utils.isPointOnQuadraticCurve=function(e,t,n,i,r,s,a,o,l){var u=sigma.utils.getDistance(n,i,r,s);if(Math.abs(e-n)>u||Math.abs(t-i)>u)return!1;for(var c,h=sigma.utils.getDistance(e,t,n,i),d=sigma.utils.getDistance(e,t,r,s),p=.5,f=h<d?-.01:.01,g=.001,m=100,v=sigma.utils.getPointOnQuadraticCurve(p,n,i,r,s,a,o),y=sigma.utils.getDistance(e,t,v.x,v.y);m-- >0&&p>=0&&p<=1&&y>l&&(f>g||f<-g);)c=y,v=sigma.utils.getPointOnQuadraticCurve(p,n,i,r,s,a,o),y=sigma.utils.getDistance(e,t,v.x,v.y),y>c?(f=-f/2,p+=f):p+f<0||p+f>1?(f/=2,y=c):p+=f;return y<l},sigma.utils.isPointOnBezierCurve=function(e,t,n,i,r,s,a,o,l,u,c){var h=sigma.utils.getDistance(n,i,a,o);if(Math.abs(e-n)>h||Math.abs(t-i)>h)return!1;for(var d,p=sigma.utils.getDistance(e,t,n,i),f=sigma.utils.getDistance(e,t,r,s),g=.5,m=p<f?-.01:.01,v=.001,y=100,b=sigma.utils.getPointOnBezierCurve(g,n,i,r,s,a,o,l,u),x=sigma.utils.getDistance(e,t,b.x,b.y);y-- >0&&g>=0&&g<=1&&x>c&&(m>v||m<-v);)d=x,b=sigma.utils.getPointOnBezierCurve(g,n,i,r,s,a,o,l,u),x=sigma.utils.getDistance(e,t,b.x,b.y),x>d?(m=-m/2,g+=m):g+m<0||g+m>1?(m/=2,x=d):g+=m;return x<c},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getWidth=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},sigma.utils.getHeight=function(t){var n=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof n&&n||n!==e&&n.baseVal!==e&&n.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,n=0;e;)n+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:n,left:t}},sigma.utils.doubleClick=function(e,t,n){var i,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],i=e._doubleClickHandler[t],i.push(function(e){return r++,2===r?(r=0,n(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,i[i.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var n,i=(e._doubleClickHandler||{})[t]||[];n=i.pop();)e.removeEventListener(t,n);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,n,i){var r,s=e.createShader(n);return e.shaderSource(s,t),e.compileShader(s),r=e.getShaderParameter(s,e.COMPILE_STATUS),r?s:(i&&i('Error compiling shader "'+s+'":'+e.getShaderInfoLog(s)),e.deleteShader(s),null)},sigma.utils.loadProgram=function(e,t,n,i,r){var s,a,o=e.createProgram();for(s=0;s<t.length;++s)e.attachShader(o,t[s]);if(n)for(s=0;s<n.length;++s)e.bindAttribLocation(o,locations?locations[s]:s,opt_attribs[s]);return e.linkProgram(o),a=e.getProgramParameter(o,e.LINK_STATUS),a?o:(r&&r("Error in program linking: "+e.getProgramInfoLog(o)),e.deleteProgram(o),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var n=Math.cos(e),i=Math.sin(e);return t?[n,-i,i,n]:[n,-i,0,i,n,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,n){var i=n?2:3,r=e[0*i+0],s=e[0*i+1],a=e[0*i+2],o=e[1*i+0],l=e[1*i+1],u=e[1*i+2],c=e[2*i+0],h=e[2*i+1],d=e[2*i+2],p=t[0*i+0],f=t[0*i+1],g=t[0*i+2],m=t[1*i+0],v=t[1*i+1],y=t[1*i+2],b=t[2*i+0],x=t[2*i+1],w=t[2*i+2];return n?[r*p+s*m,r*f+s*v,o*p+l*m,o*f+l*v]:[r*p+s*m+a*b,r*f+s*v+a*x,r*g+s*y+a*w,o*p+l*m+u*b,o*f+l*v+u*x,o*g+l*y+u*w,c*p+h*m+d*b,c*f+h*v+d*x,c*g+h*y+d*w]}}.call(this),function(e){"use strict";var t,n=0,i=["ms","moz","webkit","o"];for(t=0;t<i.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[i[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[t]+"CancelAnimationFrame"]||e[i[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,i){var r=(new Date).getTime(),s=Math.max(0,16-(r-n)),a=e.setTimeout(function(){t(r+s)},s);return n=r+s,a}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,n,i=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},n=function(){return r.apply(this instanceof t&&e?this:e,i.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,n.prototype=new t,n})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!1,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var n,i,r,s;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(s="string"==typeof e?e.split(" "):e,n=0,i=s.length;n!==i;n+=1)r=s[n],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var n,i,r,s,a,o,l,u="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(n=0,i=u.length;n!==i;n+=1){if(l=u[n],this._handlers[l]){for(o=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler!==t&&o.push(this._handlers[l][r]);this._handlers[l]=o}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(n=0,i=u.length;n!==i;n+=1)delete this._handlers[u[n]];return this},e.prototype.dispatchEvent=function(e,t){var n,i,r,s,a,o,l,u=this,c="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,n=0,i=c.length;n!==i;n+=1)if(l=c[n],this._handlers[l]){for(o=u.getEvent(l,t),a=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler(o),this._handlers[l][r].one||a.push(this._handlers[l][r]);this._handlers[l]=a}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,n){var i;for(i in e.prototype)e.prototype.hasOwnProperty(i)&&(t[i]=e.prototype[i]);e.apply(t,n)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,n,i={},r=Array.prototype.slice.call(arguments,0),s=function(e,a){var o,l;{if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof a)return a in(e||{})?e[a]:s(a);o="object"==typeof e&&void 0===a?e:{},"string"==typeof e&&(o[e]=a);for(l in o)i[l]=o[l];return this}if(e in i&&void 0!==i[e])return i[e];for(t=0,n=r.length;t<n;t++)if(e in r[t]&&void 0!==r[t][e])return r[t][e]}};for(s.embedObjects=function(){var t=r.concat(i).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,n=arguments.length;t<n;t++)s(arguments[t]);return s};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function t(e,t,n){var i=function(){var i,r;for(i in a[e])a[e][i].apply(t,arguments);r=n.apply(t,arguments);for(i in s[e])s[e][i].apply(t,arguments);return r};return i}var n=Object.create(null),i=Object.create(null),r=Object.create(null),s=Object.create(null),a=Object.create(null),o={immutable:!0,clone:!0},l=function(e){return o[e]},u=function(e){var i,s,a;a={settings:e||l,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(i in r)r[i].call(a);for(i in n)s=t(i,a,n[i]),this[i]=s,a[i]=s};sigma.utils.emptyObject=function(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e},u.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(n[e]||u[e])throw'The method "'+e+'" already exists.';return n[e]=t,s[e]=Object.create(null),a[e]=Object.create(null),this},u.hasMethod=function(e){return!(!n[e]&&!u[e])},u.attach=function(e,t,n,i){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof n||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var o;if("constructor"===e)o=r;else if(i){if(!a[e])throw'The method "'+e+'" does not exist.';o=a[e]}else{if(!s[e])throw'The method "'+e+'" does not exist.';o=s[e]}if(o[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return o[t]=n,this},u.attachBefore=function(e,t,n){return this.attach(e,t,n,!0)},u.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(i[e])throw'The index "'+e+'" already exists.';var n;i[e]=t;for(n in t)if("object"==typeof t[n])u.attach(n,e,t[n].fn,t[n].before);else{if("function"!=typeof t[n])throw"The bindings must be functions.";u.attach(n,e,t[n])}return this},u.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,n=e.id,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?Object.defineProperty(i,"id",{value:n,enumerable:!0}):i.id=n,this.inNeighborsCount[n]=0,this.outNeighborsCount[n]=0,this.allNeighborsCount[n]=0,this.nodesArray.push(i),this.nodesIndex[i.id]=i,this}),u.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,n=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(n[t]=e[t]);else n=e;return this.settings("immutable")?(Object.defineProperty(n,"id",{value:e.id,enumerable:!0}),Object.defineProperty(n,"source",{value:e.source,enumerable:!0}),Object.defineProperty(n,"target",{value:e.target,enumerable:!0})):(n.id=e.id,n.source=e.source,n.target=e.target),this.edgesArray.push(n),this.edgesIndex[n.id]=n,this.inNeighborsCount[n.target]++,this.outNeighborsCount[n.source]++,this.allNeighborsCount[n.target]++,this.allNeighborsCount[n.source]++,this}),u.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,n;for(delete this.nodesIndex[e],t=0,n=this.nodesArray.length;t<n;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);return delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e],this}),u.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,n,i;for(i=this.edgesIndex[e],delete this.edgesIndex[e],t=0,n=this.edgesArray.length;t<n;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return this.inNeighborsCount[i.target]--,this.outNeighborsCount[i.source]--,this.allNeighborsCount[i.source]--,this.allNeighborsCount[i.target]--,this}),u.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),u.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,sigma.utils.emptyObject(this.nodesIndex),sigma.utils.emptyObject(this.edgesIndex),sigma.utils.emptyObject(this.nodesIndex),sigma.utils.emptyObject(this.inNeighborsCount),sigma.utils.emptyObject(this.outNeighborsCount),sigma.utils.emptyObject(this.allNeighborsCount),this}),u.addMethod("read",function(e){var t,n,i;for(n=e.nodes||[],t=0,i=n.length;t<i;t++)this.addNode(n[t]);for(n=e.edges||[],t=0,i=n.length;t<i;t++)this.addEdge(n[t]);return this}),u.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,i=[];for(t=0,n=e.length;t<n;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";i.push(this.nodesIndex[e[t]])}return i}throw"nodes: Wrong arguments."}),u.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var n,i,r=[];for(n=0,i=e.length;n<i;n++){if("string"!=typeof e[n]&&"number"!=typeof e[n])throw"degree: Wrong arguments.";r.push(t[e[n]])}return r}throw"degree: Wrong arguments."}),u.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,n,i=[];for(t=0,n=e.length;t<n;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";i.push(this.edgesIndex[e[t]])}return i}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=u):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.graph=u):this.graph=u}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,n,i){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof i&&i?n.embedObject(i):n},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var n,i,r=t||{},s=["x","y","ratio","angle"];for(n=0,i=s.length;n<i;n++)if(r[s[n]]!==e){if("number"!=typeof r[s[n]]||isNaN(r[s[n]]))throw'Value for "'+s[n]+'" is not a number.';this[s[n]]=r[s[n]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,n,i){i=i||{},n=n!==e?n:this.prefix,t=t!==e?t:this.readPrefix;var r,s,a,o=i.nodes||this.graph.nodes(),l=i.edges||this.graph.edges(),u=Math.cos(this.angle),c=Math.sin(this.angle);for(r=0,s=o.length;r<s;r++)a=o[r],a[n+"x"]=(((a[t+"x"]||0)-this.x)*u+((a[t+"y"]||0)-this.y)*c)/this.ratio+(i.width||0)/2,a[n+"y"]=(((a[t+"y"]||0)-this.y)*u-((a[t+"x"]||0)-this.x)*c)/this.ratio+(i.height||0)/2,a[n+"size"]=(a[t+"size"]||0)/Math.pow(this.ratio,this.settings("nodesPowRatio"));for(r=0,s=l.length;r<s;r++)l[r][n+"size"]=(l[r][t+"size"]||0)/Math.pow(this.ratio,this.settings("edgesPowRatio"));return this},sigma.classes.camera.prototype.graphPosition=function(e,t,n){var i=0,r=0,s=Math.cos(this.angle),a=Math.sin(this.angle);return n||(i=-(this.x*s+this.y*a)/this.ratio,r=-(this.y*s-this.x*a)/this.ratio),{x:(e*s+t*a)/this.ratio+i,y:(t*s-e*a)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,n){var i=0,r=0,s=Math.cos(this.angle),a=Math.sin(this.angle);return n||(i=-(this.x*s+this.y*a)/this.ratio,r=-(this.y*s-this.x*a)/this.ratio),{x:((e-i)*s-(t-r)*a)*this.ratio,y:((t-r)*s+(e-i)*a)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),n=sigma.utils.matrices.translation(-this.x,-this.y),i=sigma.utils.matrices.multiply(n,sigma.utils.matrices.multiply(t,e));return i},sigma.classes.camera.prototype.getRectangle=function(e,t){var n=this.cameraPosition(e,0,!0),i=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),s=this.cameraPosition(e/4,0,!0).x,a=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-s,y1:this.y-r.y-a,x2:this.x-r.x+s+n.x,y2:this.y-r.y-a+n.y,height:Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y+2*a,2))}}}.call(this),function(e){"use strict";function t(e,t){var n=t.x+t.width/2,i=t.y+t.height/2,r=e.y<i,s=e.x<n;return r?s?0:1:s?2:3}function n(e,t){for(var n=[],i=0;i<4;i++)e.x2>=t[i][0].x&&e.x1<=t[i][1].x&&e.y1+e.height>=t[i][0].y&&e.y1<=t[i][2].y&&n.push(i);return n}function i(e,t){for(var n=[],i=0;i<4;i++)u.collision(e,t[i])&&n.push(i);return n}function r(e,t){var n,i,r=t.level+1,s=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),o=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=o,i=u;break;case 1:n=o+s,i=u;break;case 2:n=o,i=u+a;break;case 3:n=o+s,i=u+a}return l({x:n,y:i,width:s,height:a},r,t.maxElements,t.maxLevel)}function s(t,i,a){if(a.level<a.maxLevel)for(var o=n(i,a.corners),l=0,u=o.length;l<u;l++)a.nodes[o[l]]===e&&(a.nodes[o[l]]=r(o[l],a)),s(t,i,a.nodes[o[l]]);else a.elements.push(t)}function a(n,i){if(i.level<i.maxLevel){var r=t(n,i.bounds);return i.nodes[r]!==e?a(n,i.nodes[r]):[]}return i.elements}function o(t,n,i,r){if(r=r||{},n.level<n.maxLevel)for(var s=i(t,n.corners),a=0,l=s.length;a<l;a++)n.nodes[s[a]]!==e&&o(t,n.nodes[s[a]],i,r);else for(var u=0,c=n.elements.length;u<c;u++)r[n.elements[u].id]===e&&(r[n.elements[u].id]=n.elements[u]);return r}function l(e,t,n,i){return{level:t||0,bounds:e,corners:u.splitSquare(e),maxElements:n||20,maxLevel:i||4,elements:[],nodes:[]}}var u={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var i=[],r=[],s=0;s<4;s++){var a=this.projection(t[s],e),o=this.projection(n[s],e);i.push(a.x*e.x+a.y*e.y),r.push(o.x*e.x+o.y*e.y)}var l=Math.max.apply(Math,i),u=Math.max.apply(Math,r),c=Math.min.apply(Math,i),h=Math.min.apply(Math,r);return h<=l&&u>=c},collision:function(e,t){for(var n=this.axis(e,t),i=!0,r=0;r<4;r++)i*=this.axisCollision(n[r],e,t);return!!i}},c=function(){this._geom=u,this._tree=null,this._cache={query:!1,result:!1}};c.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var n=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var i=0,r=e.length;i<r;i++)s(e[i],u.pointToSquare({x:e[i][n+"x"],y:e[i][n+"y"],size:e[i][n+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},c.prototype.point=function(e,t){return this._tree?a({x:e,y:t},this._tree)||[]:[]},c.prototype.area=function(e){var t,r,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;u.isAxisAligned(e)?(t=n,r=u.axisAlignedTopPoints(e)):(t=i,r=u.rectangleCorners(e));var a=this._tree?o(r,this._tree,t):[],l=[];for(var c in a)l.push(a[c]);return this._cache.query=s,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=c):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.quad=c):this.quad=c}.call(this),function(e){"use strict";function t(e,t){var n=t.x+t.width/2,i=t.y+t.height/2,r=e.y<i,s=e.x<n;return r?s?0:1:s?2:3}function n(e,t){for(var n=[],i=0;i<4;i++)e.x2>=t[i][0].x&&e.x1<=t[i][1].x&&e.y1+e.height>=t[i][0].y&&e.y1<=t[i][2].y&&n.push(i);return n}function i(e,t){for(var n=[],i=0;i<4;i++)u.collision(e,t[i])&&n.push(i);return n}function r(e,t){var n,i,r=t.level+1,s=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),o=Math.round(t.bounds.x),u=Math.round(t.bounds.y);switch(e){case 0:n=o,i=u;break;case 1:n=o+s,i=u;break;case 2:n=o,i=u+a;break;case 3:n=o+s,i=u+a}return l({x:n,y:i,width:s,height:a},r,t.maxElements,t.maxLevel)}function s(t,i,a){if(a.level<a.maxLevel)for(var o=n(i,a.corners),l=0,u=o.length;l<u;l++)a.nodes[o[l]]===e&&(a.nodes[o[l]]=r(o[l],a)),s(t,i,a.nodes[o[l]]);else a.elements.push(t)}function a(n,i){if(i.level<i.maxLevel){var r=t(n,i.bounds);return i.nodes[r]!==e?a(n,i.nodes[r]):[]}return i.elements}function o(t,n,i,r){if(r=r||{},n.level<n.maxLevel)for(var s=i(t,n.corners),a=0,l=s.length;a<l;a++)n.nodes[s[a]]!==e&&o(t,n.nodes[s[a]],i,r);else for(var u=0,c=n.elements.length;u<c;u++)r[n.elements[u].id]===e&&(r[n.elements[u].id]=n.elements[u]);return r}function l(e,t,n,i){return{level:t||0,bounds:e,corners:u.splitSquare(e),maxElements:n||40,maxLevel:i||8,elements:[],nodes:[]}}var u={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var n=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),i=Math.min(e.x1,e.x2,n.x),r=Math.max(e.x1,e.x2,n.x),s=Math.min(e.y1,e.y2,n.y),a=Math.max(e.y1,e.y2,n.y);return{x1:i-e.size,y1:s-e.size,x2:r+e.size,y2:s-e.size,height:a-s+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),n=Math.min(e.x,t.x1,t.x2),i=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),s=Math.max(e.y,t.y1,t.y2);return{x1:n-e.size,y1:r-e.size,x2:i+e.size,y2:r-e.size,height:s-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),n=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:n.x,y:n.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2
},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var n=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:n*t.x,y:n*t.y}},axisCollision:function(e,t,n){for(var i=[],r=[],s=0;s<4;s++){var a=this.projection(t[s],e),o=this.projection(n[s],e);i.push(a.x*e.x+a.y*e.y),r.push(o.x*e.x+o.y*e.y)}var l=Math.max.apply(Math,i),u=Math.max.apply(Math,r),c=Math.min.apply(Math,i),h=Math.min.apply(Math,r);return h<=l&&u>=c},collision:function(e,t){for(var n=this.axis(e,t),i=!0,r=0;r<4;r++)i*=this.axisCollision(n[r],e,t);return!!i}},c=function(){this._geom=u,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};c.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var n,i,r,a,o,c=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var h=e.edges(),d=0,p=h.length;d<p;d++)i=e.nodes(h[d].source),r=e.nodes(h[d].target),o={x1:i[c+"x"],y1:i[c+"y"],x2:r[c+"x"],y2:r[c+"y"],size:h[d][c+"size"]||0},"curve"===h[d].type||"curvedArrow"===h[d].type?i.id===r.id?(a={x:i[c+"x"],y:i[c+"y"],size:i[c+"size"]||0},s(h[d],u.selfLoopToSquare(a),this._tree)):(n=sigma.utils.getQuadraticControlPoint(o.x1,o.y1,o.x2,o.y2),s(h[d],u.quadraticCurveToSquare(o,n),this._tree)):s(h[d],u.lineToSquare(o),this._tree);return this._cache={query:!1,result:!1},this._tree},c.prototype.point=function(e,t){return this._enabled&&this._tree?a({x:e,y:t},this._tree)||[]:[]},c.prototype.area=function(e){if(!this._enabled)return[];var t,r,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;u.isAxisAligned(e)?(t=n,r=u.axisAlignedTopPoints(e)):(t=i,r=u.rectangleCorners(e));var a=this._tree?o(r,this._tree,t):[],l=[];for(var c in a)l.push(a[c]);return this._cache.query=s,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=c):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.edgequad=c):this.edgequad=c}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,n){function i(e){var t,n,i;if(S("mouseEnabled")&&w.dispatchEvent("mousemove",{x:sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,y:sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),S("mouseEnabled")&&m)return v=!0,y=!0,x&&clearTimeout(x),x=setTimeout(function(){v=!1},S("dragTimeout")),sigma.misc.animation.killAll(k),k.isMoving=!0,i=k.cameraPosition(sigma.utils.getX(e)-f,sigma.utils.getY(e)-g,!0),t=c-i.x,n=h-i.y,t===k.x&&n===k.y||(d=k.x,p=k.y,k.goTo({x:t,y:n})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function r(e){if(S("mouseEnabled")&&m){m=!1,x&&clearTimeout(x),k.isMoving=!1;var t=sigma.utils.getX(e),n=sigma.utils.getY(e);v?(sigma.misc.animation.killAll(k),sigma.misc.animation.camera(k,{x:k.x+S("mouseInertiaRatio")*(k.x-d),y:k.y+S("mouseInertiaRatio")*(k.y-p)},{easing:"quadraticOut",duration:S("mouseInertiaDuration")})):f===t&&g===n||k.goTo({x:k.x,y:k.y}),w.dispatchEvent("mouseup",{x:t-sigma.utils.getWidth(e)/2,y:n-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),v=!1}}function s(e){if(S("mouseEnabled"))switch(c=k.x,h=k.y,d=k.x,p=k.y,f=sigma.utils.getX(e),g=sigma.utils.getY(e),y=!1,b=(new Date).getTime(),e.which){case 2:break;case 3:w.dispatchEvent("rightclick",{x:f-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey});break;default:m=!0,w.dispatchEvent("mousedown",{x:f-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey})}}function a(e){S("mouseEnabled")&&w.dispatchEvent("mouseout")}function o(e){return S("mouseEnabled")&&w.dispatchEvent("click",{x:sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,y:sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,isDragging:(new Date).getTime()-b>100&&y}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,n,i;if(S("mouseEnabled"))return n=1/S("doubleClickZoomingRatio"),w.dispatchEvent("doubleclick",{x:f-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),S("doubleClickEnabled")&&(t=k.cameraPosition(sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,!0),i={duration:S("doubleClickZoomDuration")},sigma.utils.zoomTo(k,t.x,t.y,n,i)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function u(e){var t,n,i;if(S("mouseEnabled")&&S("mouseWheelEnabled"))return n=sigma.utils.getDelta(e)>0?1/S("zoomingRatio"):S("zoomingRatio"),t=k.cameraPosition(sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,!0),i={duration:S("mouseZoomDuration")},sigma.utils.zoomTo(k,t.x,t.y,n,i),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var c,h,d,p,f,g,m,v,y,b,x,w=this,E=e,k=t,S=n;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(E,"click",l),E.addEventListener("DOMMouseScroll",u,!1),E.addEventListener("mousewheel",u,!1),E.addEventListener("mousemove",i,!1),E.addEventListener("mousedown",s,!1),E.addEventListener("click",o,!1),E.addEventListener("mouseout",a,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(E,"click"),E.removeEventListener("DOMMouseScroll",u),E.removeEventListener("mousewheel",u),E.removeEventListener("mousemove",i),E.removeEventListener("mousedown",s),E.removeEventListener("click",o),E.removeEventListener("mouseout",a),document.removeEventListener("mouseup",r)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,n){function i(e){var t=sigma.utils.getOffset(A);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(_("touchEnabled")){var t,n,r,s,a,o;switch(P=e.touches,P.length){case 1:N.isMoving=!0,E=1,l=N.x,u=N.y,d=N.x,p=N.y,a=i(P[0]),m=a.x,v=a.y;break;case 2:return N.isMoving=!0,E=2,a=i(P[0]),o=i(P[1]),t=a.x,r=a.y,n=o.x,s=o.y,d=N.x,p=N.y,c=N.angle,h=N.ratio,l=N.x,u=N.y,m=t,v=r,y=n,b=s,x=Math.atan2(b-v,y-m),w=Math.sqrt(Math.pow(b-v,2)+Math.pow(y-m,2)),e.preventDefault(),!1}}}function s(e){if(_("touchEnabled")){P=e.touches;var t=_("touchInertiaRatio");switch(T&&(k=!1,clearTimeout(T)),E){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:N.isMoving=!1,C.dispatchEvent("stopDrag"),k&&(S=!1,sigma.misc.animation.camera(N,{x:N.x+t*(N.x-d),y:N.y+t*(N.y-p)},{easing:"quadraticOut",duration:_("touchInertiaDuration")})),k=!1,E=0}}}function a(e){if(!S&&_("touchEnabled")){var t,n,r,s,a,o,A,M,L,O,j,D,R,$,I,z,F;switch(P=e.touches,k=!0,T&&clearTimeout(T),T=setTimeout(function(){k=!1},_("dragTimeout")),E){case 1:M=i(P[0]),t=M.x,r=M.y,O=N.cameraPosition(t-m,r-v,!0),$=l-O.x,I=u-O.y,$===N.x&&I===N.y||(d=N.x,p=N.y,N.goTo({x:$,y:I}),C.dispatchEvent("mousemove",{x:M.x-sigma.utils.getWidth(e)/2,y:M.y-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),C.dispatchEvent("drag"));break;case 2:M=i(P[0]),L=i(P[1]),t=M.x,r=M.y,n=L.x,s=L.y,j=N.cameraPosition((m+y)/2-sigma.utils.getWidth(e)/2,(v+b)/2-sigma.utils.getHeight(e)/2,!0),A=N.cameraPosition((t+n)/2-sigma.utils.getWidth(e)/2,(r+s)/2-sigma.utils.getHeight(e)/2,!0),D=Math.atan2(s-r,n-t)-x,R=Math.sqrt(Math.pow(s-r,2)+Math.pow(n-t,2))/w,t=j.x,r=j.y,z=h/R,t*=R,r*=R,F=c-D,a=Math.cos(-D),o=Math.sin(-D),n=t*a+r*o,s=r*a-t*o,t=n,r=s,$=t-A.x+l,I=r-A.y+u,z===N.ratio&&F===N.angle&&$===N.x&&I===N.y||(d=N.x,p=N.y,f=N.angle,g=N.ratio,N.goTo({x:$,y:I,angle:F,ratio:z}),C.dispatchEvent("drag"))}return e.preventDefault(),!1}}function o(e){var t,n,r;if(e.touches&&1===e.touches.length&&_("touchEnabled"))return S=!0,n=1/_("doubleClickZoomingRatio"),t=i(e.touches[0]),C.dispatchEvent("doubleclick",{x:t.x-sigma.utils.getWidth(e)/2,y:t.y-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),_("doubleClickEnabled")&&(t=N.cameraPosition(t.x-sigma.utils.getWidth(e)/2,t.y-sigma.utils.getHeight(e)/2,!0),r={duration:_("doubleClickZoomDuration"),onComplete:function(){S=!1}},sigma.utils.zoomTo(N,t.x,t.y,n,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}var l,u,c,h,d,p,f,g,m,v,y,b,x,w,E,k,S,T,C=this,A=e,N=t,_=n,P=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(A,"touchstart",o),A.addEventListener("touchstart",r,!1),A.addEventListener("touchend",s,!1),A.addEventListener("touchcancel",s,!1),A.addEventListener("touchleave",s,!1),A.addEventListener("touchmove",a,!1),this.kill=function(){sigma.utils.unbindDoubleClick(A,"touchstart"),A.addEventListener("touchstart",r),A.addEventListener("touchend",s),A.addEventListener("touchcancel",s),A.addEventListener("touchleave",s),A.addEventListener("touchmove",a)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.canvas: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var r,s,a,o;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=a.length;r<s;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var n,i,r,s,a,o,l,u,c,h,d,p,f,g={},m=this.graph,v=this.graph.nodes,y=(this.options.prefix||"",this.settings(t,"drawEdges")),b=this.settings(t,"drawNodes"),x=this.settings(t,"drawLabels"),w=this.settings(t,"drawEdgeLabels"),E=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(y=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)g[n[i].id]=n[i];if(y){for(n=m.edges(),i=0,s=n.length;i<s;i++)a=n[i],!g[a.source]&&!g[a.target]||a.hidden||v(a.source).hidden||v(a.target).hidden||this.edgesOnScreen.push(a);if(this.settings(t,"batchEdgesDrawing"))o="edges_"+this.conradId,p=E("canvasEdgesBatchSize"),h=this.edgesOnScreen,s=h.length,c=0,l=Math.min(h.length,c+p),u=function(){for(f=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",d=sigma.canvas.edges,i=c;i<l;i++)a=h[i],(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,m.nodes(a.source),m.nodes(a.target),this.contexts.edges,E);if(w)for(d=sigma.canvas.edges.labels,i=c;i<l;i++)a=h[i],a.hidden||(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,m.nodes(a.source),m.nodes(a.target),this.contexts.labels,E);return this.contexts.edges.globalCompositeOperation=f,l===h.length?(delete this.jobs[o],!1):(c=l+1,l=Math.min(h.length,c+p),!0)},this.jobs[o]=u,conrad.addJob(o,u.bind(this));else{for(d=sigma.canvas.edges,n=this.edgesOnScreen,i=0,s=n.length;i<s;i++)a=n[i],(d[a.type||this.settings(t,"defaultEdgeType")]||d.def)(a,m.nodes(a.source),m.nodes(a.target),this.contexts.edges,E);if(w)for(d=sigma.canvas.edges.labels,n=this.edgesOnScreen,i=0,s=n.length;i<s;i++)n[i].hidden||(d[n[i].type||this.settings(t,"defaultEdgeType")]||d.def)(n[i],m.nodes(n[i].source),m.nodes(n[i].target),this.contexts.labels,E)}}if(b)for(d=sigma.canvas.nodes,n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)n[i].hidden||(d[n[i].type||this.settings(t,"defaultNodeType")]||d.def)(n[i],this.contexts.nodes,E);if(x)for(d=sigma.canvas.labels,n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)n[i].hidden||(d[n[i].type||this.settings(t,"defaultNodeType")]||d.def)(n[i],this.contexts.labels,E);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var n=document.createElement(e);n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,n){var i,r=this.width,s=this.height,a=1;if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),r!==this.width||s!==this.height)for(i in this.domElements)this.domElements[i].style.width=t+"px",this.domElements[i].style.height=n+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.domElements[i].setAttribute("width",t*a+"px"),this.domElements[i].setAttribute("height",n*a+"px"),1!==a&&this.contexts[i].scale(a,a));return this},sigma.renderers.canvas.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.webgl: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var r,s,a,o;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(i,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=a.length;r<s;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,n,i,r,s,a=this.graph,o=sigma.utils.extend(o,this.options);for(i in this.nodeFloatArrays)delete this.nodeFloatArrays[i];for(i in this.edgeFloatArrays)delete this.edgeFloatArrays[i];for(e=a.edges(),t=0,n=e.length;t<n;t++)r=e[t].type||this.settings(o,"defaultEdgeType"),i=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[i]||(this.edgeFloatArrays[i]={edges:[]}),this.edgeFloatArrays[i].edges.push(e[t]);for(e=a.nodes(),t=0,n=e.length;t<n;t++)r=e[t].type||this.settings(o,"defaultNodeType"),i=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[i]||(this.nodeFloatArrays[i]={nodes:[]}),this.nodeFloatArrays[i].nodes.push(e[t]);for(i in this.edgeFloatArrays)for(s=sigma.webgl.edges[i],e=this.edgeFloatArrays[i].edges,t=0,n=e.length;t<n;t++)this.edgeFloatArrays[i].array||(this.edgeFloatArrays[i].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||s.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[i].array,t*s.POINTS*s.ATTRIBUTES,o.prefix,this.settings);for(i in this.nodeFloatArrays)for(s=sigma.webgl.nodes[i],e=this.nodeFloatArrays[i].nodes,t=0,n=e.length;t<n;t++)this.nodeFloatArrays[i].array||(this.nodeFloatArrays[i].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||s.addNode(e[t],this.nodeFloatArrays[i].array,t*s.POINTS*s.ATTRIBUTES,o.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var n,i,r,s,a,o,l=this,u=(this.graph,this.contexts.nodes),c=this.contexts.edges,h=this.camera.getMatrix(),d=sigma.utils.extend(t,this.options),p=this.settings(d,"drawLabels"),f=this.settings(d,"drawEdges"),g=this.settings(d,"drawNodes");this.resize(!1),this.settings(d,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(f=!1),this.clear(),h=sigma.utils.matrices.multiply(h,sigma.utils.matrices.translation(this.width/2,this.height/2));for(s in this.jobs)conrad.hasJob(s)&&conrad.killJob(s);if(f)if(this.settings(d,"batchEdgesDrawing"))(function(){var e,t,n,i,r,s,a,o,l;n="edges_"+this.conradId,l=this.settings(d,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,o=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,a=0,s=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES),i=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=o.initProgram(c)),a<s&&(c.useProgram(this.edgePrograms[e[t]]),o.render(c,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio"),start:a,count:s-a})),s>=r.length/o.ATTRIBUTES&&t===e.length-1?(delete this.jobs[n],!1):(s>=r.length/o.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,o=sigma.webgl.edges[e[t]],a=0,s=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES)):(a=s,s=Math.min(a+l*o.POINTS,r.length/o.ATTRIBUTES)),!0)},this.jobs[n]=i,conrad.addJob(n,i.bind(this)))}).call(this);else for(s in this.edgeFloatArrays)o=sigma.webgl.edges[s],this.edgePrograms[s]||(this.edgePrograms[s]=o.initProgram(c)),this.edgeFloatArrays[s]&&(c.useProgram(this.edgePrograms[s]),o.render(c,this.edgePrograms[s],this.edgeFloatArrays[s].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio")}));if(g){u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.enable(u.BLEND);for(s in this.nodeFloatArrays)o=sigma.webgl.nodes[s],this.nodePrograms[s]||(this.nodePrograms[s]=o.initProgram(u)),this.nodeFloatArrays[s]&&(u.useProgram(this.nodePrograms[s]),o.render(u,this.nodePrograms[s],this.nodeFloatArrays[s].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio")}))}if(p)for(n=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:n,edges:[],width:this.width,height:this.height}),a=function(e){return l.settings({prefix:l.camera.prefix},e)},i=0,r=n.length;i<r;i++)n[i].hidden||(sigma.canvas.labels[n[i].type||this.settings(d,"defaultNodeType")]||sigma.canvas.labels.def)(n[i],this.contexts.labels,a);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,n){var i=document.createElement(e),r=this;i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext(n?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),n&&(i.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),i.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,n){var i,r=this.width,s=this.height;if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),r!==this.width||s!==this.height)for(i in this.domElements)this.domElements[i].style.width=t+"px",this.domElements[i].style.height=n+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.contexts[i]&&this.contexts[i].scale?(this.domElements[i].setAttribute("width",t+"px"),this.domElements[i].setAttribute("height",n+"px")):(this.domElements[i].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[i].setAttribute("height",n*this.settings("webglOversamplingRatio")+"px")));for(i in this.contexts)this.contexts[i]&&this.contexts[i].viewport&&this.contexts[i].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,n,i){if("object"!=typeof i)throw"sigma.renderers.svg: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var r,s,a,o,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?n.embedObjects(i.settings):n,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=a.length;r<s;r++)o="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new o(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var n,i,r,s,a,o,l,u,c,h={},d=this.graph,p=this.graph.nodes,f=(this.options.prefix||"",this.settings(t,"drawEdges")),g=this.settings(t,"drawNodes"),m=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(f=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)h[n[i].id]=n[i];for(n=d.edges(),i=0,s=n.length;i<s;i++)a=n[i],!h[a.source]&&!h[a.target]||a.hidden||p(a.source).hidden||p(a.target).hidden||this.edgesOnScreen.push(a);if(u=sigma.svg.nodes,c=sigma.svg.labels,g)for(n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)n[i].hidden||this.domElements.nodes[n[i].id]||(r=(u[n[i].type]||u.def).create(n[i],m),this.domElements.nodes[n[i].id]=r,this.domElements.groups.nodes.appendChild(r),r=(c[n[i].type]||c.def).create(n[i],m),this.domElements.labels[n[i].id]=r,this.domElements.groups.labels.appendChild(r));if(g)for(n=this.nodesOnScreen,i=0,s=n.length;i<s;i++)n[i].hidden||((u[n[i].type]||u.def).update(n[i],this.domElements.nodes[n[i].id],m),(c[n[i].type]||c.def).update(n[i],this.domElements.labels[n[i].id],m));if(u=sigma.svg.edges,f)for(n=this.edgesOnScreen,i=0,s=n.length;i<s;i++)this.domElements.edges[n[i].id]||(o=p(n[i].source),l=p(n[i].target),r=(u[n[i].type]||u.def).create(n[i],o,l,m),this.domElements.edges[n[i].id]=r,this.domElements.groups.edges.appendChild(r));if(f)for(n=this.edgesOnScreen,i=0,s=n.length;i<s;i++)o=p(n[i].source),l=p(n[i].target),(u[n[i].type]||u.def).update(n[i],this.domElements.edges[n[i].id],o,l,m);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,n,i,r=document.createElementNS(this.settings("xmlns"),e),s=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",s+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var a=document.createElement("canvas");a.setAttribute("class",s+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var o=["edges","nodes","labels","hovers"];for(i=0,n=o.length;i<n;i++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",s+"-group-"+o[i]),t.setAttributeNS(null,"class",s+"-group"),this.domElements.groups[o[i]]=this.domElements.graph.appendChild(t);this.container.appendChild(a),this.measurementCanvas=a.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,n;for(n in e)t=e[n],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){function t(t){var n=t.data.node,i=a.settings.embedObjects({prefix:e});if(i("enableHovering")){var o=(s[n.type]||s.def).create(n,a.domElements.nodes[n.id],a.measurementCanvas,i);a.domElements.hovers[n.id]=o,a.domElements.groups.hovers.appendChild(o),r=n}}function n(t){var n=t.data.node,i=a.settings.embedObjects({prefix:e});i("enableHovering")&&(a.domElements.groups.hovers.removeChild(a.domElements.hovers[n.id]),r=null,delete a.domElements.hovers[n.id],a.domElements.groups.nodes.appendChild(a.domElements.nodes[n.id]))}function i(){if(r){var t=a.settings.embedObjects({prefix:e});a.domElements.groups.hovers.removeChild(a.domElements.hovers[r.id]),delete a.domElements.hovers[r.id];var n=(s[r.type]||s.def).create(r,a.domElements.nodes[r.id],a.measurementCanvas,t);a.domElements.hovers[r.id]=n,a.domElements.groups.hovers.appendChild(n)}}var r,s=sigma.svg.hovers,a=this;this.bind("overNode",t),this.bind("outNode",n),this.bind("render",i)},sigma.renderers.svg.prototype.resize=function(t,n){var i=this.width,r=this.height,s=1;return t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),i===this.width&&r===this.height||(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=n+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",t*s),this.domElements.graph.setAttribute("height",n*s))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,n=!!e.WebGLRenderingContext;if(n){t=document.createElement("canvas");try{n=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(i){n=!1}}sigma.renderers.def=n?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,n,i,r){var s=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=0,t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=2*Math.PI/3,t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=s,t[n++]=4*Math.PI/3},render:function(e,t,n,i){var r,s=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),o=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),u=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),d=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(u,i.width,i.height),e.uniform1f(h,1/Math.pow(i.ratio,i.settings("nodesPowRatio"))),e.uniform1f(d,i.scalingRatio),e.uniformMatrix3fv(c,!1,i.matrix),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),
n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),i=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,n,i,r){t[n++]=e[i+"x"],t[n++]=e[i+"y"],t[n++]=e[i+"size"],t[n++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,n,i){var r,s=e.getAttribLocation(t,"a_position"),a=e.getAttribLocation(t,"a_size"),o=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),u=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),h=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(l,i.width,i.height),e.uniform1f(c,1/Math.pow(i.ratio,i.settings("nodesPowRatio"))),e.uniform1f(h,i.scalingRatio),e.uniformMatrix3fv(u,!1,i.matrix),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,n,i,r,s,a){var o=(e[s+"size"]||1)/2,l=t[s+"x"],u=t[s+"y"],c=n[s+"x"],h=n[s+"y"],d=e.color;if(!d)switch(a("edgeColor")){case"source":d=t.color||a("defaultNodeColor");break;case"target":d=n.color||a("defaultNodeColor");break;default:d=a("defaultEdgeColor")}d=sigma.utils.floatColor(d),i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=0,i[r++]=d,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=1,i[r++]=d,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=0,i[r++]=d,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=0,i[r++]=d,i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=1,i[r++]=d,i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=0,i[r++]=d},render:function(e,t,n,i){var r,s=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position1"),o=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),u=e.getAttribLocation(t,"a_minus"),c=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),d=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),f=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(c,i.width,i.height),e.uniform1f(f,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),e.uniform1f(g,i.scalingRatio),e.uniformMatrix3fv(h,!1,i.matrix),e.uniformMatrix2fv(d,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,n,i,r,s,a){var o=((e[s+"size"]||1)/2,t[s+"x"]),l=t[s+"y"],u=n[s+"x"],c=n[s+"y"],h=e.color;if(!h)switch(a("edgeColor")){case"source":h=t.color||a("defaultNodeColor");break;case"target":h=n.color||a("defaultNodeColor");break;default:h=a("defaultEdgeColor")}h=sigma.utils.floatColor(h),i[r++]=o,i[r++]=l,i[r++]=h,i[r++]=u,i[r++]=c,i[r++]=h},render:function(e,t,n,i){var r,s=e.getAttribLocation(t,"a_color"),a=e.getAttribLocation(t,"a_position"),o=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.DYNAMIC_DRAW),e.uniform2f(o,i.width,i.height),e.uniformMatrix3fv(l,!1,i.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(s),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(s,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=sigma.utils.loadProgram(e,[t,n])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,n,i,r,s,a){var o=(e[s+"size"]||1)/2,l=t[s+"x"],u=t[s+"y"],c=n[s+"x"],h=n[s+"y"],d=n[s+"size"],p=e.color;if(!p)switch(a("edgeColor")){case"source":p=t.color||a("defaultNodeColor");break;case"target":p=n.color||a("defaultNodeColor");break;default:p=a("defaultEdgeColor")}p=sigma.utils.floatColor(p),i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=d,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=1,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=d,i[r++]=0,i[r++]=1,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=l,i[r++]=u,i[r++]=c,i[r++]=h,i[r++]=o,i[r++]=d,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=0,i[r++]=1,i[r++]=-1,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=0,i[r++]=1,i[r++]=0,i[r++]=p,i[r++]=c,i[r++]=h,i[r++]=l,i[r++]=u,i[r++]=o,i[r++]=d,i[r++]=1,i[r++]=0,i[r++]=1,i[r++]=1,i[r++]=p},render:function(e,t,n,i){var r,s=e.getAttribLocation(t,"a_pos1"),a=e.getAttribLocation(t,"a_pos2"),o=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),u=e.getAttribLocation(t,"a_delay"),c=e.getAttribLocation(t,"a_minus"),h=e.getAttribLocation(t,"a_head"),d=e.getAttribLocation(t,"a_headPosition"),p=e.getAttribLocation(t,"a_color"),f=e.getUniformLocation(t,"u_resolution"),g=e.getUniformLocation(t,"u_matrix"),m=e.getUniformLocation(t,"u_matrixHalfPi"),v=e.getUniformLocation(t,"u_matrixHalfPiMinus"),y=e.getUniformLocation(t,"u_ratio"),b=e.getUniformLocation(t,"u_nodeRatio"),x=e.getUniformLocation(t,"u_arrowHead"),w=e.getUniformLocation(t,"u_scale");r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.uniform2f(f,i.width,i.height),e.uniform1f(y,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),e.uniform1f(b,Math.pow(i.ratio,i.settings("nodesPowRatio"))/i.ratio),e.uniform1f(x,5),e.uniform1f(w,i.scalingRatio),e.uniformMatrix3fv(g,!1,i.matrix),e.uniformMatrix2fv(m,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(v,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(s),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(l),e.enableVertexAttribArray(u),e.enableVertexAttribArray(c),e.enableVertexAttribArray(h),e.enableVertexAttribArray(d),e.enableVertexAttribArray(p),e.vertexAttribPointer(s,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(p,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,i.start||0,i.count||n.length/this.ATTRIBUTES)},initProgram:function(e){var t,n,i;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),n=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),i=sigma.utils.loadProgram(e,[t,n])}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,n){var i,r=n("prefix")||"",s=e[r+"size"];s<n("labelThreshold")||e.label&&"string"==typeof e.label&&(i="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*s,t.font=(n("fontStyle")?n("fontStyle")+" ":"")+i+"px "+n("font"),t.fillStyle="node"===n("labelColor")?e.color||n("defaultNodeColor"):n("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+s+3),Math.round(e[r+"y"]+i/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,n){var i,r,s,a,o,l=n("hoverFontStyle")||n("fontStyle"),u=n("prefix")||"",c=e[u+"size"],h="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*c;t.font=(l?l+" ":"")+h+"px "+(n("hoverFont")||n("font")),t.beginPath(),t.fillStyle="node"===n("labelHoverBGColor")?e.color||n("defaultNodeColor"):n("defaultHoverLabelBGColor"),e.label&&n("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=n("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(i=Math.round(e[u+"x"]-h/2-2),r=Math.round(e[u+"y"]-h/2-2),s=Math.round(t.measureText(e.label).width+h/2+c+7),a=Math.round(h+4),o=Math.round(h/2+2),t.moveTo(i,r+o),t.arcTo(i,r,i+o,r,o),t.lineTo(i+s,r),t.lineTo(i+s,r+a),t.lineTo(i+o,r+a),t.arcTo(i,r+a,i,r+a-o,o),t.lineTo(i,r+o),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),n("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===n("nodeBorderColor")?e.color||n("defaultNodeColor"):n("defaultNodeBorderColor"),t.arc(e[u+"x"],e[u+"y"],c+n("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var d=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;d(e,t,n),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===n("labelHoverColor")?e.color||n("defaultNodeColor"):n("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[u+"x"]+c+3),Math.round(e[u+"y"]+h/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,n){var i=n("prefix")||"";t.fillStyle=e.color||n("defaultNodeColor"),t.beginPath(),t.arc(e[i+"x"],e[i+"y"],e[i+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),u=r("defaultNodeColor"),c=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||u;break;case"target":s=n.color||u;break;default:s=c}i.strokeStyle=s,i.lineWidth=o,i.beginPath(),i.moveTo(t[a+"x"],t[a+"y"]),i.lineTo(n[a+"x"],n[a+"y"]),i.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),u=r("defaultNodeColor"),c=r("defaultEdgeColor"),h={},d=t[a+"size"],p=t[a+"x"],f=t[a+"y"],g=n[a+"x"],m=n[a+"y"];if(h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(p,f,d):sigma.utils.getQuadraticControlPoint(p,f,g,m),!s)switch(l){case"source":s=t.color||u;break;case"target":s=n.color||u;break;default:s=c}i.strokeStyle=s,i.lineWidth=o,i.beginPath(),i.moveTo(p,f),t.id===n.id?i.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,g,m):i.quadraticCurveTo(h.x,h.y,g,m),i.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=r("edgeColor"),l=r("defaultNodeColor"),u=r("defaultEdgeColor"),c=e[a+"size"]||1,h=n[a+"size"],d=t[a+"x"],p=t[a+"y"],f=n[a+"x"],g=n[a+"y"],m=Math.max(2.5*c,r("minArrowSize")),v=Math.sqrt(Math.pow(f-d,2)+Math.pow(g-p,2)),y=d+(f-d)*(v-m-h)/v,b=p+(g-p)*(v-m-h)/v,x=(f-d)*m/v,w=(g-p)*m/v;if(!s)switch(o){case"source":s=t.color||l;break;case"target":s=n.color||l;break;default:s=u}i.strokeStyle=s,i.lineWidth=c,i.beginPath(),i.moveTo(d,p),i.lineTo(y,b),i.stroke(),i.fillStyle=s,i.beginPath(),i.moveTo(y+x,b+w),i.lineTo(y+.6*w,b-.6*x),i.lineTo(y-.6*w,b+.6*x),i.lineTo(y+x,b+w),i.closePath(),i.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,n,i,r){var s,a,o,l,u,c=e.color,h=r("prefix")||"",d=r("edgeColor"),p=r("defaultNodeColor"),f=r("defaultEdgeColor"),g={},m=e[h+"size"]||1,v=n[h+"size"],y=t[h+"x"],b=t[h+"y"],x=n[h+"x"],w=n[h+"y"],E=Math.max(2.5*m,r("minArrowSize"));if(g=t.id===n.id?sigma.utils.getSelfLoopControlPoints(y,b,v):sigma.utils.getQuadraticControlPoint(y,b,x,w),t.id===n.id?(s=Math.sqrt(Math.pow(x-g.x1,2)+Math.pow(w-g.y1,2)),a=g.x1+(x-g.x1)*(s-E-v)/s,o=g.y1+(w-g.y1)*(s-E-v)/s,l=(x-g.x1)*E/s,u=(w-g.y1)*E/s):(s=Math.sqrt(Math.pow(x-g.x,2)+Math.pow(w-g.y,2)),a=g.x+(x-g.x)*(s-E-v)/s,o=g.y+(w-g.y)*(s-E-v)/s,l=(x-g.x)*E/s,u=(w-g.y)*E/s),!c)switch(d){case"source":c=t.color||p;break;case"target":c=n.color||p;break;default:c=f}i.strokeStyle=c,i.lineWidth=m,i.beginPath(),i.moveTo(y,b),t.id===n.id?i.bezierCurveTo(g.x2,g.y2,g.x1,g.y1,a,o):i.quadraticCurveTo(g.x,g.y,a,o),i.stroke(),i.fillStyle=c,i.beginPath(),i.moveTo(a+l,o+u),i.lineTo(a+.6*u,o-.6*l),i.lineTo(a-.6*u,o+.6*l),i.lineTo(a+l,o+u),i.closePath(),i.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=e[a+"size"]||1,l=r("edgeColor"),u=r("defaultNodeColor"),c=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||u;break;case"target":s=n.color||u;break;default:s=c}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,o*=r("edgeHoverSizeRatio"),i.strokeStyle=s,i.lineWidth=o,i.beginPath(),i.moveTo(t[a+"x"],t[a+"y"]),i.lineTo(n[a+"x"],n[a+"y"]),i.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=r("edgeHoverSizeRatio")*(e[a+"size"]||1),l=r("edgeColor"),u=r("defaultNodeColor"),c=r("defaultEdgeColor"),h={},d=t[a+"size"],p=t[a+"x"],f=t[a+"y"],g=n[a+"x"],m=n[a+"y"];if(h=t.id===n.id?sigma.utils.getSelfLoopControlPoints(p,f,d):sigma.utils.getQuadraticControlPoint(p,f,g,m),!s)switch(l){case"source":s=t.color||u;break;case"target":s=n.color||u;break;default:s=c}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,i.strokeStyle=s,i.lineWidth=o,i.beginPath(),i.moveTo(p,f),t.id===n.id?i.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,g,m):i.quadraticCurveTo(h.x,h.y,g,m),i.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,n,i,r){var s=e.color,a=r("prefix")||"",o=r("edgeColor"),l=r("defaultNodeColor"),u=r("defaultEdgeColor"),c=e[a+"size"]||1,h=n[a+"size"],d=t[a+"x"],p=t[a+"y"],f=n[a+"x"],g=n[a+"y"];c=e.hover?r("edgeHoverSizeRatio")*c:c;var m=2.5*c,v=Math.sqrt(Math.pow(f-d,2)+Math.pow(g-p,2)),y=d+(f-d)*(v-m-h)/v,b=p+(g-p)*(v-m-h)/v,x=(f-d)*m/v,w=(g-p)*m/v;if(!s)switch(o){case"source":s=t.color||l;break;case"target":s=n.color||l;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,i.strokeStyle=s,i.lineWidth=c,i.beginPath(),i.moveTo(d,p),i.lineTo(y,b),i.stroke(),i.fillStyle=s,i.beginPath(),i.moveTo(y+x,b+w),i.lineTo(y+.6*w,b-.6*x),i.lineTo(y-.6*w,b+.6*x),i.lineTo(y+x,b+w),i.closePath(),i.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,n,i,r){var s,a,o,l,u,c,h=e.color,d=r("prefix")||"",p=r("edgeColor"),f=r("defaultNodeColor"),g=r("defaultEdgeColor"),m={},v=r("edgeHoverSizeRatio")*(e[d+"size"]||1),y=n[d+"size"],b=t[d+"x"],x=t[d+"y"],w=n[d+"x"],E=n[d+"y"];if(m=t.id===n.id?sigma.utils.getSelfLoopControlPoints(b,x,y):sigma.utils.getQuadraticControlPoint(b,x,w,E),t.id===n.id?(s=Math.sqrt(Math.pow(w-m.x1,2)+Math.pow(E-m.y1,2)),a=2.5*v,o=m.x1+(w-m.x1)*(s-a-y)/s,l=m.y1+(E-m.y1)*(s-a-y)/s,u=(w-m.x1)*a/s,c=(E-m.y1)*a/s):(s=Math.sqrt(Math.pow(w-m.x,2)+Math.pow(E-m.y,2)),a=2.5*v,o=m.x+(w-m.x)*(s-a-y)/s,l=m.y+(E-m.y)*(s-a-y)/s,u=(w-m.x)*a/s,c=(E-m.y)*a/s),!h)switch(p){case"source":h=t.color||f;break;case"target":h=n.color||f;break;default:h=g}h="edge"===r("edgeHoverColor")?e.hover_color||h:e.hover_color||r("defaultEdgeHoverColor")||h,i.strokeStyle=h,i.lineWidth=v,i.beginPath(),i.moveTo(b,x),t.id===n.id?i.bezierCurveTo(m.x2,m.y2,m.x1,m.y1,o,l):i.quadraticCurveTo(m.x,m.y,o,l),i.stroke(),i.fillStyle=h,i.beginPath(),i.moveTo(o+u,l+c),i.lineTo(o+.6*c,l-.6*u),i.lineTo(o-.6*c,l+.6*u),i.lineTo(o+u,l+c),i.closePath(),i.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,n,i,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,i,r),(sigma.canvas.hovers[n.type]||sigma.canvas.hovers.def)(n,i,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){var n=(t("prefix")||"",document.createElementNS(t("xmlns"),"circle"));return n.setAttributeNS(null,"data-node-id",e.id),n.setAttributeNS(null,"class",t("classPrefix")+"-node"),n.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),n},update:function(e,t,n){var i=n("prefix")||"";return t.setAttributeNS(null,"cx",e[i+"x"]),t.setAttributeNS(null,"cy",e[i+"y"]),t.setAttributeNS(null,"r",e[i+"size"]),n("freeStyle")||t.setAttributeNS(null,"fill",e.color||n("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,n,i){var r=e.color,s=(i("prefix")||"",i("edgeColor")),a=i("defaultNodeColor"),o=i("defaultEdgeColor");if(!r)switch(s){case"source":r=t.color||a;break;case"target":r=n.color||a;break;default:r=o}var l=document.createElementNS(i("xmlns"),"line");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",i("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,n,i,r){var s=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[s+"size"]||1),t.setAttributeNS(null,"x1",n[s+"x"]),t.setAttributeNS(null,"y1",n[s+"y"]),t.setAttributeNS(null,"x2",i[s+"x"]),t.setAttributeNS(null,"y2",i[s+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,n,i){var r=e.color,s=(i("prefix")||"",i("edgeColor")),a=i("defaultNodeColor"),o=i("defaultEdgeColor");if(!r)switch(s){case"source":r=t.color||a;break;case"target":r=n.color||a;break;default:r=o}var l=document.createElementNS(i("xmlns"),"path");return l.setAttributeNS(null,"data-edge-id",e.id),l.setAttributeNS(null,"class",i("classPrefix")+"-edge"),l.setAttributeNS(null,"stroke",r),l},update:function(e,t,n,i,r){var s=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[s+"size"]||1);var a=(n[s+"x"]+i[s+"x"])/2+(i[s+"y"]-n[s+"y"])/4,o=(n[s+"y"]+i[s+"y"])/2+(n[s+"x"]-i[s+"x"])/4,l="M"+n[s+"x"]+","+n[s+"y"]+" Q"+a+","+o+" "+i[s+"x"]+","+i[s+"y"];return t.setAttributeNS(null,"d",l),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var n=t("prefix")||"",i=e[n+"size"],r=document.createElementNS(t("xmlns"),"text"),s="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*i,a="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return r.setAttributeNS(null,"data-label-target",e.id),r.setAttributeNS(null,"class",t("classPrefix")+"-label"),r.setAttributeNS(null,"font-size",s),r.setAttributeNS(null,"font-family",t("font")),r.setAttributeNS(null,"fill",a),r.innerHTML=e.label,r.textContent=e.label,r},update:function(e,t,n){var i=n("prefix")||"",r=e[i+"size"],s="fixed"===n("labelSize")?n("defaultLabelSize"):n("labelSizeRatio")*r;if((n("forceLabels")||!(r<n("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[i+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[i+"y"]+s/3)),t.style.display="",this}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,n,i){var r,s,a,o,l,u=(i("hoverFontStyle")||i("fontStyle"),i("prefix")||""),c=e[u+"size"],h="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*c,d="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),p=document.createElementNS(i("xmlns"),"g"),f=document.createElementNS(i("xmlns"),"rect"),g=document.createElementNS(i("xmlns"),"circle"),m=document.createElementNS(i("xmlns"),"text");return p.setAttributeNS(null,"class",i("classPrefix")+"-hover"),p.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(m.innerHTML=e.label,m.textContent=e.label,m.setAttributeNS(null,"class",i("classPrefix")+"-hover-label"),m.setAttributeNS(null,"font-size",h),m.setAttributeNS(null,"font-family",i("font")),m.setAttributeNS(null,"fill",d),m.setAttributeNS(null,"x",Math.round(e[u+"x"]+c+3)),m.setAttributeNS(null,"y",Math.round(e[u+"y"]+h/3)),r=Math.round(e[u+"x"]-h/2-2),s=Math.round(e[u+"y"]-h/2-2),a=Math.round(n.measureText(e.label).width+h/2+c+9),o=Math.round(h+4),l=Math.round(h/2+2),g.setAttributeNS(null,"class",i("classPrefix")+"-hover-area"),g.setAttributeNS(null,"fill","#fff"),g.setAttributeNS(null,"cx",e[u+"x"]),g.setAttributeNS(null,"cy",e[u+"y"]),g.setAttributeNS(null,"r",l),f.setAttributeNS(null,"class",i("classPrefix")+"-hover-area"),f.setAttributeNS(null,"fill","#fff"),f.setAttributeNS(null,"x",e[u+"x"]+l/4),f.setAttributeNS(null,"y",e[u+"y"]-l),f.setAttributeNS(null,"width",a),f.setAttributeNS(null,"height",o)),p.appendChild(g),p.appendChild(f),p.appendChild(m),p.appendChild(t),p}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,n){var i,r,s,a,o,l,u,c,h=this.graph.nodes(),d=this.graph.edges(),p=this.settings.embedObjects(n||{}),f=p("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),g=f.minX,m=f.minY,v=f.maxX,y=f.maxY,b=f.sizeMax,x=f.weightMax,w=p("width")||1,E=p("height")||1,k=p("autoRescale"),S={nodePosition:1,nodeSize:1,edgeSize:1};for(k instanceof Array||(k=["nodePosition","nodeSize","edgeSize"]),i=0,r=k.length;i<r;i++)if(!S[k[i]])throw new Error('The rescale setting "'+k[i]+'" is not recognized.');var T=~k.indexOf("nodePosition"),C=~k.indexOf("nodeSize"),A=~k.indexOf("edgeSize");for(u="outside"===p("scalingMode")?Math.max(w/Math.max(v-g,1),E/Math.max(y-m,1)):Math.min(w/Math.max(v-g,1),E/Math.max(y-m,1)),c=(p("rescaleIgnoreSize")?0:(p("maxNodeSize")||b)/u)+(p("sideMargin")||0),v+=c,g-=c,y+=c,m-=c,u="outside"===p("scalingMode")?Math.max(w/Math.max(v-g,1),E/Math.max(y-m,1)):Math.min(w/Math.max(v-g,1),E/Math.max(y-m,1)),p("maxNodeSize")||p("minNodeSize")?p("maxNodeSize")===p("minNodeSize")?(s=0,a=+p("maxNodeSize")):(s=(p("maxNodeSize")-p("minNodeSize"))/b,a=+p("minNodeSize")):(s=1,a=0),p("maxEdgeSize")||p("minEdgeSize")?p("maxEdgeSize")===p("minEdgeSize")?(o=0,l=+p("minEdgeSize")):(o=(p("maxEdgeSize")-p("minEdgeSize"))/x,l=+p("minEdgeSize")):(o=1,l=0),i=0,r=d.length;i<r;i++)d[i][t+"size"]=d[i][e+"size"]*(A?o:1)+(A?l:0);for(i=0,r=h.length;i<r;i++)h[i][t+"size"]=h[i][e+"size"]*(C?s:1)+(C?a:0),h[i][t+"x"]=(h[i][e+"x"]-(v+g)/2)*(T?u:1),h[i][t+"y"]=(h[i][e+"y"]-(y+m)/2)*(T?u:1)},sigma.utils.getBoundaries=function(e,t,n){var i,r,s=e.edges(),a=e.nodes(),o=-(1/0),l=-(1/0),u=1/0,c=1/0,h=-(1/0),d=-(1/0);if(n)for(i=0,r=s.length;i<r;i++)o=Math.max(s[i][t+"size"],o);for(i=0,r=a.length;i<r;i++)l=Math.max(a[i][t+"size"],l),h=Math.max(a[i][t+"x"],h),u=Math.min(a[i][t+"x"],u),d=Math.max(a[i][t+"y"],d),c=Math.min(a[i][t+"y"],c);return o=o||1,l=l||1,{weightMax:o,sizeMax:l,minX:u,minY:c,maxX:h,maxY:d}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var n,i,r;if(t+""!=e+""){for(r=this.graph.nodes(),n=0,i=r.length;n<i;n++)r[n][t+"x"]=r[n][e+"x"],r[n][t+"y"]=r[n][e+"y"],r[n][t+"size"]=r[n][e+"size"];for(r=this.graph.edges(),n=0,i=r.length;n<i;n++)r[n][t+"size"]=r[n][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(n,i,r){if(!(n instanceof sigma.classes.camera&&"object"==typeof i&&i))throw"animation.camera: Wrong arguments.";if("number"!=typeof i.x&&"number"!=typeof i.y&&"number"!=typeof i.ratio&&"number"!=typeof i.angle)throw"There must be at least one valid coordinate in the given val.";var s,a,o,l,u,c,h=r||{},d=sigma.utils.dateNow();return c={x:n.x,y:n.y,ratio:n.ratio,angle:n.angle},u=h.duration,l="function"!=typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing,s=function(){var t,r=h.duration?(sigma.utils.dateNow()-d)/h.duration:1;r>=1?(n.isAnimated=!1,n.goTo({x:i.x!==e?i.x:c.x,y:i.y!==e?i.y:c.y,ratio:i.ratio!==e?i.ratio:c.ratio,angle:i.angle!==e?i.angle:c.angle}),cancelAnimationFrame(a),delete sigma.misc.animation.running[a],"function"==typeof h.onComplete&&h.onComplete()):(t=l(r),n.isAnimated=!0,n.goTo({x:i.x!==e?c.x+(i.x-c.x)*t:c.x,y:i.y!==e?c.y+(i.y-c.y)*t:c.y,ratio:i.ratio!==e?c.ratio+(i.ratio-c.ratio)*t:c.ratio,angle:i.angle!==e?c.angle+(i.angle-c.angle)*t:c.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),o.frameId=requestAnimationFrame(s))},a=t(),o={frameId:requestAnimationFrame(s),target:n,type:"camera",options:h,fn:s},sigma.misc.animation.running[a]=o,a},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,n,i=0,r="string"==typeof e?e:null,s="object"==typeof e?e:null,a=sigma.misc.animation.running;for(n in a)r&&a[n].type!==r||s&&a[n].target!==s||(t=sigma.misc.animation.running[n],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[n],"camera"===t.type&&(t.target.isAnimated=!1),i++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return i},sigma.misc.animation.has=function(e){
var t,n="string"==typeof e?e:null,i="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(n&&r[t].type!==n||i&&r[t].target!==i))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function n(e){e&&(o="x"in e.data?e.data.x:o,l="y"in e.data?e.data.y:l);var n,i,r,s,a,c,h,d,p=[],f=o+u.width/2,g=l+u.height/2,m=u.camera.cameraPosition(o,l),v=u.camera.quadtree.point(m.x,m.y);if(v.length)for(n=0,r=v.length;n<r;n++)if(s=v[n],a=s[t+"x"],c=s[t+"y"],h=s[t+"size"],!s.hidden&&f>a-h&&f<a+h&&g>c-h&&g<c+h&&Math.sqrt(Math.pow(f-a,2)+Math.pow(g-c,2))<h){for(d=!1,i=0;i<p.length;i++)if(s.size>p[i].size){p.splice(i,0,s),d=!0;break}d||p.push(s)}return p}function i(n){function i(e,t){for(v=!1,a=0;a<e.length;a++)if(t.size>e[a].size){e.splice(a,0,t),v=!0;break}v||e.push(t)}if(!u.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&u instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");n&&(o="x"in n.data?n.data.x:o,l="y"in n.data?n.data.y:l);var s,a,c,h,d,p,f,g,m,v,y=u.settings("edgeHoverPrecision"),b={},x=[],w=o+u.width/2,E=l+u.height/2,k=u.camera.cameraPosition(o,l),S=[];if(r){var T=u.camera.quadtree.area(u.camera.getRectangle(u.width,u.height));for(h=T,s=0,c=h.length;s<c;s++)b[h[s].id]=h[s]}if(u.camera.edgequadtree!==e&&(S=u.camera.edgequadtree.point(k.x,k.y)),S.length)for(s=0,c=S.length;s<c;s++)d=S[s],f=u.graph.nodes(d.source),g=u.graph.nodes(d.target),p=d[t+"size"]||d["read_"+t+"size"],!d.hidden&&!f.hidden&&!g.hidden&&(!r||b[d.source]||b[d.target])&&sigma.utils.getDistance(f[t+"x"],f[t+"y"],w,E)>f[t+"size"]&&sigma.utils.getDistance(g[t+"x"],g[t+"y"],w,E)>g[t+"size"]&&("curve"==d.type||"curvedArrow"==d.type?f.id===g.id?(m=sigma.utils.getSelfLoopControlPoints(f[t+"x"],f[t+"y"],f[t+"size"]),sigma.utils.isPointOnBezierCurve(w,E,f[t+"x"],f[t+"y"],g[t+"x"],g[t+"y"],m.x1,m.y1,m.x2,m.y2,Math.max(p,y))&&i(x,d)):(m=sigma.utils.getQuadraticControlPoint(f[t+"x"],f[t+"y"],g[t+"x"],g[t+"y"]),sigma.utils.isPointOnQuadraticCurve(w,E,f[t+"x"],f[t+"y"],g[t+"x"],g[t+"y"],m.x,m.y,Math.max(p,y))&&i(x,d)):sigma.utils.isPointOnSegment(w,E,f[t+"x"],f[t+"y"],g[t+"x"],g[t+"y"],Math.max(p,y))&&i(x,d));return x}function r(e){function t(e){u.settings("eventsEnabled")&&(u.dispatchEvent("click",e.data),l=n(e),c=i(e),l.length?(u.dispatchEvent("clickNode",{node:l[0],captor:e.data}),u.dispatchEvent("clickNodes",{node:l,captor:e.data})):c.length?(u.dispatchEvent("clickEdge",{edge:c[0],captor:e.data}),u.dispatchEvent("clickEdges",{edge:c,captor:e.data})):u.dispatchEvent("clickStage",{captor:e.data}))}function r(e){u.settings("eventsEnabled")&&(u.dispatchEvent("doubleClick",e.data),l=n(e),c=i(e),l.length?(u.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),u.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):c.length?(u.dispatchEvent("doubleClickEdge",{edge:c[0],captor:e.data}),u.dispatchEvent("doubleClickEdges",{edge:c,captor:e.data})):u.dispatchEvent("doubleClickStage",{captor:e.data}))}function s(e){u.settings("eventsEnabled")&&(u.dispatchEvent("rightClick",e.data),l=n(e),c=i(e),l.length?(u.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),u.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):c.length?(u.dispatchEvent("rightClickEdge",{edge:c[0],captor:e.data}),u.dispatchEvent("rightClickEdges",{edge:c,captor:e.data})):u.dispatchEvent("rightClickStage",{captor:e.data}))}function a(e){if(u.settings("eventsEnabled")){var t,n,i,r,s=[],a=[];for(t in h)s.push(h[t]);for(h={},n=0,i=s.length;n<i;n++)u.dispatchEvent("outNode",{node:s[n],captor:e.data});for(s.length&&u.dispatchEvent("outNodes",{nodes:s,captor:e.data}),d={},n=0,r=a.length;n<r;n++)u.dispatchEvent("outEdge",{edge:a[n],captor:e.data});a.length&&u.dispatchEvent("outEdges",{edges:a,captor:e.data})}}function o(e){if(u.settings("eventsEnabled")){l=n(e),c=i(e);var t,r,s,a,o=[],p=[],f={},g=l.length,m=[],v=[],y={},b=c.length;for(t=0;t<g;t++)s=l[t],f[s.id]=s,h[s.id]||(p.push(s),h[s.id]=s);for(r in h)f[r]||(o.push(h[r]),delete h[r]);for(t=0,g=p.length;t<g;t++)u.dispatchEvent("overNode",{node:p[t],captor:e.data});for(t=0,g=o.length;t<g;t++)u.dispatchEvent("outNode",{node:o[t],captor:e.data});for(p.length&&u.dispatchEvent("overNodes",{nodes:p,captor:e.data}),o.length&&u.dispatchEvent("outNodes",{nodes:o,captor:e.data}),t=0;t<b;t++)a=c[t],y[a.id]=a,d[a.id]||(v.push(a),d[a.id]=a);for(r in d)y[r]||(m.push(d[r]),delete d[r]);for(t=0,b=v.length;t<b;t++)u.dispatchEvent("overEdge",{edge:v[t],captor:e.data});for(t=0,b=m.length;t<b;t++)u.dispatchEvent("outEdge",{edge:m[t],captor:e.data});v.length&&u.dispatchEvent("overEdges",{edges:v,captor:e.data}),m.length&&u.dispatchEvent("outEdges",{edges:m,captor:e.data})}}var l,c,h={},d={};e.bind("click",t),e.bind("mousedown",o),e.bind("mouseup",o),e.bind("mousemove",o),e.bind("mouseout",a),e.bind("doubleclick",r),e.bind("rightclick",s),u.bind("render",o)}var s,a,o,l,u=this;for(s=0,a=this.captors.length;s<a;s++)r(this.captors[s])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(a.settings("classPrefix")+"-hover")}}function n(e){if(a.settings("eventsEnabled")){a.dispatchEvent("click",e);var n=new t(e.target);n.isNode()?a.dispatchEvent("clickNode",{node:o.nodes(n.attr("data-node-id"))}):a.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function i(e){if(a.settings("eventsEnabled")){a.dispatchEvent("doubleClick",e);var n=new t(e.target);n.isNode()?a.dispatchEvent("doubleClickNode",{node:o.nodes(n.attr("data-node-id"))}):a.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){var n=e.toElement||e.target;if(a.settings("eventsEnabled")&&n){var i=new t(n);if(i.isNode())a.dispatchEvent("overNode",{node:o.nodes(i.attr("data-node-id"))});else if(i.isEdge()){var r=o.edges(i.attr("data-edge-id"));a.dispatchEvent("overEdge",{edge:r,source:o.nodes(r.source),target:o.nodes(r.target)})}}}function s(e){var n=e.fromElement||e.originalTarget;if(a.settings("eventsEnabled")){var i=new t(n);if(i.isNode())a.dispatchEvent("outNode",{node:o.nodes(i.attr("data-node-id"))});else if(i.isEdge()){var r=o.edges(i.attr("data-edge-id"));a.dispatchEvent("outEdge",{edge:r,source:o.nodes(r.source),target:o.nodes(r.target)})}}}var a=this,o=this.graph;e.addEventListener("click",n,!1),sigma.utils.doubleClick(e,"click",i),e.addEventListener("touchstart",n,!1),sigma.utils.doubleClick(e,"touchstart",i),e.addEventListener("mouseover",r,!0),e.addEventListener("mouseout",s,!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){n.contexts.hover.canvas.width=n.contexts.hover.canvas.width;var t,s,a,o,l,u=n.settings("defaultNodeType"),c=n.settings("defaultEdgeType"),h=sigma.canvas.hovers,d=sigma.canvas.edgehovers,p=sigma.canvas.extremities,f=n.settings.embedObjects({prefix:e});if(f("enableHovering")&&f("singleHover")&&Object.keys(i).length&&(o=i[Object.keys(i)[0]],(h[o.type]||h[u]||h.def)(o,n.contexts.hover,f)),f("enableHovering")&&!f("singleHover"))for(t in i)(h[i[t].type]||h[u]||h.def)(i[t],n.contexts.hover,f);if(f("enableEdgeHovering")&&f("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],s=n.graph.nodes(l.source),a=n.graph.nodes(l.target),l.hidden||((d[l.type]||d[c]||d.def)(l,s,a,n.contexts.hover,f),f("edgeHoverExtremities")?(p[l.type]||p.def)(l,s,a,n.contexts.hover,f):((sigma.canvas.nodes[s.type]||sigma.canvas.nodes.def)(s,n.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,n.contexts.hover,f)))),f("enableEdgeHovering")&&!f("singleHover"))for(t in r)l=r[t],s=n.graph.nodes(l.source),a=n.graph.nodes(l.target),l.hidden||((d[l.type]||d[c]||d.def)(l,s,a,n.contexts.hover,f),f("edgeHoverExtremities")?(p[l.type]||p.def)(l,s,a,n.contexts.hover,f):((sigma.canvas.nodes[s.type]||sigma.canvas.nodes.def)(s,n.contexts.hover,f),(sigma.canvas.nodes[a.type]||sigma.canvas.nodes.def)(a,n.contexts.hover,f)))}var n=this,i={},r={};this.bind("overNode",function(e){var n=e.data.node;n.hidden||(i[n.id]=n,t())}),this.bind("outNode",function(e){delete i[e.data.node.id],t()}),this.bind("overEdge",function(e){var n=e.data.edge;n.hidden||(r[n.id]=n,t())}),this.bind("outEdge",function(e){delete r[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this),function(e){"use strict";function t(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function n(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function i(e){function i(){var e={};return h.els.meta?(e.lastmodifieddate=h.els.meta.getAttribute("lastmodifieddate"),o.nodeListEach(h.els.meta.childNodes,function(t){e[t.tagName.toLowerCase()]=t.textContent}),e):e}function r(e){var t=[];return h.els.model[e]&&o.nodeListEach(h.els.model[e],function(e){var n={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},i=o.nodeListToArray(e.childNodes);i.length>0&&(n.defaultValue=i[0].textContent),t.push(n)}),t.length>0&&t}function s(e,t){var n={},i=t.getElementsByTagName("attvalue"),r=o.nodeListToHash(i,function(e){var t=o.namedNodeMapToObject(e.attributes),n=t.id||t["for"];return{key:n,value:t.value}});return e.map(function(e){n[e.id]=!(e.id in r)&&"defaultValue"in e?o.enforceType(e.type,e.defaultValue):o.enforceType(e.type,r[e.id])}),n}function a(e){var n=[];return o.nodeListEach(h.els.nodes,function(i){var r={id:i.getAttribute("id"),label:i.getAttribute("label")||""};e&&(r.attributes=s(e,i)),h.hasViz&&(r.viz=l(i)),n.push(t(r))}),n}function l(e){var t={},n=o.getFirstElementByTagNS(e,"viz","color");if(n){var i=["r","g","b","a"].map(function(e){return n.getAttribute(e)});t.color=o.getRGB(i)}var r=o.getFirstElementByTagNS(e,"viz","position");r&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+r.getAttribute(e)}));var s=o.getFirstElementByTagNS(e,"viz","size");s&&(t.size=+s.getAttribute("value"));var a=o.getFirstElementByTagNS(e,"viz","shape");return a&&(t.shape=a.getAttribute("value")),t}function u(e,t){var i=[];return o.nodeListEach(h.els.edges,function(r){var a=o.namedNodeMapToObject(r.attributes);"type"in a||(a.type=t),e&&(a.attributes=s(e,r)),h.hasViz&&(a.viz=c(r)),i.push(n(a))}),i}function c(e){var t={},n=o.getFirstElementByTagNS(e,"viz","color");if(n){var i=["r","g","b","a"].map(function(e){return n.getAttribute(e)});t.color=o.getRGB(i)}var r=o.getFirstElementByTagNS(e,"viz","shape");r&&(t.shape=r.getAttribute("value"));var s=o.getFirstElementByTagNS(e,"viz","thickness");return s&&(t.thickness=+s.getAttribute("value")),t}var h={};h.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:o.getModelTags(e)},h.hasViz=!!o.getAttributeNS(h.els.root,"xmlns","viz"),h.version=h.els.root.getAttribute("version")||"1.0",h.mode=h.els.graph.getAttribute("mode")||"static";var d=h.els.graph.getAttribute("defaultedgetype");h.defaultEdgetype=d||"undirected";var p=r("node"),f=r("edge"),g={version:h.version,mode:h.mode,defaultEdgeType:h.defaultEdgetype,meta:i(),model:{},nodes:a(p),edges:u(f,h.defaultEdgetype)};return p&&(g.model.node=p),f&&(g.model.edge=f),g}function r(e,t){var n=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(n){}}return null}();if(!n)throw"XMLHttpRequest not supported, cannot load the file.";var i,r="function"==typeof t;return n.overrideMimeType?(n.overrideMimeType("text/xml"),i=function(e){return e.responseXML}):i=function(e){var t=new DOMParser;return t.parseFromString(e.responseText,"application/xml")},n.open("GET",e,r),r&&(n.onreadystatechange=function(){4===n.readyState&&t(i(n))}),n.send(),r?n:i(n)}function s(e){return i(e)}function a(e,t){return"function"==typeof t?r(e,function(e){t(i(e))}):i(r(e))}var o={getModelTags:function(e){var t,n=e.getElementsByTagName("attributes"),i={},r=n.length;for(t=0;r>t;t++)i[n[t].getAttribute("class")]=n[t].childNodes;return i},nodeListToArray:function(e){for(var t=[],n=0,i=e.length;i>n;++n)"#text"!==e[n].nodeName&&t.push(e[n]);return t},nodeListEach:function(e,t){for(var n=0,i=e.length;i>n;++n)"#text"!==e[n].nodeName&&t(e[n])},nodeListToHash:function(e,t){for(var n={},i=0;i<e.length;i++)if("#text"!==e[i].nodeName){var r=t(e[i]);n[r.key]=r.value}return n},namedNodeMapToObject:function(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t},getFirstElementByTagNS:function(e,t,n){var i=e.getElementsByTagName(t+":"+n)[0];return i||(i=e.getElementsByTagNameNS(t,n)[0]),i||(i=e.getElementsByTagName(n)[0]),i},getAttributeNS:function(t,n,i){var r=t.getAttribute(n+":"+i);return r===e&&(r=t.getAttributeNS(n,i)),r===e&&(r=t.getAttribute(i)),r},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};if("undefined"!=typeof this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:s,fetch:a,version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}.call(this),function(e){"use strict";function t(){return"e"+n++}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var n=0;sigma.parsers.gexf=function(e,n,i){function r(e){for(o=e.nodes,s=0,a=o.length;s<a;s++)l=o[s],l.id=l.id,l.viz&&"object"==typeof l.viz?(l.viz.position&&"object"==typeof l.viz.position?(l.x=l.viz.position.x,l.y=l.viz.position.y):h=!0,l.viz.size?l.size=l.viz.size:d=!0,l.color=l.viz.color):(h=!0,d=!0);for(o=e.edges,s=0,a=o.length;s<a;s++)l=o[s],l.id="string"==typeof l.id?l.id:t(),l.source=""+l.source,l.target=""+l.target,l.viz&&"object"==typeof l.viz&&(l.color=l.viz.color,l.size=l.viz.thickness),l.size=l.weight;for(u={},s=0,a=o.length;s<a;s++)l=o[s],u[l.source]=(u[l.source]||0)+1,u[l.target]=(u[l.target]||0)+1;for(o=e.nodes,s=0,a=o.length;s<a;s++)l=o[s],l.size=1+2*Math.sqrt(u[l.id]||0);if(d)for(o=e.nodes,s=0,a=o.length;s<a;s++)l=o[s],c=2*Math.PI*s/o.length,l.x=100*Math.cos(c),l.y=100*Math.sin(c);if(n instanceof sigma){for(n.graph.clear(),o=e.nodes,s=0,a=o.length;s<a;s++)n.graph.addNode(o[s]);for(o=e.edges,s=0,a=o.length;s<a;s++)n.graph.addEdge(o[s])}else"object"==typeof n?(n.graph=e,n=new sigma(n)):"function"==typeof n&&(i=n,n=null);return i?void i(n||e):e}var s,a,o,l,u,c,h=!1,d=!1;if("string"==typeof e)gexf.fetch(e,r);else if("object"==typeof e)return r(gexf.parse(e))}}.call(this),function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=options.worker!==!1&&webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(n){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e,t,n,i=this.graph.nodes(),r=this.graph.edges(),s=i.length*this.ppn,a=r.length*this.ppe,o={};for(this.nodesByteArray=new Float32Array(s),this.edgesByteArray=new Float32Array(a),e=t=0,n=i.length;n>e;e++)o[i[e].id]=t,this.nodesByteArray[t]=i[e].x,this.nodesByteArray[t+1]=i[e].y,this.nodesByteArray[t+2]=0,this.nodesByteArray[t+3]=0,this.nodesByteArray[t+4]=0,this.nodesByteArray[t+5]=0,this.nodesByteArray[t+6]=1+this.graph.degree(i[e].id),this.nodesByteArray[t+7]=1,this.nodesByteArray[t+8]=i[e].size,this.nodesByteArray[t+9]=0,t+=this.ppn;for(e=t=0,n=r.length;n>e;e++)this.edgesByteArray[t]=o[r[e].source],this.edgesByteArray[t+1]=o[r[e].target],this.edgesByteArray[t+2]=r[e].weight||0,t+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var e=this.graph.nodes(),t=0,n=0,i=this.nodesByteArray.length;i>n;n+=this.ppn)e[t].x=this.nodesByteArray[n],e[t].y=this.nodesByteArray[n+1],t++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},n=[this.nodesByteArray.buffer];"start"===e&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,n.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,n):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(!this.running){this.running=!0;var e,t;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var e,t,n;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!0,n=sigma.utils.getBoundaries(this.graph,t.readPrefix),t.settings("drawEdges")&&t.settings("enableEdgeHovering")&&t.edgequadtree.index(this.sigInst.graph,{prefix:t.readPrefix,bounds:{x:n.minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){if(this.config=e,this.started){var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")}},sigma.prototype.startForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),e&&this.supervisor.configure(e),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),this.supervisor.configure(e),this},sigma.prototype.isForceAtlas2Running=function(){return this.supervisor&&this.supervisor.running}}.call(this),function(undefined){"use strict";function no_crush(e){var t,n,i,r=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],s=["source","target","weight"],a=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(n=0,i=a.length;i>n;n++)t=new RegExp("rp\\(([^,]*), '"+a[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);for(n=0,i=r.length;i>n;n++)t=new RegExp("np\\(([^,]*), '"+r[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);for(n=0,i=s.length;i>n;n++)t=new RegExp("ep\\(([^,]*), '"+s[n]+"'\\)","g"),e=e.replace(t,0===n?"$1":"$1 + "+n);return e}function getWorkerFn(){var e=crush?crush(Worker.toString()):Worker.toString();return";("+e+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(){function e(){var e,t,n={},i=arguments.length;for(e=i-1;e>=0;e--)for(t in arguments[e])n[t]=arguments[e][t];return n}function t(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}function n(e,t,n){n=n||{},a=e,o=t,c.nodesLength=a.length,c.edgesLength=o.length,i(n)}function i(t){c.settings=e(t,c.settings)}function r(){var e,t,n,i,r,s,u,h,d,p,f,g,m,v,y;for(n=0;n<c.nodesLength;n+=c.ppn)a[n+4]=a[n+2],a[n+5]=a[n+3],a[n+2]=0,a[n+3]=0;if(c.settings.outboundAttractionDistribution){for(d=0,n=0;n<c.nodesLength;n+=c.ppn)d+=a[n+6];d/=c.nodesLength}if(c.settings.barnesHutOptimize){var b,x,w=1/0,E=-1/0,k=1/0,S=-1/0;for(l=[],n=0;n<c.nodesLength;n+=c.ppn)w=Math.min(w,a[n]),E=Math.max(E,a[n]),k=Math.min(k,a[n+1]),S=Math.max(S,a[n+1]);for(l[0]=-1,l[1]=(w+E)/2,l[2]=(k+S)/2,l[3]=Math.max(E-w,S-k),l[4]=-1,l[5]=-1,l[6]=0,l[7]=0,l[8]=0,e=1,n=0;n<c.nodesLength;n+=c.ppn)for(t=0;;)if(l[t+5]>=0)b=a[n]<l[t+1]?a[n+1]<l[t+2]?l[t+5]:l[t+5]+c.ppr:a[n+1]<l[t+2]?l[t+5]+2*c.ppr:l[t+5]+3*c.ppr,l[t+7]=(l[t+7]*l[t+6]+a[n]*a[n+6])/(l[t+6]+a[n+6]),l[t+8]=(l[t+8]*l[t+6]+a[n+1]*a[n+6])/(l[t+6]+a[n+6]),l[t+6]+=a[n+6],t=b;else{if(l[t]<0){l[t]=n;break}if(l[t+5]=e*c.ppr,u=l[t+3]/2,h=l[t+5],l[h]=-1,l[h+1]=l[t+1]-u,l[h+2]=l[t+2]-u,l[h+3]=u,l[h+4]=h+c.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=c.ppr,l[h]=-1,l[h+1]=l[t+1]-u,l[h+2]=l[t+2]+u,l[h+3]=u,l[h+4]=h+c.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=c.ppr,l[h]=-1,l[h+1]=l[t+1]+u,l[h+2]=l[t+2]-u,l[h+3]=u,l[h+4]=h+c.ppr,l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,h+=c.ppr,l[h]=-1,l[h+1]=l[t+1]+u,l[h+2]=l[t+2]+u,l[h+3]=u,l[h+4]=l[t+4],l[h+5]=-1,l[h+6]=0,l[h+7]=0,l[h+8]=0,e+=4,b=a[l[t]]<l[t+1]?a[l[t]+1]<l[t+2]?l[t+5]:l[t+5]+c.ppr:a[l[t]+1]<l[t+2]?l[t+5]+2*c.ppr:l[t+5]+3*c.ppr,l[t+6]=a[l[t]+6],l[t+7]=a[l[t]],l[t+8]=a[l[t]+1],l[b]=l[t],l[t]=-1,x=a[n]<l[t+1]?a[n+1]<l[t+2]?l[t+5]:l[t+5]+c.ppr:a[n+1]<l[t+2]?l[t+5]+2*c.ppr:l[t+5]+3*c.ppr,b!==x){l[x]=n;break}t=b}}if(c.settings.barnesHutOptimize)for(p=c.settings.scalingRatio,n=0;n<c.nodesLength;n+=c.ppn)for(t=0;;)if(l[t+5]>=0){if(v=Math.sqrt(Math.pow(a[n]-l[t+7],2)+Math.pow(a[n+1]-l[t+8],2)),2*l[t+3]/v<c.settings.barnesHutTheta){if(f=a[n]-l[t+7],g=a[n+1]-l[t+8],c.settings.adjustSize?v>0?(y=p*a[n+6]*l[t+6]/v/v,a[n+2]+=f*y,a[n+3]+=g*y):0>v&&(y=-p*a[n+6]*l[t+6]/v,a[n+2]+=f*y,a[n+3]+=g*y):v>0&&(y=p*a[n+6]*l[t+6]/v/v,a[n+2]+=f*y,a[n+3]+=g*y),l[t+4]<0)break;t=l[t+4];continue}t=l[t+5]}else{if(l[t]>=0&&l[t]!==n&&(f=a[n]-a[l[t]],g=a[n+1]-a[l[t]+1],v=Math.sqrt(f*f+g*g),c.settings.adjustSize?v>0?(y=p*a[n+6]*a[l[t]+6]/v/v,a[n+2]+=f*y,a[n+3]+=g*y):0>v&&(y=-p*a[n+6]*a[l[t]+6]/v,a[n+2]+=f*y,a[n+3]+=g*y):v>0&&(y=p*a[n+6]*a[l[t]+6]/v/v,a[n+2]+=f*y,a[n+3]+=g*y)),l[t+4]<0)break;t=l[t+4]}else for(p=c.settings.scalingRatio,i=0;i<c.nodesLength;i+=c.ppn)for(r=0;i>r;r+=c.ppn)f=a[i]-a[r],g=a[i+1]-a[r+1],c.settings.adjustSize?(v=Math.sqrt(f*f+g*g)-a[i+8]-a[r+8],v>0?(y=p*a[i+6]*a[r+6]/v/v,a[i+2]+=f*y,a[i+3]+=g*y,a[r+2]+=f*y,a[r+3]+=g*y):0>v&&(y=100*p*a[i+6]*a[r+6],a[i+2]+=f*y,a[i+3]+=g*y,a[r+2]-=f*y,a[r+3]-=g*y)):(v=Math.sqrt(f*f+g*g),v>0&&(y=p*a[i+6]*a[r+6]/v/v,a[i+2]+=f*y,a[i+3]+=g*y,a[r+2]-=f*y,a[r+3]-=g*y));for(h=c.settings.gravity/c.settings.scalingRatio,p=c.settings.scalingRatio,n=0;n<c.nodesLength;n+=c.ppn)y=0,f=a[n],g=a[n+1],v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),c.settings.strongGravityMode?v>0&&(y=p*a[n+6]*h):v>0&&(y=p*a[n+6]*h/v),a[n+2]-=f*y,a[n+3]-=g*y;for(p=1*(c.settings.outboundAttractionDistribution?d:1),s=0;s<c.edgesLength;s+=c.ppe)i=o[s],r=o[s+1],u=o[s+2],m=0===c.settings.edgeWeightInfluence?1:1===c.settings.edgeWeightInfluence?u:Math.pow(u,c.settings.edgeWeightInfluence),f=a[i]-a[r],g=a[i+1]-a[r+1],c.settings.adjustSizes?(v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)-a[i+8]-a[r+8]),c.settings.linLogMode?c.settings.outboundAttractionDistribution?v>0&&(y=-p*m*Math.log(1+v)/v/a[i+6]):v>0&&(y=-p*m*Math.log(1+v)/v):c.settings.outboundAttractionDistribution?v>0&&(y=-p*m/a[i+6]):v>0&&(y=-p*m)):(v=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),c.settings.linLogMode?c.settings.outboundAttractionDistribution?v>0&&(y=-p*m*Math.log(1+v)/v/a[i+6]):v>0&&(y=-p*m*Math.log(1+v)/v):c.settings.outboundAttractionDistribution?(v=1,y=-p*m/a[i+6]):(v=1,y=-p*m)),v>0&&(a[i+2]+=f*y,a[i+3]+=g*y,a[r+2]-=f*y,a[r+3]-=g*y);var T,C,A,N;if(c.settings.adjustSizes)for(n=0;n<c.nodesLength;n+=c.ppn)a[n+9]||(T=Math.sqrt(Math.pow(a[n+2],2)+Math.pow(a[n+3],2)),T>c.maxForce&&(a[n+2]=a[n+2]*c.maxForce/T,a[n+3]=a[n+3]*c.maxForce/T),C=a[n+6]*Math.sqrt((a[n+4]-a[n+2])*(a[n+4]-a[n+2])+(a[n+5]-a[n+3])*(a[n+5]-a[n+3])),A=Math.sqrt((a[n+4]+a[n+2])*(a[n+4]+a[n+2])+(a[n+5]+a[n+3])*(a[n+5]+a[n+3]))/2,N=.1*Math.log(1+A)/(1+Math.sqrt(C)),a[n]=a[n]+a[n+2]*(N/c.settings.slowDown),a[n+1]=a[n+1]+a[n+3]*(N/c.settings.slowDown));else for(n=0;n<c.nodesLength;n+=c.ppn)a[n+9]||(C=a[n+6]*Math.sqrt((a[n+4]-a[n+2])*(a[n+4]-a[n+2])+(a[n+5]-a[n+3])*(a[n+5]-a[n+3])),A=Math.sqrt((a[n+4]+a[n+2])*(a[n+4]+a[n+2])+(a[n+5]+a[n+3])*(a[n+5]+a[n+3]))/2,N=a[n+7]*Math.log(1+A)/(1+Math.sqrt(C)),a[n+7]=Math.min(1,Math.sqrt(N*(Math.pow(a[n+2],2)+Math.pow(a[n+3],2))/(1+Math.sqrt(C)))),a[n]=a[n]+a[n+2]*(N/c.settings.slowDown),a[n+1]=a[n+1]+a[n+3]*(N/c.settings.slowDown));c.iterations++}function s(e){for(var t=0;e>t;t++)r();u()}var a,o,l,u,c={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}};u="undefined"!=typeof window&&window.document?function(){var e=new Event("newCoords");e.data={nodes:a.buffer},requestAnimationFrame(function(){document.dispatchEvent(e)})}:function(){self.postMessage({nodes:a.buffer},[a.buffer])};var h=function(e){switch(e.data.action){case"start":n(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),s(c.settings.startingIterations);break;case"loop":a=new Float32Array(e.data.nodes),s(c.settings.iterationsPerRender);break;case"config":i(e.data.config);break;case"kill":t(c),a=null,o=null,l=null,self.removeEventListener("message",h)}};self.addEventListener("message",h)},crush=null;if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this),function(e){var t={graph:{},modules:{},panes:{},refs:{}};this.app=t}.call(this),function(e){this.Pane=function(e){var t=this,n=$(".before-main");this.mainTemplate=null,this.childModules=[],this.rendered=!1,this.render=function(){app.templates.require(e.name,function(i){t.mainTemplate=i,n.next("div").replaceWith(i()),t.dom=n.next("div"),e.graph&&t.addChildModule(app.modules.graph,[t.dom]),t.emitters&&t.emitters(t.dom),t.rendered=!0,t.didRender&&t.didRender()})},this.addChildModule=function(e,t){return this.childModules.push(app.control.addModule(e,(t||[]).concat(this))),this.childModules[this.childModules.length-1]},this.removeChildModule=function(e){var t=this.childModules.indexOf(e);e.unmount&&e.unmount(),this.childModules.splice(t,1)},this.mount=function(){this.render()},this.unmount=function(){this.childModules.forEach(function(e){e.unmount&&e.unmount(),app.control.killModule(e)}),this.willUnmount&&this.willUnmount()}}}.call(this),function(e){var t=0;this.Thumbnail=function(e,n){n=n||{};var i=app.control.get("mainSigma");this.renderer=null,this.camera=null,this.render=function(){return this.renderer?(this.camera&&i.loadCamera(this.camera.id,n.camera),this.renderer.render({process:!0}),this):this},this.unmount=function(){this.renderer&&i.killRenderer(this.renderer),this.renderer=null,this.camera&&i.killCamera(this.camera),this.camera=null},this.init=function(){var r=n.category||{};r.noDisplay||(n.camera&&(this.camera=i.addCamera("thumbnail"+t++)),this.renderer=i.addRenderer({type:"thumbnail",camera:this.camera?this.camera.id:"static",container:e,data:{category:r,values:(r.values||[]).reduce(function(e,t){return e[t.id]=t.color,e},{}),filter:(n.filter||{}).values||[],camera:n.camera}}))},this.init()}}.call(this),function(e){this.Filter=function(){this.category=null,this.values=[],this.set=function(e){return this.category=e,this},this.add=function(e){return this.values.push(e),this},this.remove=function(e){return this.values=this.values.filter(function(t){return t!==e}),this},this.empty=function(){return this.values=[],this},this["import"]=function(e){return e.category?(this.set(e.category),this.values=e.values,this):this.clear()},this["export"]=function(){return this.category?{category:this.category.id,values:this.values}:null},this.clear=function(){return this.category=null,this.values=[],this}}}.call(this),function(e){app.graph.applyCategoriesColors=function(e,t){e.forEach(function(e){function n(e){switch(e){case 1:return["#6889AB"];case 2:return["#3CC426","#D058AF"];case 3:return["#3CC426","#BE60D4","#EC4042"];case 4:return["#CB9A29","#A682D0","#E35466","#70C950"];case 5:return["#E05F3D","#67C845","#8286DA","#DD5FAE","#C4B322"];case 6:return["#DF6240","#79D83F","#828BD7","#DB62AB","#C4B32D","#54B962"];case 7:return["#50BC65","#DA65B4","#D37F29","#818CD6","#B4B62F","#E45356","#7AD940"];case 8:return["#65DD5D","#D769BB","#D28129","#5B97CF","#E3535F","#BEC932","#9263DE","#5C9F45"];case 9:return["#888AD6","#69DC47","#D7802C","#11B0A7","#D964B5","#E45556","#ACA02B","#60B65A","#C7DE3F"];case 10:return["#50A3CB","#C8DA3C","#E05F3D","#D26EC9","#44CB91","#CA962B","#DF5683","#6ADC4F","#8967DA","#6BA13C"];default:for(var t=[],n=0;n<e;n++)t.push(chroma.rgb(255*Math.random(),255*Math.random(),255*Math.random()).hex());return t}}var i,r,s,a=10;switch(e.type){case"liststring":s=t.nodes.reduce(function(t,n){return n.attributes[e.id].forEach(function(e){t[e]=(t[e]||0)+1},{}),t},{});break;case"string":s=t.nodes.reduce(function(t,n){var i=n.attributes[e.id];return i&&(t[i]=(t[i]||0)+1),t},{});break;default:e.noDisplay=!0}if(s){e.values=[];for(r in s||{})e.minValue=Math.min(e.maxValue||1/0,s[r]),e.maxValue=Math.max(e.maxValue||-(1/0),s[r]),e.values.push({id:r,value:s[r]});e.values=e.values.sort(function(e,t){return t.value-e.value}),i=n(Math.min(e.values.length,a)),e.values.forEach(function(t,n,r){t.color=i[n],t.percentValue=100*t.value/e.maxValue}),e.values.forEach(function(e,t,n){t>=a&&(e.color=app.settings.colors.weakCategory)}),e.values.length>t.nodes.length/2&&(e.noDisplay=!0),e.values.length<2&&(e.noDisplay=!0)}})}}.call(this),function(e){app.graph.layoutConstraints=function(e){return e.linLogMode?(e.strongGravityMode=!1,e.scalingRatio=.2,e.slowDown=1):(e.strongGravityMode=!0,e.scalingRatio=10,e.slowDown=2),e}}.call(this),function(e){function t(e){this.pipes=[],this.iterator=null,this.src=function(t){return this.iterator=e.graph[t],this},this.pipe=function(e){return this.pipes.push(e),this},this.exec=function(){var t,n,i,r,s=this.iterator();for(t=0,n=s.length;t<n;t++)for(i=0,r=this.pipes.length;i<r;i++)this.pipes[i].call(e,s[t]);return this.pipes=[],this},this.refresh=function(){return this.exec(),e.refresh(),this}}var n=this;if(!("sigma"in n))throw Error("sigma.pipe: sigma is not present on your context.");sigma.tasks={},sigma.task=function(e,t){if("function"!=typeof t)throw Error("sigma.task: you did not provide a procedure.");sigma.tasks=sigma.tasks||{},sigma.tasks[e]=t;
},sigma.prototype.run=function(e){if(!(e in sigma.tasks))throw Error('sigma.run: inexistent task: "'+e+'".');sigma.tasks[e].apply(this,[new t(this)].concat(Array.prototype.slice.call(arguments,1)))}}.call(this),function(e){sigma.prototype.saveCamera=function(e){var t=this.cameras[e],n=sigma.utils.getBoundaries(this.graph,"read_cam"+t.id+":"),i=n.maxX-n.minX,r=n.maxY-n.minY;return{x:100*t.x/i,y:100*t.y/r,ratio:t.ratio,angle:t.angle}},sigma.prototype.retrieveCamera=function(e,t){var n=this.cameras[e],i=sigma.utils.getBoundaries(this.graph,"read_cam"+n.id+":"),r=i.maxX-i.minX,s=i.maxY-i.minY;return{x:t.x*r/100,y:t.y*s/100,ratio:t.ratio,angle:t.angle}},sigma.prototype.loadCamera=function(e,t){var n=this.cameras[e],i=this.retrieveCamera(e,t);n.goTo(i)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t="Thumbnail",n=0;sigma.renderers.thumbnail=function(e,i,r,s){if("object"!=typeof s)throw"sigma.renderers.thumbnail: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=i,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?r.embedObjects(s.settings):r,this.filter=s.data.filter,this.category=s.data.category,this.values=s.data.values,s.data.camera?this.options.prefix="renderer"+t+n++ +":":this.options.prefix="renderer"+t+":",this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,window.addEventListener("resize",this.boundResize=function(){this.resize(),this.render({process:!0})}.bind(this),!1),this.resize(!1)},sigma.renderers.thumbnail.prototype.render=function(t){if(t=t||{},!t.process)return this;var n,i,r,s=(this.graph,this.graph.nodes),a=this.options.prefix||"";for(this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear(),n=s(),i=0,r=n.length;i<r;i++)(!this.filter||this.filter&&~this.filter.indexOf(n[i].attributes[this.category.id])||0===this.filter.length)&&(this.contexts.nodes.fillStyle=this.values[n[i].attributes[this.category.id]]||(n[i].original||{}).color||n[i].color||this.settings("defaultNodeColor"),this.contexts.nodes.beginPath(),this.contexts.nodes.arc(n[i][a+"x"],n[i][a+"y"],Math.max(n[i][a+"size"]/6,1),0,2*Math.PI,!0),this.contexts.nodes.closePath(),this.contexts.nodes.fill());return this.dispatchEvent("render"),this},sigma.renderers.thumbnail.prototype.initDOM=function(e,t){var n=document.createElement(e);n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext("2d"))},sigma.renderers.thumbnail.prototype.resize=function(t,n){var i,r=this.width,s=this.height,a=1;if(t!==e&&n!==e?(this.width=t,this.height=n):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,n=this.height),r!==this.width||s!==this.height)for(i in this.domElements)this.domElements[i].style.width=t+"px",this.domElements[i].style.height=n+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.domElements[i].setAttribute("width",t*a+"px"),this.domElements[i].setAttribute("height",n*a+"px"),1!==a&&this.contexts[i].scale(a,a));return this},sigma.renderers.thumbnail.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this},sigma.renderers.thumbnail.prototype.kill=function(){var e;window.removeEventListener("resize",this.boundResize);for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts}}.call(this),function(e){function t(e){return function(t){t.original=t.original||{},t.original[e]||(t.original[e]=t[e]||null)}}function n(e){return function(t){t[e]=(t.original||{})[e]||t[e],t.original&&t.original[e]&&delete t.original[e],t.original&&null===t.original[e]&&delete t[e]}}function i(e){delete e.hidden,delete e.muted}function r(e){return function(t){"original"===e?t.size=t.original.size:"degree"===e?t.size=1+2*Math.sqrt(this.graph.degree(t.id)):"indegree"===e?t.size=1+2*Math.sqrt(this.graph.degree(t.id,"in")):t.size=1+2*Math.sqrt(this.graph.degree(t.id,"out"))}}function s(e,t){return function(n){n.color=t?t[n.attributes[e.id]]:n.original.id}}function a(e,t,n){return function(i){var r=!t.some(function(t){return i.attributes[e.id]===t}),s=n[i.attributes[e.id]];i.color=r?u.utils.muteColor(s):s,i.muted=r}}function o(e){var t=this.graph.nodes;t(e.source).muted||t(e.target).muted?e.hidden=!0:delete e.hidden}function l(e){var t,n={};for(t in e)~t.indexOf(":")||~t.indexOf("true")||"muted"===t||"hidden"===t||e.original&&null===e.original[t]||(n[t]="size"!==t&&e.original&&e.original[t]||e[t]);return n}var u="app"in this?app:embed;sigma.task("mapSizes",function(e,n){return e.src("nodes").pipe(t("size")).pipe(r(n)).refresh()}),sigma.task("mapColors",function(e,n){if(!n)return this.run("resetColors");var r=n?u.utils.indexBy(n.values,function(e){return[e.id,e.color]}):null;return e.src("edges").pipe(i).exec(),e.src("nodes").pipe(t("color")).pipe(i).pipe(s(n,r)).refresh()}),sigma.task("resetColors",function(e){return e.src("edges").pipe(i).exec(),e.src("nodes").pipe(n("color")).refresh()}),sigma.task("highlightCategoryValues",function(e,n,i){if(!n)return this.run("resetColors");if(!(i||[]).length)return this.run("mapColors",n);var r=u.utils.indexBy(n.values,function(e){return[e.id,e.color]});e.src("nodes").pipe(t("color")).pipe(a(n,i,r)).exec(),e.src("edges").pipe(o).refresh()}),sigma.prototype.retrieveGraphData=function(){return{nodes:this.graph.nodes().map(l),edges:this.graph.edges().map(l)}}}.call(this),function(e){app.settings={alerts:{delay:2e3},colors:{mutedBasis:248,weakCategory:"#aaa"},domino:{clone:!1,mergeRequests:!1,verbose:!0,strict:!0},i18n:{lang:"en",url:PATH_PREFIX+"/locales/__lng__/__ns__.json"},forceAtlas2:{strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:2,barnesHutOptimize:!1,nodesize:"original"},renderer:"webgl",sigma:{hideEdgesOnMove:!0,font:"Roboto Condensed",fontStyle:"300",defaultLabelSize:13,minEdgeSize:1.5,maxEdgeSize:1.5,maxNodeSize:8,defaultEdgeColor:"#ddd",defaultNodeColor:"#ccc",edgeColor:"default",rescaleIgnoreSize:!1,labelThreshold:8,singleHover:!0,zoomMin:.002,zoomMax:2},slideSigma:{maxNodeSize:3,minEdgeSize:.5,maxEdgeSize:.5},storage:{key:"app-current",corpora:"manylines-corpora"},templates:{path:PATH_PREFIX+"/templates/",prefix:"app",suffix:"handlebars"},upload:{maxSize:45e5}}}.call(this),function(e){function t(e){return e instanceof Object&&!(e instanceof Array)&&!(e instanceof Function)}function n(){var e,i,r={},s=arguments.length;for(e=s-1;e>=0;e--)for(i in arguments[e])r[i]&&t(arguments[e][i])?r[i]=n(arguments[e][i],r[i]):r[i]=arguments[e][i];return r}function i(e,t,n){for(var i=0,r=e.length;i<r;i++)if(t.call(n||null,e[i]))return e[i]}function r(e,t){var n,i,r={};for(n=0,i=e.length;n<i;n++)if("function"==typeof t){var s=t(e[n]);r[s[0]]=s[1]}else r[e[n][t]]=e[n];return r}function s(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(t(e[n]))return n;return-1}function a(e){for(var t=chroma(e).rgb(),n=248,i=0;i<3;i++)t[i]=n-.1*(n-t[i]);return chroma.rgb(t).hex()}function o(e){var t=e.split("/");return{pane:t[1],spaceId:t[2],version:t[3]}}("app"in this?app:embed).utils={extend:n,first:i,indexBy:r,indexOf:s,muteColor:a,parseHash:o}}.call(this),function(e){app.schemas={space:{id:"string",email:"?string",version:"number"},graph:{id:"?string",nodes:"?array",edges:"?array"},meta:"object",snapshots:"array",slide:{title:"string",text:"string",snapshot:"string"},narratives:[{id:"string",title:"string",slides:["slide"]}],sigma:function(e){return e instanceof sigma},element:function(e){return e instanceof Element}};for(var t in app.schemas)domino.struct.add({id:t,struct:app.schemas[t]})}.call(this),function(e){app.properties=[{id:"space",dispatch:"space.updated",description:"[data] - The object describing the current session.",type:"?space",value:null},{id:"graph",dispatch:["data.updated","graph.updated"],description:"[data] - The current graph data.",type:"?graph",value:null},{id:"meta",dispatch:["data.updated","meta.updated"],description:"[data] - The current graph meta object.",type:"?meta",value:null},{id:"snapshots",dispatch:["snapshots.updated"],description:"[data] - The current graph's snapshots.",type:"snapshots",value:[]},{id:"narratives",dispatch:["data.updated","narratives.updated"],description:"[data] - The current graph's narratives.",type:"narratives",value:[]},{id:"pane",dispatch:["pane.updated"],description:"[state] - The current active pane.",type:"string",value:""},{id:"lastPane",description:"[state] - Last active pane. Useful when user needs to log then go back to previous state.",type:"?string",value:null},{id:"modified",dispatch:["modified.updated"],description:"[state] - Object keeping track of modified data so we can save the latest update when asked.",type:"object",value:{}},{id:"currentNarrative",dispatch:["currentNarrative.updated"],description:"[state] - The current narrative being edited.",type:"?string",value:null},{id:"currentSlide",dispatch:["currentSlide.updated"],description:"[state] - The current edited narrative slide by its snasphot id.",type:"?string",value:null},{id:"mainSigma",description:"Main sigma instance used by the application.",type:"?sigma",value:null},{id:"mainRendererContainer",description:"Main sigma renderer container cached for optimization purposes.",type:"?element",value:null}],app.shortcuts=[{id:"spaceId",description:"Returns the current space id if present or undefined.",method:function(){return(this.get("space")||{}).id}},{id:"version",description:"Returns the current version of the graph or undefined.",method:function(){return(this.get("space")||{}).version}},{id:"forceAtlasConfig",description:"Retrieves Force Atlas configuration through the meta property.",method:function(){return app.utils.extend((this.get("meta")||{}).forceAtlasConfig||{},app.settings.forceAtlas2)}},{id:"isModified",description:"Returns whether anything has been modified yet and needs to be saved.",method:function(){return!!Object.keys(this.get("modified")).length}},{id:"isSpaceNew",description:"Returns whether the current space has already been saved at least once.",method:function(){return!this.expand("spaceId")}},{id:"hasSnapshots",description:"Returns whether snapshots exist for the graph.",method:function(){return!!this.get("snapshots").length}},{id:"nodeModel",description:"Little helper to return a node model if existant or an empty array otherwise.",method:function(){return((this.get("meta")||{}).model||{}).node||[]}}],app.queries=[{id:"nodeCategory",description:"Retrieve a precise node category else undefined.",method:function(e){var t=this.expand("nodeModel");return app.utils.first(t,function(t){return e===t.id})}},{id:"snapshotById",description:"Retrieves a snasphot by its id else undefined.",method:function(e){var t=this.get("snapshots");return app.utils.first(t,function(t){return e===t.id})}},{id:"snasphotsById",description:"Retrieves array of snapshots by their id.",method:function(e){var t=this.get("snasphots");return t.filter(function(e){return~id.indexOf(e.id)})}},{id:"narrativeById",description:"Retrieves a narrative by its id else undefined.",method:function(e){var t=this.get("narratives");return app.utils.first(t,function(t){return e===t.id})}},{id:"currentSlide",description:"Retrieves a slide by its snapshot it.",method:function(){var e=this.get("narratives"),t=this.get("currentNarrative"),n=this.get("currentSlide"),i=app.utils.first(e,function(e){return e.id===t});return i?app.utils.first(i.slides,function(e){return e.snapshot===n}):null}},{id:"touchNarrative",description:"Edit the modified object to tell a precise narrative has been updated.",method:function(e){var t=this.get("modified");t.narratives=t.narratives||[],~t.narratives.indexOf(e)||t.narratives.push(e),this.update("modified",t)}}]}.call(this),function(e){var t=["modal","error","warning","info","storage.clear","hash.update"],n={};n.state=[{triggers:"login.required",method:function(e){var t=this.get("pane");"login"!==t&&(this.update("lastPane",t),this.update("pane","login"))}},{triggers:"login.attempt",method:function(e){var t=app.utils.parseHash(window.location.hash);this.request("login",{shortcuts:{spaceId:t.spaceId,password:e.data}})}},{triggers:"app.initialized",method:function(e){app.control.dispatchEvent("hash.load",{hash:window.location.hash})}},{triggers:"hash.load",method:function(e){var t=app.utils.parseHash(e.data.hash);return this.update("lastPane",t.pane),"login"===t.pane?this.dispatchEvent("login.required"):t.spaceId&&t.version?this.dispatchEvent("data.load",{spaceId:t.spaceId,version:t.version}):void this.dispatchEvent("storage.load")}},{triggers:"hash.changed",method:function(e){var t=app.utils.parseHash(e.data.hash);t.pane!==this.get("pane")&&this.update("pane",t.pane)}},{triggers:"data.load",method:function(e){this.request("space.load",{shortcuts:{spaceId:e.data.spaceId,version:e.data.version}}),this.request("narratives.load",{shortcuts:{spaceId:e.data.spaceId,version:e.data.version}})}},{triggers:"storage.loaded",method:function(e){var t=e.data.storage;return!t||t.space&&this.expand("isSpaceNew")?this.update("pane","upload"):(this.update("space",t.space),this.update("graph",t.graph),this.update("meta",t.meta),this.update("modified",t.modified),this.update("narratives",t.narratives),this.dispatchEvent("graph.render"),void this.update("pane",this.get("lastPane")||"basemap"))}},{triggers:"menu.request",method:function(e){var t=e.data;if(this.get("graph")||"upload"===t)return this.expand("hasSnapshots")||"narratives"!==t?"dashboard"===t?this.dispatchEvent("info",{reason:"dashboard.impossible"}):void this.update("pane",t):void this.dispatchEvent("warning",{reason:"narratives.impossible"})}},{triggers:"narratives.back",method:function(e){this.update("currentNarrative",null),this.update("currentSlide",null)}},{triggers:"modified.updated",method:function(e){var t=this.get("modified");return t.narratives&&!t.narratives.length?(delete t.narratives,this.update("modified",t)):void(this.expand("isModified")&&!this.expand("isSpaceNew")&&this.dispatchEvent("save"))}}],n.data=[{triggers:"graph.uploaded",method:function(e){var t=e.data.graph,n={};e.data.model&&(n.model=e.data.model,n.model.node&&app.graph.applyCategoriesColors(n.model.node,t));for(var i in e.data.meta)n[i]=e.data.meta[i];this.dispatchEvent("graph.render"),this.update({graph:t,meta:n,modified:{graph:!0,meta:!0},pane:"basemap"})}},{triggers:"graph.render",method:function(e){if(!e.data.noRender){var t=this.get("mainSigma");t.graph.clear().read(this.get("graph")),t.refresh()}}},{triggers:"save",method:function(e){var t=this.expand("isSpaceNew");if(t&&!e.data.create)this.dispatchEvent("modal",{type:"save"});else if(t)this.request("space.create",{data:{email:e.data.email,password:e.data.password,graph:this.get("graph"),meta:this.get("meta")}});else{var n=this.get("modified");"graph"in n&&this.request("graph.update",{data:{graph:this.get("graph")}}),"meta"in n&&this.request("meta.update",{data:{meta:this.get("meta")}}),"narratives"in n&&n.narratives.forEach(function(e){var t=app.control.query("narrativeById",e);"temp"===e?this.request("narrative.save",{data:{narrative:{title:t.title,slides:t.slides}}}):this.request("narrative.update",{shortcuts:{id:e},data:{narrative:{title:t.title,slides:t.slides}}})},this)}}},{triggers:"bump",method:function(e){this.request("space.bump",{data:{graph:this.get("graph"),meta:this.get("meta")}})}},{triggers:"layout.update",method:function(e){var t=this.get("meta"),n=this.get("modified"),i=app.graph.layoutConstraints(e.data);t.forceAtlasConfig=i,this.update("meta",t),n.meta=!0,this.update("modified",n),this.dispatchEvent("layout.updated",i)}},{triggers:"layout.start",method:function(e){}},{triggers:"layout.stop",method:function(e){var t=this.get("mainSigma").retrieveGraphData();this.update("graph",t);var n=this.get("modified");n.graph=!0,this.update("modified",n)}},{triggers:"snapshot.take",method:function(e){var t=this.get("mainSigma");return this.expand("isSpaceNew")?this.dispatchEvent("save"):void this.request("snapshot.save",{data:{snapshot:{view:{camera:t.saveCamera("main")},filters:e.data.filter?[e.data.filter]:[]}}})}},{triggers:"narrative.add",method:function(e){var t={id:"temp",title:i18n.t("narratives.default_narrative_title"),slides:[]},n=this.get("narratives"),i=this.get("modified");n.push(t),i.narratives=i.narratives||[],i.narratives.push("temp"),this.update("narratives",n),this.update("modified",i),this.update("currentNarrative","temp"),this.dispatchEvent("narrative.added",t)}},{triggers:"narrative.select",method:function(e){this.update("currentNarrative",e.data);var t=app.control.query("narrativeById",e.data);t.slides.length&&this.update("currentSlide",t.slides[0].snapshot),this.dispatchEvent("narrative.selected",t)}},{triggers:"slide.select",method:function(e){this.update("currentSlide",e.data)}},{triggers:"narrative.edit",method:function(e){var t=domino.utils.clone(this.get("narratives")),n=this.get("currentNarrative"),i=app.utils.first(t,function(e){return e.id===n});if(e.data.title&&(i.title=e.data.title),e.data.addSlide){var r={title:i18n.t("narratives.default_slide_title"),text:"",snapshot:e.data.addSlide};i.slides.push(r),this.update("currentSlide",e.data.addSlide)}if(e.data.editSlide){var s=e.data.editSlide,a=app.utils.first(i.slides,function(e){return this.get("currentSlide")===e.snapshot},this);s.title&&(a.title=s.title),s.text&&(a.text=s.text)}if(e.data.removeSlide&&(i.slides=i.slides.filter(function(t){return t.snapshot!==e.data.removeSlide}),this.update("currentSlide",(i.slides[0]||{}).snapshot||null)),e.data.reorderSlides){var o=app.utils.indexBy(i.slides,"snapshot"),l=e.data.reorderSlides.map(function(e){return o[e]});i.slides=l}this.update("narratives",t),setTimeout(function(){app.control.query("touchNarrative",n)},100)}},{triggers:"narrative.delete",method:function(e){var t=e.data,n=this.get("narratives"),i=app.utils.indexOf(n,function(e){return e.id===t});n.splice(i,1),this.update("narratives",n),"temp"!==t?this.request("narrative.delete",{shortcuts:{narrativeId:t}}):this.dispatchEvent("narrative.deleted",t)}}],app.hacks=[].concat(n.state).concat(n.data),t.forEach(function(e){app.hacks.push({triggers:e})})}.call(this),function(e){function t(e,t,n){t.status?this.dispatchEvent("error",{reason:"errors.unauthorized"}):this.dispatchEvent("error",{reason:"errors.unknown"})}function n(e,t,n){"INVALID_EMAIL"===e?this.dispatchEvent("warning",{reason:"warnings.invalid_email"}):"INVALID_PASSWORD"===e?this.dispatchEvent("warning",{reason:"warnings.invalid_password"}):this.dispatchEvent("error",{reason:"errors.unknown"})}function i(e,t,n){401===+t.status?this.dispatchEvent("login.required"):this.dispatchEvent("error",{reason:"errors.unknown"})}var r={type:"GET",dataType:"json",contentType:"application/json"};app.services=[{id:"login",url:"/api/login/:spaceId/:password",success:function(e){this.get("lastPane");this.update("space",e),this.dispatchEvent("data.load")},error:function(e,t,n){t.status?this.dispatchEvent("error",{reason:"errors.wrong_password"}):this.dispatchEvent("error",{reason:"errors.unknown"})}},{id:"logout",url:"/api/logout/:spaceId",success:function(e){this.update("space",null),this.update("pane","upload")},error:t},{id:"space.create",url:"/api/space",type:"POST",before:function(){return this.expand("isSpaceNew")},success:function(e){this.update("space",e),this.update("modified",{});var t=app.settings.storage.corpora,n=JSON.parse(localStorage.getItem(t)||"[]");n.push(e.id),localStorage.setItem(t,JSON.stringify(n)),this.dispatchEvent("modal",{type:"reminder"})},error:n},{id:"space.bump",url:"/api/space/:spaceId/bump",type:"POST",success:function(e){var t=this.get("space");t.version=e.version,this.update("space",t),this.update("snapshots",[]),this.update("narratives",[]),this.update("currentNarrative",null),this.update("currentSlide",null),this.dispatchEvent("hash.update")}},{id:"space.load",url:"/api/space/:spaceId/:version",success:function(e){this.update("space",e.space),this.update("graph",e.graph),this.update("meta",e.meta),this.update("snapshots",e.snapshots),this.update("pane",this.get("lastPane")||"basemap"),this.update("lastPane",null),this.dispatchEvent("graph.render")},error:i},{id:"graph.update",url:"/api/space/:spaceId/graph/:version",type:"POST",success:function(e){var t=this.get("modified");delete t.graph,this.update("modified",t)}},{id:"meta.update",url:"/api/space/:spaceId/meta/:version",type:"POST",success:function(e){var t=this.get("modified");delete t.meta,this.update("modified",t)}},{id:"snapshot.save",url:"/api/space/:spaceId/snapshot/:version",type:"POST",success:function(e,t){this.dispatchEvent("success",{reason:"snapshots.saved"}),this.dispatchEvent("snapshot.taken");var n=this.get("snapshots");n.push(app.utils.extend(t.data.snapshot,{id:e.id})),this.update("snapshots",n)}},{id:"snapshots.load",url:"/api/space/:spaceId/snapshots/:version",type:"GET",success:function(e){this.update("snapshots",e)}},{id:"narrative.save",url:"/api/space/:spaceId/narrative/:version",type:"POST",success:function(e){var t=this.get("narratives"),n=this.get("modified"),i=app.utils.first(t,function(e){return"temp"===e.id});i.id=e.id,n.narratives.splice(n.narratives.indexOf("temp"),1),n.length||delete n.narratives,this.update("narratives",t),this.update("modified",n),"temp"===this.get("currentNarrative")&&this.update("currentNarrative",e.id)}},{id:"narrative.update",url:"/api/narrative/:id",type:"POST",success:function(e,t){var n=this.get("modified"),i=app.utils.indexOf(n.narratives,function(e){return t.data.narrative.id===e});n.narratives.splice(i,1),this.update("modified",n)}},{id:"narratives.load",url:"/api/space/:spaceId/narratives/:version",type:"GET",success:function(e){e=e.map(function(e){return{id:e.id,title:e.title,slides:e.slides}}),this.update("narratives",e)}},{id:"narrative.delete",url:"/api/space/:spaceId/narrative/:version/:narrativeId",type:"DELETE",success:function(e,t){this.dispatchEvent("narrative.deleted",t.shortcuts.narrativeId)},error:i}],app.services=app.services.map(function(e){return app.utils.extend(e,r)})}.call(this),function(e){Handlebars.registerHelper("t",function(e,t){var n;return n="number"!=typeof t?i18n.t(e):i18n.t(e,{count:t}),new Handlebars.SafeString(n)}),Handlebars.registerHelper("keysLength",function(e){return new Handlebars.SafeString(Object.keys(e||{}).length+"")}),Handlebars.registerHelper("basemap_categories",function(e){return new Handlebars.SafeString(i18n.t("graph.category",{count:Object.keys(e||{}).length}))}),Handlebars.registerHelper("multiply",function(e,t){return new Handlebars.SafeString(e*t)}),Handlebars.registerHelper("ifEquals",function(e,t,n){return e===t?n.fn(this):n.inverse(this)})}.call(this),function(e){function t(e){function t(t,i){if(n.cache[t])return i(null,n.cache[t]);var r=e.path+e.prefix+"."+t+"."+e.suffix;$.get(r,function(e){var r=Handlebars.compile(e);n.cache[t]=r,i(null,r)})}var n=this;this.cache={},this.require=function(e,n){e="string"==typeof e?[e]:e;var i={};e.forEach(function(e){i[e]=function(n){t(e,n)}}),contra.concurrent(i,function(e,t){n(1===Object.keys(t).length?t[Object.keys(t)[0]]:t)})}}app.templates=new t(app.settings.templates)}.call(this),function(e){app.modules.alerts=function(){function e(e){return function(t){var i=$('<div class="alert alert-'+e+'">'+t+"</div>").appendTo(n);setTimeout(function(){n.has(i)&&i.fadeOut(300,function(){$(this).remove()})},app.settings.alertsDelay||2e3)}}function t(e,t){var n={error:"danger",warning:"warning",info:"info",success:"success"};i[n[t.type]](i18n.t(t.data.reason))}var n=$("#app-alerts-container"),i=this;["success","info","warning","danger"].forEach(function(t){i[t]=e(t)}),this.triggers.events.error=t,this.triggers.events.warning=t,this.triggers.events.info=t,this.triggers.events.success=t}}.call(this),function(e){app.modules.location=function(){function e(e){var t=app.utils.parseHash(window.location.hash),i="/"+e.get("pane");e.expand("spaceId")&&(i+="/"+e.expand("spaceId")+"/"+e.expand("version")),"login"===e.get("pane")&&(i+="/"+t.spaceId+"/"+t.version),n=i,window.location.hash=i}var t=this,n=null;window.onhashchange=function(){n!==window.location.hash&&(t.dispatchEvent("hash.changed",{hash:window.location.hash}),n=window.location.hash)},this.triggers.events["hash.update"]=e,this.triggers.events["pane.updated"]=e,this.triggers.events["space.updated"]=e}}.call(this),function(e){app.modules.layout=function(){var e=this;this.currentPane=null,this.triggers.events["pane.updated"]=function(t,n){var i=t.get("pane");e.currentPane&&(e.currentPane.unmount&&e.currentPane.unmount(),app.control.killModule(e.currentPane)),e.currentPane=app.control.addModule(app.panes[i]),e.currentPane.mount()}}}.call(this),function(e){app.modules.graph=function(e,t){t=t||{};var n=app.control.get("mainSigma");if($(".sigma-expand").replaceWith(app.control.get("mainRendererContainer")),n.renderers.main.resize(),t.snapshot){var i=t.snapshot,r=i.filters[0]||{};n.settings(app.settings.slideSigma),n.run("highlightCategoryValues",app.control.query("nodeCategory",r.category),r.values),n.loadCamera("main",i.view.camera)}else n.settings(app.settings.sigma),n.cameras.main.goTo({x:0,y:0,ratio:1,angle:0}),n.run("resetColors");$('*[data-app-sigma-action="zoom"]',e).click(function(){var e=n.cameras.main;sigma.misc.animation.camera(e,{ratio:e.ratio/1.5},{duration:150})}),$('*[data-app-sigma-action="unzoom"]',e).click(function(){var e=n.cameras.main;sigma.misc.animation.camera(e,{ratio:1.5*e.ratio},{duration:150})}),$('*[data-app-sigma-action="recenter"]',e).click(function(){var e=n.cameras.main;sigma.misc.animation.camera(e,t.snapshot?n.retrieveCamera("main",t.snapshot.view.camera):{x:0,y:0,angle:0,ratio:1},{duration:150})}),this.unmount=function(){var e=$(".sigma-panel")[0];if(e)try{e.removeChild(app.control.get("mainRendererContainer"))}catch(t){}}}}.call(this),function(e){app.modules.menu=function(e){var t=$(".nav-tmn-menu"),n=this;t.on("click","[data-app-pane]:not(.active)",function(){n.dispatchEvent("menu.request",$(this).attr("data-app-pane"))}),this.triggers.events["pane.updated"]=function(e){var n=e.get("pane");$("[data-app-pane]",t).removeClass("active"),$('[data-app-pane="'+n+'"]',t).addClass("active")}}}.call(this),function(e){app.modules.status=function(e){var t=$(".save > a"),n=this;t.hide(),t.click(function(){n.dispatchEvent("save")}),this.triggers.events["modified.updated"]=function(e){e.expand("isModified")?t.show():t.hide()}}}.call(this),function(e){app.modules.storage=function(){function e(e){if(r){var t={};t.space=e.get("space"),t.meta=e.get("meta"),t.graph=e.get("graph"),t.modified=e.get("modified"),t.narratives=e.get("narratives");try{localStorage.setItem(app.settings.storage.key,JSON.stringify(t))}catch(n){r=!1}}}function t(e){if(r){var t=null;try{t=JSON.parse(localStorage.getItem(app.settings.storage.key))}catch(n){r=!1}i.dispatchEvent("storage.loaded",{storage:t})}}function n(){if(r)try{localStorage.removeItem(app.settings.storage.key)}catch(e){r=!1}}var i=this,r=!app.control.expand("spaceId");r||n(),this.triggers.events["data.updated"]=e,this.triggers.events["modified.updated"]=e,this.triggers.events["storage.load"]=t,this.triggers.events["storage.clear"]=n}}.call(this),function(e){app.modules.modals=function(){var e=this,t={bump:{emitters:function(t){$("#space-bump-cancel",t).click(function(){t.modal("hide")}),$("#space-bump-confirm",t).click(function(){e.dispatchEvent("bump"),t.modal("hide")})}},save:{emitters:function(t){$("input",t).keypress(function(e){13===e.which&&$("#space-save",t).trigger("click")}),$("#space-save",t).click(function(){var n=$("#space-email",t).val(),i=$("#space-password",t).val();n&&i?(e.dispatchEvent("save",{create:!0,email:n,password:i}),t.modal("hide")):n?i||e.dispatchEvent("warning",{reason:"warnings.missing_password"}):e.dispatchEvent("warning",{reason:"warnings.missing_email"})})}},share:{renderData:function(e){return{url:location.protocol+"//"+location.host+"/embed#/narrative/"+app.control.query("narrativeById",app.control.expand("currentNarrative")).id}},emitters:function(e){$("#share-url",e).select(),$("input, textarea",e).focus(function(){setTimeout(function(){this.select()}.bind(this),0)})}},reminder:{renderData:function(){return{url:location.href}},emitters:function(e){$("#reminder-url",e).select().focus(),$("input",e).focus(function(){setTimeout(function(){this.select()}.bind(this),0)})}}};this.openModal=function(e){var n=$('[data-app-modal="'+e+'"]');return n.length&&!t[e].renderData?(t[e].emitters&&t[e].emitters(n),n.modal("show")):void app.templates.require("modals."+e,function(n){var i=$(n(t[e].renderData&&t[e].renderData()||{})).i18n().modal();t[e].emitters&&t[e].emitters(i)})},this.triggers.events.modal=function(n,i){i.data.type in t&&e.openModal(i.data.type)}}}.call(this),function(e){app.modules.forceAtlas=function(e,t){var n=this,i=app.control.get("mainSigma");e.on("click",'*[data-app-basemap-action="startLayout"]',function(r){if(app.control.expand("hasSnapshots"))return n.dispatchEvent("modal",{type:"bump"});$("div[data-app-basemap-switchlayout]",e).attr("data-app-basemap-switchlayout","on");var s=app.control.expand("forceAtlasConfig");t.openPanel("force"),i.configForceAtlas2(s),i.startForceAtlas2(),r.preventDefault(),n.dispatchEvent("layout.start")}),e.on("click",'*[data-app-basemap-action="stopLayout"]',function(t){$("div[data-app-basemap-switchlayout]",e).attr("data-app-basemap-switchlayout","off"),i.stopForceAtlas2(),t.preventDefault(),n.dispatchEvent("layout.stop")}),e.on("change","*[data-app-basemap-layout-option]",function(e){var t=app.control.expand("forceAtlasConfig"),i={};i[$(this).attr("data-app-basemap-layout-option")]=value=$(this).is("[type=checkbox]")?$(this).prop("checked"):+$(this).val(),i.gravity&&(i.gravity/=1e3),n.dispatchEvent("layout.update",app.utils.extend(i,t))}),this.triggers.events["layout.updated"]=function(e,t){i.configForceAtlas2(t.data)},this.unmount=function(){i.killForceAtlas2()}}}.call(this),function(e){app.modules.categoriesFilter=function(e,t){var n=this,i=app.control.get("mainSigma");this.filter=new Filter,this.thumbnails=[],e.on("click",".network-item",function(e){var i=app.control.query("nodeCategory",$(this).attr("data-app-thumbnail-category"));t.openPanel("category",{category:i}),n.filter.clear().set(i)}),e.on("click",".category-item",function(t){var r,s,a=$(t.target);a=a.hasClass(".category-item")?a:a.parents(".category-item"),r=a.find(".cat-item-label").text(),s=$(".network-item.active",e).attr("data-app-thumbnail-category"),a.toggleClass("active"),a.hasClass("active")?(n.filter.add(r),a.removeClass("cat-item-muted")):(n.filter.remove(r),a.addClass("cat-item-muted"));var o=$(".category-item.active",e).length;return o?1===o&&$(".category-item:not(.active)",e).addClass("cat-item-muted"):$(".category-item",e).removeClass("cat-item-muted"),$(".category-item:not(.active)",e).length?void i.run("highlightCategoryValues",n.filter.category,n.filter.values):$(".categories-container",e).trigger("click")}),e.on("click",".categories-container",function(t){(t.target===this||$(t.target).is(".title"))&&(n.filter.empty(),$(".category-item",e).removeClass("cat-item-muted active"),i.run("highlightCategoryValues",n.filter.category,n.filter.values))}),this.unmountThumbnails=function(){this.thumbnails.forEach(function(e){e.unmount()}),this.thumbnails=[]},this.refreshThumbnails=function(){i.refresh(),this.thumbnails.forEach(function(e){e.render()})},this.renderCategories=function(){var e=app.control.expand("nodeModel"),t=$(".subcontainer-networklist");t.empty(),this.unmountThumbnails(),app.templates.require("misc.category",function(i){
e.forEach(function(e){if(!e.noDisplay){var r=$(i(e));t.append(r),n.thumbnails.push(new Thumbnail(r.find(".network-thumbnail")[0],{category:e}))}}),n.refreshThumbnails()})},this.triggers.events["layout.stop"]=this.refreshThumbnails.bind(this),this.renderCategories(),this.unmount=function(){this.unmountThumbnails()}}}.call(this),function(e){app.panes.login=function(){var e=this;Pane.call(this,{name:"login"}),this.emitters=function(t){$("#login-password",t).focus(),$("#login-signin").click(function(t){var n=$("#login-password").val().trim();if(n)return e.dispatchEvent("login.attempt",n),t.stopPropagation(),!1}),$("input",t).keypress(function(e){13===e.which&&($("#login-signin").trigger("click"),$("#login-signin").blur(),e.preventDefault())})}}}.call(this),function(e){app.panes.upload=function(){var e=this;Pane.call(this,{name:"upload"}),this.emitters=function(t){var n=$('a[role="button"]',t);n.click(function(n){$("input:file",t).click(),e.dispatchEvent("storage.clear"),n.preventDefault()}),$("input:file",t).change(function(){var t=$(this)[0].files[0];if(t){var i=new FileReader;i.readAsText(t,"UTF-8"),i.onloadstart=function(t){n.button("loading"),t.total>app.settings.upload.maxSize&&(e.dispatchEvent("error",{reason:"upload.too_big"}),i.abort())},i.onerror=function(t){"AbortError"!==t.target.error.name&&e.dispatchEvent("error",{reason:"upload.error_uploading_file"}),n.button("reset")},i.onload=function(i){var r={},s=i.target.result,a=t.name.split(".").pop().toLowerCase();if("gexf"!==a)return e.dispatchEvent("error",{reason:"upload.invalid_file_format"});try{sigma.parsers.gexf((new DOMParser).parseFromString(s,"application/xml"),function(e){r.meta=e.meta,r.model=e.model,r.graph={nodes:e.nodes,edges:e.edges}})}catch(o){return n.button("reset"),e.dispatchEvent("error",{reason:"upload.invalid_GEXF_file"})}Object.keys(r).length&&e.dispatchEvent("graph.uploaded",r)}}})}}}.call(this),function(e){app.panes.basemap=function(){var e=this,t=app.control.get("mainSigma");Pane.call(this,{name:"basemap",graph:!0}),this.emitters=function(n){this.addChildModule(app.modules.forceAtlas,[n]),this.addChildModule(app.modules.categoriesFilter,[n]),$(".forcelayout-container .tirette",n).click(function(t){e.openPanel("force"),t.preventDefault()}),n.on("keypress","*[data-app-basemap-layout-option]",function(e){13===e.which&&$(this).blur()}),n.on("change","*[data-app-basemap-layout-nodesize]",function(e){var n=$(this).attr("data-app-basemap-layout-nodesize");t.run("mapSizes",n)})},this.openPanel=function(n,i){var r="force"===n?"basemap.forcePanel":"misc.categoryPanel",s=e.dom;app.templates.require(r,function(r){var a;s.find('*[data-app-basemap-panel="sidebar"] .active').removeClass("active"),"force"===n?(a=$(r(app.control.expand("forceAtlasConfig"))),$(".forcelayout-container",s).addClass("active")):(a=$(r(i.category)),$('.network-item[data-app-thumbnail-category="'+i.category.id+'"]',s).addClass("active"),t.run("mapColors",i.category)),$(".tirette",a).click(function(t){e.closePanel(),t.preventDefault()}),s.find('*[data-app-basemap-panel="sigma"]').removeClass("col-xs-9").addClass("col-xs-6"),s.find(".col-middle").show().empty().append(a),$(".forcelayout-container .tirette",s).hide(),e.resizeGraph()})},this.closePanel=function(){var e=this.dom;e.find('*[data-app-basemap-panel="sidebar"]').find(".active").removeClass("active"),e.find('*[data-app-basemap-panel="sigma"]').removeClass("col-xs-6").addClass("col-xs-9"),e.find(".col-middle").empty().hide(),$(".forcelayout-container .tirette",e).show(),this.resizeGraph(),t.run("resetColors")},this.resizeGraph=function(){t.renderers.main.resize(),t.renderers.main.render()}}}.call(this),function(e){app.panes.dashboard=function(){Pane.call(this,{name:"dashboard"})}}.call(this),function(e){app.panes.snapshots=function(){var e=this,t=app.control.get("mainSigma");Pane.call(this,{name:"snapshots",graph:!0}),this.categories=null,this.snapshotThumbnails=[],this.emitters=function(n){this.categories=this.addChildModule(app.modules.categoriesFilter,[n]),$('[data-app-snapshots-action="snapshot"]',n).click(function(t){e.dispatchEvent("snapshot.take",{filter:e.categories.filter["export"]()}),t.preventDefault()}),n.on("click",".views-band-container .view-item",function(n){var i=$(this).children(".view-thumbnail"),r=i.attr("data-app-thumbnail-snapshot"),s=app.control.query("snapshotById",r);t.loadCamera("main",s.view.camera),e.closePanel(),e.categories.filter["import"]({category:app.control.query("nodeCategory",(s.filters[0]||{}).category),values:(s.filters[0]||{}).values}),e.categories.filter.category&&e.openPanel("misc.categoryPanel",{category:e.categories.filter.category})})},this.openPanel=function(n,i){var r=e.dom;app.templates.require("misc.categoryPanel",function(n){var s;r.find('*[data-app-snapshots-panel="sidebar"] .active').removeClass("active"),s=$(n(i.category)),$('.network-item[data-app-thumbnail-category="'+i.category.id+'"]',r).addClass("active"),$(".tirette",s).click(function(t){e.closePanel(),t.preventDefault()}),r.find('*[data-app-snapshots-panel="sigma"]').removeClass("col-xs-9").addClass("col-xs-6"),r.find(".col-middle").show().empty().append(s),$(".forcelayout-container .tirette",r).hide(),e.categories.filter.values.length?(r.find(".category-item").addClass("cat-item-muted"),e.categories.filter.values.forEach(function(e){r.find('.category-item[data-app-category-value="'+e+'"]').addClass("active").removeClass("cat-item-muted")}),t.run("highlightCategoryValues",i.category,e.categories.filter.values)):t.run("mapColors",i.category),e.resizeGraph()})},this.closePanel=function(){var n=this.dom;n.find('*[data-app-snapshots-panel="sidebar"]').find(".active").removeClass("active"),n.find('*[data-app-snapshots-panel="sigma"]').removeClass("col-xs-6").addClass("col-xs-9"),n.find(".col-middle").empty().hide(),this.resizeGraph(),t.run("resetColors"),e.categories.filter.clear()},this.resizeGraph=function(){t.renderers.main.resize(),t.renderers.main.render()},this.renderSnapshots=function(){var t=$(".views-band");this.unmountSnapshotThumbnails(),app.templates.require("misc.snapshot",function(n){var i=app.control.get("snapshots");t.empty(),i.forEach(function(i){var r=$(n(i));t.append(r);var s=(i.filters||[])[0],a=app.control.query("nodeCategory",(s||{}).category);e.snapshotThumbnails.push(new Thumbnail(r.find(".view-thumbnail")[0],{category:a,camera:i.view.camera,filter:s}))}),e.refreshSnapshotTumbnails()})},this.refreshSnapshotTumbnails=function(){t.refresh(),this.snapshotThumbnails.forEach(function(e){e.render()})},this.unmountSnapshotThumbnails=function(){this.snapshotThumbnails.forEach(function(e){e.unmount()}),this.snapshotThumbnails=[]},this.didRender=function(){this.renderSnapshots()},this.triggers.events["snapshots.updated"]=function(){e.rendered&&e.renderSnapshots()},this.willUnmount=function(){this.unmountSnapshotThumbnails()}}}.call(this),function(e){app.panes.narratives=function(){function e(){s.mode="menu",s.unmountThumbnails(),app.templates.require("narratives.menu",function(e){var t=$(e());a.next("div").replaceWith(t),s.renderNarrativeList(),s.menuEmitters(t)})}function t(e){s.mode="edition",app.templates.require("narratives.edit",function(t){var n=$(t(e||{}));a.next("div").replaceWith(n),s.renderSnapshots(),s.editionEmitters(n),r()})}function n(e){var t=$(".slide-container");s.graph&&s.removeChildModule(s.graph),app.templates.require("narratives.slide",function(n){t.empty().append(n({slide:e,placeholder:i18n.t("narratives.default_slide_text")})),$('[data-app-thumbnail-snapshot="'+e.snapshot+'"]').parent().addClass("active");var i=app.control.query("snapshotById",e.snapshot);s.graph=s.addChildModule(app.modules.graph,[t,{snapshot:i}])})}function i(e,n){"menu"===s.mode&&t(n.data)}function r(e,t){if("edition"===s.mode){var i=app.control.query("currentSlide");i?($("[data-app-thumbnail-snapshot]").parent().removeClass("active"),$('[data-app-thumbnail-snapshot="'+i.snapshot+'"]').parent().addClass("active"),n(i)):$(".slide-container").empty()}}var s=this,a=$(".before-main"),o=app.control.get("mainSigma");Pane.call(this,{name:"narratives"}),this.thumbnails=[],this.mode=null,this.graph=null,this.menuEmitters=function(e){e.on("click",'[data-app-narratives-action="add"]',function(){s.dispatchEvent("narrative.add")}),e.on("click",'[data-app-narratives-action="edit"] a',function(e){var t=$(this).parents('[data-app-narratives-action="edit"]').attr("data-app-narrative-id");s.dispatchEvent("narrative.select",t),e.preventDefault(),e.stopPropagation()}),e.on("click",'[data-app-narratives-action="delete"]',function(){var e=$(this).parents('[data-app-narratives-action="edit"]').attr("data-app-narrative-id");s.dispatchEvent("narrative.delete",e)})},this.editionEmitters=function(t){t.on("click",'[data-app-narratives-action="back"]',function(){s.dispatchEvent("narratives.back"),e()}),t.on("click",'[data-app-narratives-action="share"]',function(e){s.dispatchEvent("modal",{type:"share"})}),t.on("change","[data-app-narratives-editable]",function(){var e=$(this).attr("data-app-narratives-editable"),t=$(this).val().trim();"title"===e?s.dispatchEvent("narrative.edit",{title:t}):"slide_title"===e?s.dispatchEvent("narrative.edit",{editSlide:{title:t}}):"slide_text"===e&&s.dispatchEvent("narrative.edit",{editSlide:{text:t}})}),t.on("click",".chosen-views-band [data-app-thumbnail-snapshot]",function(){$(this).parent().hasClass("active")||s.dispatchEvent("slide.select",$(this).attr("data-app-thumbnail-snapshot"))})},this.renderNarrativeList=function(){app.templates.require("narratives.item",function(e){var t=$(".narratives-list");app.control.get("narratives").forEach(function(n){t.append(e(n))})})},this.renderSnapshots=function(){var e=app.control.get("snapshots"),t=app.control.query("narrativeById",app.control.get("currentNarrative"));if(e.length){var n=$(".unchosen-views-band"),i=$(".chosen-views-band");n.empty(),i.empty(),this.unmountThumbnails(),app.templates.require("misc.snapshot",function(r){var a=t.slides.map(function(e){return e.snapshot}),o=a.map(function(t){return app.utils.first(e,function(e){return e.id===t})}).concat(e.filter(function(e){return!~a.indexOf(e.id)}));o.forEach(function(e){var a=$(r(e)),o=t.slides.some(function(t){return t.snapshot===e.id})?i:n;o.append(a);var l=(e.filters||[])[0],u=app.control.query("nodeCategory",(l||{}).category);s.thumbnails.push(new Thumbnail(a.find(".view-thumbnail")[0],{category:u,camera:e.view.camera,filter:l})),s.refreshThumbnails(),s.registerSortables()});var l=app.control.get("currentSlide");l&&($("[data-app-thumbnail-snapshot]").parent().removeClass("active"),$('[data-app-thumbnail-snapshot="'+l+'"]').parent().addClass("active"))})}},this.refreshThumbnails=function(){o.refresh(),this.thumbnails.forEach(function(e){e.render()})},this.unmountThumbnails=function(){this.thumbnails.forEach(function(e){e.unmount()}),this.thumbnails=[]},this.registerSortables=function(){this.unregisterSortables(),this.unchosen=new Sortable($(".unchosen-views-band")[0],{group:"snapshots",draggable:"li",filter:".no-drag",ghostClass:"drag-ghost",onAdd:function(e){$(e.item).removeClass("active")}}),this.chosen=new Sortable($(".chosen-views-band")[0],{group:"snapshots",draggable:"li",filter:".no-drag",ghostClass:"drag-ghost",onAdd:function(e){var t=$(e.item).find(".view-thumbnail").attr("data-app-thumbnail-snapshot"),n=$(".chosen-views-band [data-app-thumbnail-snapshot]").get().map(function(e){return $(e).attr("data-app-thumbnail-snapshot")});s.dispatchEvent("narrative.edit",{addSlide:t,reorderSlides:n})},onRemove:function(e){var t=$(e.item).find(".view-thumbnail").attr("data-app-thumbnail-snapshot");s.dispatchEvent("narrative.edit",{removeSlide:t})},onUpdate:function(e){var t=$(".chosen-views-band [data-app-thumbnail-snapshot]").get().map(function(e){return $(e).attr("data-app-thumbnail-snapshot")});s.dispatchEvent("narrative.edit",{reorderSlides:t})}})},this.unregisterSortables=function(){(this.unchosen||this.chosen)&&(this.unchosen.destroy(),this.chosen.destroy())},this.triggers.events["narrative.added"]=i,this.triggers.events["narrative.selected"]=i,this.triggers.events["currentSlide.updated"]=r,this.triggers.events["narrative.deleted"]=function(e,t){var n=t.data;$('[data-app-narrative-id="'+n+'"]').parent().fadeOut()},this.didRender=function(){var n=app.control.get("currentNarrative");n?t(app.control.query("narrativeById",n)):e()},this.willUnmount=function(){this.unmountThumbnails(),this.unregisterSortables()}}}.call(this),function(e){domino.settings(app.settings.domino),app.control=new domino({hacks:app.hacks,properties:app.properties,services:app.services,shortcuts:app.shortcuts}),app.init=function(){contra.series({dictionary:function(e){var t=app.settings.i18n;i18n.init({lng:t.lang,fallbackLng:t.lang,resGetPath:t.url,ns:{namespaces:["translation"],defaultNs:"translation"}},function(t){$("body").i18n(),e()})},sigma:function(e){var t=new sigma({settings:app.settings.sigma});t.addCamera("main"),t.addCamera("static");var n=document.createElement("div");n.setAttribute("class","sigma-expand"),t.addRenderer({container:n,camera:"main",type:app.settings.renderer,id:"main"}),window.addEventListener("resize",function(){window.setTimeout(t.refresh.bind(t),0)}),app.control.update({mainSigma:t,mainRendererContainer:n}),e()},modules:function(e){app.control.addModule(app.modules.alerts),app.control.addModule(app.modules.location),app.control.addModule(app.modules.layout),app.control.addModule(app.modules.menu),app.control.addModule(app.modules.status),app.control.addModule(app.modules.modals),app.control.addModule(app.modules.storage),e()},queries:function(e){var t={};app.queries.forEach(function(e){t[e.id]=e.method}),app.control.query=function(e){if(!(e in t))throw Error("app.control.query: inexistant query.");return t[e].apply(app.control,Array.prototype.slice.call(arguments,1))},e()}},function(e){app.control.dispatchEvent("app.initialized")})},app.init()}.call(this);